import{S as Dn,i as Mn,s as Bn,k as xt,a as Xt,y as st,l as wt,m as vt,h as pe,c as Yt,z as at,n as ve,p as ls,b as Ue,A as ot,G as Ci,g as De,d as ke,B as lt,W as Nn,a7 as pi,q as Jt,r as er,V as Vt,Z as en,X as mi,w as wr,e as Sr,Y as ri,$ as cs,f as Gr,a0 as fs,v as Hr,a1 as sn,a4 as an,F as us,u as hs}from"../chunks/index.fe0a1c86.js";import{B as on,C as Ii}from"../chunks/Button.54000be3.js";import{S as ds,C as gs}from"../chunks/Set.0ca803c6.js";import{T as xs}from"../chunks/Text.dd5b60c0.js";import{C as bi,a as _i}from"../chunks/ActionIcons.2788abc4.js";import{A as yi}from"../chunks/Actions.a7c78e01.js";import{T as Ln}from"../chunks/Textfield.505bfc91.js";import"../chunks/Suffix.5f2f5063.js";import{p as ws}from"../chunks/parse.bee59afc.js";import{h as As}from"../chunks/singletons.35efc5d6.js";import{i as Rn,g as Es}from"../chunks/navigation.a03ee98f.js";import{p as Cs}from"../chunks/stores.ba3acca9.js";import{a as ni,c as ii,p as Sn}from"../chunks/stores.69f96dac.js";function ps(g,f){for(var c=0;c<f.length;c++){const d=f[c];if(typeof d!="string"&&!Array.isArray(d)){for(const E in d)if(E!=="default"&&!(E in g)){const u=Object.getOwnPropertyDescriptor(d,E);u&&Object.defineProperty(g,E,u.get?u:{enumerable:!0,get:()=>d[E]})}}}return Object.freeze(Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}))}function ms(g){return As.apply_action(g)}function Is(g){const f=JSON.parse(g);return f.data&&(f.data=ws(f.data)),f}function si(g){return HTMLElement.prototype.cloneNode.call(g)}function bs(g,f=()=>{}){const c=async({action:E,result:u,reset:p})=>{u.type==="success"&&(p!==!1&&HTMLFormElement.prototype.reset.call(g),await Rn()),(location.origin+location.pathname===E.origin+E.pathname||u.type==="redirect"||u.type==="error")&&ms(u)};async function d(E){var oe,le,Xe,ct;if(((oe=E.submitter)!=null&&oe.hasAttribute("formmethod")?E.submitter.formMethod:si(g).method)!=="post")return;E.preventDefault();const p=new URL((le=E.submitter)!=null&&le.hasAttribute("formaction")?E.submitter.formAction:si(g).action),N=new FormData(g),b=(Xe=E.submitter)==null?void 0:Xe.getAttribute("name");b&&N.append(b,((ct=E.submitter)==null?void 0:ct.getAttribute("value"))??"");const A=new AbortController;let D=!1;const ne=await f({action:p,cancel:()=>D=!0,controller:A,get data(){return N},formData:N,get form(){return g},formElement:g,submitter:E.submitter})??c;if(D)return;let J;try{const me=await fetch(p,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:N,signal:A.signal});J=Is(await me.text()),J.type==="error"&&(J.status=me.status)}catch(me){if((me==null?void 0:me.name)==="AbortError")return;J={type:"error",error:me}}ne({action:p,get data(){return N},formData:N,get form(){return g},formElement:g,update:me=>c({action:p,result:J,reset:me==null?void 0:me.reset}),result:J})}return HTMLFormElement.prototype.addEventListener.call(g,"submit",d),{destroy(){HTMLFormElement.prototype.removeEventListener.call(g,"submit",d)}}}var ae;(function(g){g[g.QR_CODE=0]="QR_CODE",g[g.AZTEC=1]="AZTEC",g[g.CODABAR=2]="CODABAR",g[g.CODE_39=3]="CODE_39",g[g.CODE_93=4]="CODE_93",g[g.CODE_128=5]="CODE_128",g[g.DATA_MATRIX=6]="DATA_MATRIX",g[g.MAXICODE=7]="MAXICODE",g[g.ITF=8]="ITF",g[g.EAN_13=9]="EAN_13",g[g.EAN_8=10]="EAN_8",g[g.PDF_417=11]="PDF_417",g[g.RSS_14=12]="RSS_14",g[g.RSS_EXPANDED=13]="RSS_EXPANDED",g[g.UPC_A=14]="UPC_A",g[g.UPC_E=15]="UPC_E",g[g.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var ai=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),oi;(function(g){g[g.UNKNOWN=0]="UNKNOWN",g[g.URL=1]="URL"})(oi||(oi={}));function _s(g){return Object.values(ae).includes(g)}var tn;(function(g){g[g.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",g[g.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(tn||(tn={}));var ys=function(){function g(){}return g.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",g.SCAN_DEFAULT_FPS=2,g.DEFAULT_DISABLE_FLIP=!1,g.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,g.DEFAULT_SUPPORTED_SCAN_TYPE=[tn.SCAN_TYPE_CAMERA,tn.SCAN_TYPE_FILE],g}(),Ti=function(){function g(f,c){this.format=f,this.formatName=c}return g.prototype.toString=function(){return this.formatName},g.create=function(f){if(!ai.has(f))throw"".concat(f," not in html5QrcodeSupportedFormatsTextMap");return new g(f,ai.get(f))},g}(),li=function(){function g(){}return g.createFromText=function(f){var c={text:f};return{decodedText:f,result:c}},g.createFromQrcodeResult=function(f){return{decodedText:f.text,result:f}},g}(),On;(function(g){g[g.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",g[g.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",g[g.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(On||(On={}));var Ts=function(){function g(){}return g.createFrom=function(f){return{errorMessage:f,type:On.UNKWOWN_ERROR}},g}(),Ss=function(){function g(f){this.verbose=f}return g.prototype.log=function(f){this.verbose&&console.log(f)},g.prototype.warn=function(f){this.verbose&&console.warn(f)},g.prototype.logError=function(f,c){(this.verbose||c===!0)&&console.error(f)},g.prototype.logErrors=function(f){if(f.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(f)},g}();function $t(g){return typeof g>"u"||g===null}var Tr=function(){function g(){}return g.codeParseError=function(f){return"QR code parse error, error = ".concat(f)},g.errorGettingUserMedia=function(f){return"Error getting userMedia, error = ".concat(f)},g.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},g.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},g.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},g.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},g.scannerPaused=function(){return"Scanner paused"},g}(),Si=function(){function g(){}return g.isMediaStreamConstraintsValid=function(f,c){if(typeof f!="object"){var d=typeof f;return c.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var E=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(E),p=Object.keys(f),N=0,b=p;N<b.length;N++){var A=b[N];if(u.has(A))return c.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},g}(),Vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ni(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var vn={exports:{}};(function(g,f){(function(c,d){d(f)})(Vr,function(c){function d(x){return x==null}var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,e){x.__proto__=e}||function(x,e){for(var t in e)e.hasOwnProperty(t)&&(x[t]=e[t])};function u(x,e){E(x,e);function t(){this.constructor=x}x.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function p(x,e){var t=Object.setPrototypeOf;t?t(x,e):x.__proto__=e}function N(x,e){e===void 0&&(e=x.constructor);var t=Error.captureStackTrace;t&&t(x,e)}var b=function(x){u(e,x);function e(t){var r=this.constructor,n=x.call(this,t)||this;return Object.defineProperty(n,"name",{value:r.name,enumerable:!1}),p(n,r.prototype),N(n),n}return e}(Error);class A extends b{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}A.kind="Exception";class D extends A{}D.kind="ArgumentException";class O extends A{}O.kind="IllegalArgumentException";class ne{constructor(e){if(this.binarizer=e,e===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,r,n){const i=this.binarizer.getLuminanceSource().crop(e,t,r,n);return new ne(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new ne(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new ne(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class J extends A{static getChecksumInstance(){return new J}}J.kind="ChecksumException";class oe{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class le{static arraycopy(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}static currentTimeMillis(){return Date.now()}}class Xe extends A{}Xe.kind="IndexOutOfBoundsException";class ct extends Xe{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}ct.kind="ArrayIndexOutOfBoundsException";class me{static fill(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t}static fillWithin(e,t,r,n){me.rangeCheck(e.length,t,r);for(let i=t;i<r;i++)e[i]=n}static rangeCheck(e,t,r){if(t>r)throw new O("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new ct(t);if(r>e)throw new ct(r)}static asList(...e){return e}static create(e,t,r){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(r))}static createInt32Array(e,t,r){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(r))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const r of e)t=31*t+r;return t}static fillUint8Array(e,t){for(let r=0;r!==e.length;r++)e[r]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)}static copyOfRange(e,t,r){const n=r-t,i=new Int32Array(n);return le.arraycopy(e,t,i,0,n),i}static binarySearch(e,t,r){r===void 0&&(r=me.numberComparator);let n=0,i=e.length-1;for(;n<=i;){const s=i+n>>1,a=r(t,e[s]);if(a>0)n=s+1;else if(a<0)i=s-1;else return s}return-n-1}static numberComparator(e,t){return e-t}}class we{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}we.MIN_VALUE_32_BITS=-2147483648,we.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=Te.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=Te.makeArray(e);le.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),i=r[n];i&=~((1<<(e&31))-1);const s=r.length;for(;i===0;){if(++n===s)return t;i=r[n]}const a=n*32+we.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),i=~r[n];i&=~((1<<(e&31))-1);const s=r.length;for(;i===0;){if(++n===s)return t;i=~r[n]}const a=n*32+we.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new O;if(t===e)return;t--;const r=Math.floor(e/32),n=Math.floor(t/32),i=this.bits;for(let s=r;s<=n;s++){const a=s>r?0:e&31,l=(2<<(s<n?31:t&31))-(1<<a);i[s]|=l}}clear(){const e=this.bits.length,t=this.bits;for(let r=0;r<e;r++)t[r]=0}isRange(e,t,r){if(t<e||e<0||t>this.size)throw new O;if(t===e)return!0;t--;const n=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let a=n;a<=i;a++){const o=a>n?0:e&31,h=(2<<(a<i?31:t&31))-(1<<o)&4294967295;if((s[a]&h)!==(r?h:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let r=0;r<t;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new O("Sizes don't match");const t=this.bits;for(let r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]}toBytes(e,t,r,n){for(let i=0;i<n;i++){let s=0;for(let a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+i]=s}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits;for(let i=0;i<r;i++){let s=n[i];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-i]=s}if(this.size!==r*32){const i=r*32-this.size;let s=e[0]>>>i;for(let a=1;a<r;a++){const o=e[a];s|=o<<32-i,e[a-1]=s,s=o>>>i}e[r-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Te))return!1;const t=e;return this.size===t.size&&me.equals(this.bits,t.bits)}hashCode(){return 31*this.size+me.hashCode(this.bits)}toString(){let e="";for(let t=0,r=this.size;t<r;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new Te(this.size,this.bits.slice())}}var re;(function(x){x[x.OTHER=0]="OTHER",x[x.PURE_BARCODE=1]="PURE_BARCODE",x[x.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",x[x.TRY_HARDER=3]="TRY_HARDER",x[x.CHARACTER_SET=4]="CHARACTER_SET",x[x.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",x[x.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",x[x.ASSUME_GS1=7]="ASSUME_GS1",x[x.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",x[x.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",x[x.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var q=re;class v extends A{static getFormatInstance(){return new v}}v.kind="FormatException";var X;(function(x){x[x.Cp437=0]="Cp437",x[x.ISO8859_1=1]="ISO8859_1",x[x.ISO8859_2=2]="ISO8859_2",x[x.ISO8859_3=3]="ISO8859_3",x[x.ISO8859_4=4]="ISO8859_4",x[x.ISO8859_5=5]="ISO8859_5",x[x.ISO8859_6=6]="ISO8859_6",x[x.ISO8859_7=7]="ISO8859_7",x[x.ISO8859_8=8]="ISO8859_8",x[x.ISO8859_9=9]="ISO8859_9",x[x.ISO8859_10=10]="ISO8859_10",x[x.ISO8859_11=11]="ISO8859_11",x[x.ISO8859_13=12]="ISO8859_13",x[x.ISO8859_14=13]="ISO8859_14",x[x.ISO8859_15=14]="ISO8859_15",x[x.ISO8859_16=15]="ISO8859_16",x[x.SJIS=16]="SJIS",x[x.Cp1250=17]="Cp1250",x[x.Cp1251=18]="Cp1251",x[x.Cp1252=19]="Cp1252",x[x.Cp1256=20]="Cp1256",x[x.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",x[x.UTF8=22]="UTF8",x[x.ASCII=23]="ASCII",x[x.Big5=24]="Big5",x[x.GB18030=25]="GB18030",x[x.EUC_KR=26]="EUC_KR"})(X||(X={}));class R{constructor(e,t,r,...n){this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=n,R.VALUE_IDENTIFIER_TO_ECI.set(e,this),R.NAME_TO_ECI.set(r,this);const i=this.values;for(let s=0,a=i.length;s!==a;s++){const o=i[s];R.VALUES_TO_ECI.set(o,this)}for(const s of n)R.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new v("incorect value");const t=R.VALUES_TO_ECI.get(e);if(t===void 0)throw new v("incorect value");return t}static getCharacterSetECIByName(e){const t=R.NAME_TO_ECI.get(e);if(t===void 0)throw new v("incorect value");return t}equals(e){if(!(e instanceof R))return!1;const t=e;return this.getName()===t.getName()}}R.VALUE_IDENTIFIER_TO_ECI=new Map,R.VALUES_TO_ECI=new Map,R.NAME_TO_ECI=new Map,R.Cp437=new R(X.Cp437,Int32Array.from([0,2]),"Cp437"),R.ISO8859_1=new R(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),R.ISO8859_2=new R(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),R.ISO8859_3=new R(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),R.ISO8859_4=new R(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),R.ISO8859_5=new R(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),R.ISO8859_6=new R(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),R.ISO8859_7=new R(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),R.ISO8859_8=new R(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),R.ISO8859_9=new R(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),R.ISO8859_10=new R(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),R.ISO8859_11=new R(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),R.ISO8859_13=new R(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),R.ISO8859_14=new R(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),R.ISO8859_15=new R(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),R.ISO8859_16=new R(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),R.SJIS=new R(X.SJIS,20,"SJIS","Shift_JIS"),R.Cp1250=new R(X.Cp1250,21,"Cp1250","windows-1250"),R.Cp1251=new R(X.Cp1251,22,"Cp1251","windows-1251"),R.Cp1252=new R(X.Cp1252,23,"Cp1252","windows-1252"),R.Cp1256=new R(X.Cp1256,24,"Cp1256","windows-1256"),R.UnicodeBigUnmarked=new R(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),R.UTF8=new R(X.UTF8,26,"UTF8","UTF-8"),R.ASCII=new R(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),R.Big5=new R(X.Big5,28,"Big5"),R.GB18030=new R(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),R.EUC_KR=new R(X.EUC_KR,30,"EUC_KR","EUC-KR");class V extends A{}V.kind="UnsupportedOperationException";class B{static decode(e,t){const r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!B.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof R?e:R.getCharacterSetECIByName(e)}static decodeFallback(e,t){const r=this.encodingCharacterSet(t);if(B.isDecodeFallbackSupported(r)){let n="";for(let i=0,s=e.length;i<s;i++){let a=e[i].toString(16);a.length<2&&(a="0"+a),n+="%"+a}return decodeURIComponent(n)}if(r.equals(R.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new V(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(R.UTF8)||e.equals(R.ISO8859_1)||e.equals(R.ASCII)}static encodeFallback(e){const r=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let i=0;i<r.length;i++)n.push(r[i].charCodeAt(0));return new Uint8Array(n)}}class _{static castAsNonUtf8Char(e,t=null){const r=t?t.getName():this.ISO88591;return B.decode(new Uint8Array([e]),r)}static guessEncoding(e,t){if(t!=null&&t.get(q.CHARACTER_SET)!==void 0)return t.get(q.CHARACTER_SET).toString();const r=e.length;let n=!0,i=!0,s=!0,a=0,o=0,l=0,h=0,w=0,C=0,I=0,y=0,S=0,M=0,k=0;const Q=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let $=0;$<r&&(n||i||s);$++){const j=e[$]&255;s&&(a>0?j&128?a--:s=!1:j&128&&(j&64?(a++,j&32?(a++,j&16?(a++,j&8?s=!1:h++):l++):o++):s=!1)),n&&(j>127&&j<160?n=!1:j>159&&(j<192||j===215||j===247)&&k++),i&&(w>0?j<64||j===127||j>252?i=!1:w--:j===128||j===160||j>239?i=!1:j>160&&j<224?(C++,y=0,I++,I>S&&(S=I)):j>127?(w++,I=0,y++,y>M&&(M=y)):(I=0,y=0))}return s&&a>0&&(s=!1),i&&w>0&&(i=!1),s&&(Q||o+l+h>0)?_.UTF8:i&&(_.ASSUME_SHIFT_JIS||S>=3||M>=3)?_.SHIFT_JIS:n&&i?S===2&&C===2||k*10>=r?_.SHIFT_JIS:_.ISO88591:n?_.ISO88591:i?_.SHIFT_JIS:s?_.UTF8:_.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let r=-1;function n(s,a,o,l,h,w){if(s==="%%")return"%";if(t[++r]===void 0)return;s=l?parseInt(l.substr(1)):void 0;let C=h?parseInt(h.substr(1)):void 0,I;switch(w){case"s":I=t[r];break;case"c":I=t[r][0];break;case"f":I=parseFloat(t[r]).toFixed(s);break;case"p":I=parseFloat(t[r]).toPrecision(s);break;case"e":I=parseFloat(t[r]).toExponential(s);break;case"x":I=parseInt(t[r]).toString(C||16);break;case"d":I=parseFloat(parseInt(t[r],C||10).toPrecision(s)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(C);let y=parseInt(o),S=o&&o[0]+""=="0"?"0":" ";for(;I.length<y;)I=a!==void 0?I+S:S+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,n)}static getBytes(e,t){return B.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}_.SHIFT_JIS=R.SJIS.getName(),_.GB2312="GB2312",_.ISO88591=R.ISO8859_1.getName(),_.EUC_JP="EUC_JP",_.UTF8=R.UTF8.getName(),_.PLATFORM_DEFAULT_ENCODING=_.UTF8,_.ASSUME_SHIFT_JIS=!1;class H{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=_.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,r){for(let n=t;t<t+r;n++)this.append(e[n]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Y{constructor(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,t==null&&(t=e),this.height=t,e<1||t<1)throw new O("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,n==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,r=e[0].length,n=new Y(r,t);for(let i=0;i<t;i++){const s=e[i];for(let a=0;a<r;a++)s[a]&&n.set(a,i)}return n}static parseFromString(e,t,r){if(e===null)throw new O("stringRepresentation cannot be null");const n=new Array(e.length);let i=0,s=0,a=-1,o=0,l=0;for(;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(i>s){if(a===-1)a=i-s;else if(i-s!==a)throw new O("row lengths do not match");s=i,o++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,n[i]=!0,i++;else if(e.substring(l,l+r.length)===r)l+=r.length,n[i]=!1,i++;else throw new O("illegal character encountered: "+e.substring(l));if(i>s){if(a===-1)a=i-s;else if(i-s!==a)throw new O("row lengths do not match");o++}const h=new Y(a,o);for(let w=0;w<i;w++)n[w]&&h.set(Math.floor(w%a),Math.floor(w/a));return h}get(e,t){const r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0}set(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295}unset(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)}flip(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new O("input matrix dimensions do not match");const t=new Te(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,s=this.height;i<s;i++){const a=i*r,o=e.getRow(i,t).getBitArray();for(let l=0;l<r;l++)n[a+l]^=o[l]}}clear(){const e=this.bits,t=e.length;for(let r=0;r<t;r++)e[r]=0}setRegion(e,t,r,n){if(t<0||e<0)throw new O("Left and top must be nonnegative");if(n<1||r<1)throw new O("Height and width must be at least 1");const i=e+r,s=t+n;if(s>this.height||i>this.width)throw new O("The region must fit inside the matrix");const a=this.rowSize,o=this.bits;for(let l=t;l<s;l++){const h=l*a;for(let w=e;w<i;w++)o[h+Math.floor(w/32)]|=1<<(w&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new Te(this.width):t.clear();const r=this.rowSize,n=this.bits,i=e*r;for(let s=0;s<r;s++)t.setBulk(s*32,n[i+s]);return t}setRow(e,t){le.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let r=new Te(e),n=new Te(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)r=this.getRow(i,r),n=this.getRow(t-1-i,n),r.reverse(),n.reverse(),this.setRow(i,n),this.setRow(t-1-i,r)}getEnclosingRectangle(){const e=this.width,t=this.height,r=this.rowSize,n=this.bits;let i=e,s=t,a=-1,o=-1;for(let l=0;l<t;l++)for(let h=0;h<r;h++){const w=n[l*r+h];if(w!==0){if(l<s&&(s=l),l>o&&(o=l),h*32<i){let C=0;for(;!(w<<31-C&4294967295);)C++;h*32+C<i&&(i=h*32+C)}if(h*32+31>a){let C=31;for(;!(w>>>C);)C--;h*32+C>a&&(a=h*32+C)}}}return a<i||o<s?null:Int32Array.from([i,s,a-i+1,o-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let r=0;for(;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;const n=r/e;let i=r%e*32;const s=t[r];let a=0;for(;!(s<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,n])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let r=t.length-1;for(;r>=0&&t[r]===0;)r--;if(r<0)return null;const n=Math.floor(r/e);let i=Math.floor(r%e)*32;const s=t[r];let a=31;for(;!(s>>>a);)a--;return i+=a,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Y))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&me.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+me.hashCode(this.bits),e}toString(e="X ",t="  ",r=`
`){return this.buildToString(e,t,r)}buildToString(e,t,r){let n=new H;for(let i=0,s=this.height;i<s;i++){for(let a=0,o=this.width;a<o;a++)n.append(this.get(a,i)?e:t);n.append(r)}return n.toString()}clone(){return new Y(this.width,this.height,this.rowSize,this.bits.slice())}}class T extends A{static getNotFoundInstance(){return new T}}T.kind="NotFoundException";class he extends oe{constructor(e){super(e),this.luminances=he.EMPTY,this.buckets=new Int32Array(he.LUMINANCE_BUCKETS)}getBlackRow(e,t){const r=this.getLuminanceSource(),n=r.getWidth();t==null||t.getSize()<n?t=new Te(n):t.clear(),this.initArrays(n);const i=r.getRow(e,this.luminances),s=this.buckets;for(let o=0;o<n;o++)s[(i[o]&255)>>he.LUMINANCE_SHIFT]++;const a=he.estimateBlackPoint(s);if(n<3)for(let o=0;o<n;o++)(i[o]&255)<a&&t.set(o);else{let o=i[0]&255,l=i[1]&255;for(let h=1;h<n-1;h++){const w=i[h+1]&255;(l*4-o-w)/2<a&&t.set(h),o=l,l=w}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),n=new Y(t,r);this.initArrays(t);const i=this.buckets;for(let o=1;o<5;o++){const l=Math.floor(r*o/5),h=e.getRow(l,this.luminances),w=Math.floor(t*4/5);for(let C=Math.floor(t/5);C<w;C++){const I=h[C]&255;i[I>>he.LUMINANCE_SHIFT]++}}const s=he.estimateBlackPoint(i),a=e.getMatrix();for(let o=0;o<r;o++){const l=o*t;for(let h=0;h<t;h++)(a[l+h]&255)<s&&n.set(h,o)}return n}createBinarizer(e){return new he(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let r=0;r<he.LUMINANCE_BUCKETS;r++)t[r]=0}static estimateBlackPoint(e){const t=e.length;let r=0,n=0,i=0;for(let h=0;h<t;h++)e[h]>i&&(n=h,i=e[h]),e[h]>r&&(r=e[h]);let s=0,a=0;for(let h=0;h<t;h++){const w=h-n,C=e[h]*w*w;C>a&&(s=h,a=C)}if(n>s){const h=n;n=s,s=h}if(s-n<=t/16)throw new T;let o=s-1,l=-1;for(let h=s-1;h>n;h--){const w=h-n,C=w*w*(s-h)*(r-e[h]);C>l&&(o=h,l=C)}return o<<he.LUMINANCE_SHIFT}}he.LUMINANCE_BITS=5,he.LUMINANCE_SHIFT=8-he.LUMINANCE_BITS,he.LUMINANCE_BUCKETS=1<<he.LUMINANCE_BITS,he.EMPTY=Uint8ClampedArray.from([0]);class te extends he{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=te.MINIMUM_DIMENSION&&r>=te.MINIMUM_DIMENSION){const n=e.getMatrix();let i=t>>te.BLOCK_SIZE_POWER;t&te.BLOCK_SIZE_MASK&&i++;let s=r>>te.BLOCK_SIZE_POWER;r&te.BLOCK_SIZE_MASK&&s++;const a=te.calculateBlackPoints(n,i,s,t,r),o=new Y(t,r);te.calculateThresholdForBlock(n,i,s,t,r,a,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new te(e)}static calculateThresholdForBlock(e,t,r,n,i,s,a){const o=i-te.BLOCK_SIZE,l=n-te.BLOCK_SIZE;for(let h=0;h<r;h++){let w=h<<te.BLOCK_SIZE_POWER;w>o&&(w=o);const C=te.cap(h,2,r-3);for(let I=0;I<t;I++){let y=I<<te.BLOCK_SIZE_POWER;y>l&&(y=l);const S=te.cap(I,2,t-3);let M=0;for(let Q=-2;Q<=2;Q++){const $=s[C+Q];M+=$[S-2]+$[S-1]+$[S]+$[S+1]+$[S+2]}const k=M/25;te.thresholdBlock(e,y,w,k,n,a)}}}static cap(e,t,r){return e<t?t:e>r?r:e}static thresholdBlock(e,t,r,n,i,s){for(let a=0,o=r*i+t;a<te.BLOCK_SIZE;a++,o+=i)for(let l=0;l<te.BLOCK_SIZE;l++)(e[o+l]&255)<=n&&s.set(t+l,r+a)}static calculateBlackPoints(e,t,r,n,i){const s=i-te.BLOCK_SIZE,a=n-te.BLOCK_SIZE,o=new Array(r);for(let l=0;l<r;l++){o[l]=new Int32Array(t);let h=l<<te.BLOCK_SIZE_POWER;h>s&&(h=s);for(let w=0;w<t;w++){let C=w<<te.BLOCK_SIZE_POWER;C>a&&(C=a);let I=0,y=255,S=0;for(let k=0,Q=h*n+C;k<te.BLOCK_SIZE;k++,Q+=n){for(let $=0;$<te.BLOCK_SIZE;$++){const j=e[Q+$]&255;I+=j,j<y&&(y=j),j>S&&(S=j)}if(S-y>te.MIN_DYNAMIC_RANGE)for(k++,Q+=n;k<te.BLOCK_SIZE;k++,Q+=n)for(let $=0;$<te.BLOCK_SIZE;$++)I+=e[Q+$]&255}let M=I>>te.BLOCK_SIZE_POWER*2;if(S-y<=te.MIN_DYNAMIC_RANGE&&(M=y/2,l>0&&w>0)){const k=(o[l-1][w]+2*o[l][w-1]+o[l-1][w-1])/4;y<k&&(M=k)}o[l][w]=M}}return o}}te.BLOCK_SIZE_POWER=3,te.BLOCK_SIZE=1<<te.BLOCK_SIZE_POWER,te.BLOCK_SIZE_MASK=te.BLOCK_SIZE-1,te.MINIMUM_DIMENSION=te.BLOCK_SIZE*5,te.MIN_DYNAMIC_RANGE=24;class Re{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,r,n){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new H;for(let r=0;r<this.height;r++){const n=this.getRow(r,e);for(let i=0;i<this.width;i++){const s=n[i]&255;let a;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()}}class Fe extends Re{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const r=this.delegate.getRow(e,t),n=this.getWidth();for(let i=0;i<n;i++)r[i]=255-(r[i]&255);return r}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t);for(let n=0;n<t;n++)r[n]=255-(e[n]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,r,n){return new Fe(this.delegate.crop(e,t,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Fe(this.delegate.rotateCounterClockwise45())}}class Ze extends Re{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ze.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ze.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,r){const n=new Uint8ClampedArray(t*r);for(let i=0,s=0,a=e.length;i<a;i+=4,s++){let o;if(e[i+3]===0)o=255;else{const h=e[i],w=e[i+1],C=e[i+2];o=306*h+601*w+117*C+512>>10}n[s]=o}return n}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const r=this.getWidth(),n=e*r;return t===null?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,r,n){return super.crop(e,t,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),r=t.getContext("2d"),n=e*Ze.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*s),o=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*s);return t.width=a,t.height=o,r.translate(a/2,o/2),r.rotate(n),r.drawImage(this.canvas,i/-2,s/-2),this.buffer=Ze.makeBufferFromCanvasImageData(t),this}invert(){return new Fe(this)}}Ze.DEGREE_TO_RADIANS=Math.PI/180;class Dt{constructor(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ze=(globalThis||Vr||self||window||void 0)&&(globalThis||Vr||self||window||void 0).__awaiter||function(x,e,t,r){function n(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(h){try{l(r.next(h))}catch(w){s(w)}}function o(h){try{l(r.throw(h))}catch(w){s(w)}}function l(h){h.done?i(h.value):n(h.value).then(a,o)}l((r=r.apply(x,e||[])).next())})};class At{constructor(e,t=500,r){this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return ze(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const r of e){const n=r.kind==="video"?"videoinput":r.kind;if(n!=="videoinput")continue;const i=r.deviceId||r.id,s=r.label||`Video device ${t.length+1}`,a=r.groupId,o={deviceId:i,label:s,kind:n,groupId:a};t.push(o)}return t})}getVideoInputDevices(){return ze(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Dt(t.deviceId,t.label))})}findDeviceById(e){return ze(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(r=>r.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return ze(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return ze(this,void 0,void 0,function*(){this.reset();let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,t)})}decodeOnceFromConstraints(e,t){return ze(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,t)})}decodeOnceFromStream(e,t){return ze(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,t,r){return ze(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,r)})}decodeFromVideoDevice(e,t,r){return ze(this,void 0,void 0,function*(){let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const i={video:n};return yield this.decodeFromConstraints(i,t,r)})}decodeFromConstraints(e,t,r){return ze(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(n,t,r)})}decodeFromStream(e,t,r){return ze(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return ze(this,void 0,void 0,function*(){const r=this.prepareVideoElement(t);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((t,r)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return ze(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const r=document.getElementById(e);if(!r)throw new D(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new D(`element with id '${e}' must be an ${t} element`);return r}decodeFromImage(e,t){if(!e&&!t)throw new D("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new D("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,r){if(e===void 0&&t===void 0)throw new D("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new D("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)}_decodeFromVideoElementSetup(e){if(!e)throw new D("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new D("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const r=this._decodeOnLoadImage(t);return t.src=e,r}decodeFromVideoUrl(e){if(!e)throw new D("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r}decodeFromVideoUrlContinuously(e,t){if(!e)throw new D("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n}_decodeOnLoadImage(e){return new Promise((t,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return ze(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return ze(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,r=!0){this._stopAsyncDecode=!1;const n=(i,s)=>{if(this._stopAsyncDecode){s(new T("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const a=this.decode(e);i(a)}catch(a){const o=t&&a instanceof T,h=(a instanceof J||a instanceof v)&&r;if(o||h)return setTimeout(n,this._timeBetweenDecodingAttempts,i,s);s(a)}};return new Promise((i,s)=>n(i,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const n=this.decode(e);t(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(n){t(null,n);const i=n instanceof J||n instanceof v,s=n instanceof T;(i||s)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,r){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,r=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),r=new Ze(t),n=new te(r);return new ne(n)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let r,n;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=n+"px",t.width=r,t.height=n,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class $e{constructor(e,t,r=t==null?0:8*t.length,n,i,s=le.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=n,this.format=i,this.resultMetadata=null,s==null?this.timestamp=le.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const r=new Array(t.length+e.length);le.arraycopy(t,0,r,0,t.length),le.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Nr;(function(x){x[x.AZTEC=0]="AZTEC",x[x.CODABAR=1]="CODABAR",x[x.CODE_39=2]="CODE_39",x[x.CODE_93=3]="CODE_93",x[x.CODE_128=4]="CODE_128",x[x.DATA_MATRIX=5]="DATA_MATRIX",x[x.EAN_8=6]="EAN_8",x[x.EAN_13=7]="EAN_13",x[x.ITF=8]="ITF",x[x.MAXICODE=9]="MAXICODE",x[x.PDF_417=10]="PDF_417",x[x.QR_CODE=11]="QR_CODE",x[x.RSS_14=12]="RSS_14",x[x.RSS_EXPANDED=13]="RSS_EXPANDED",x[x.UPC_A=14]="UPC_A",x[x.UPC_E=15]="UPC_E",x[x.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Nr||(Nr={}));var ue=Nr,Rr;(function(x){x[x.OTHER=0]="OTHER",x[x.ORIENTATION=1]="ORIENTATION",x[x.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",x[x.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",x[x.ISSUE_NUMBER=4]="ISSUE_NUMBER",x[x.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",x[x.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",x[x.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",x[x.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",x[x.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",x[x.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Rr||(Rr={}));var U=Rr;class W{constructor(e,t,r,n,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class F{exp(e){return this.expTable[e]}log(e){if(e===0)throw new O;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class G{constructor(e,t){if(t.length===0)throw new O;this.field=e;const r=t.length;if(r>1&&t[0]===0){let n=1;for(;n<r&&t[n]===0;)n++;n===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-n),le.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let r;if(e===1){r=0;for(let s=0,a=t.length;s!==a;s++){const o=t[s];r=F.addOrSubtract(r,o)}return r}r=t[0];const n=t.length,i=this.field;for(let s=1;s<n;s++)r=F.addOrSubtract(i.multiply(e,r),t[s]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){const s=t;t=r,r=s}let n=new Int32Array(r.length);const i=r.length-t.length;le.arraycopy(r,0,n,0,i);for(let s=i;s<r.length;s++)n[s]=F.addOrSubtract(t[s-i],r[s]);return new G(this.field,n)}multiply(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,s=new Int32Array(r+i-1),a=this.field;for(let o=0;o<r;o++){const l=t[o];for(let h=0;h<i;h++)s[o+h]=F.addOrSubtract(s[o+h],a.multiply(l,n[h]))}return new G(a,s)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,r=this.field,n=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)n[s]=r.multiply(i[s],e);return new G(r,n)}multiplyByMonomial(e,t){if(e<0)throw new O;if(t===0)return this.field.getZero();const r=this.coefficients,n=r.length,i=new Int32Array(n+e),s=this.field;for(let a=0;a<n;a++)i[a]=s.multiply(r[a],t);return new G(s,i)}divide(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new O("Divide by 0");const t=this.field;let r=t.getZero(),n=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;n.getDegree()>=e.getDegree()&&!n.isZero();){const a=n.getDegree()-e.getDegree(),o=t.multiply(n.getCoefficient(n.getDegree()),s),l=e.multiplyByMonomial(a,o),h=t.buildMonomial(a,o);r=r.addOrSubtract(h),n=n.addOrSubtract(l)}return[r,n]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){const n=this.field.log(r);n===0?e+="1":n===1?e+="a":(e+="a^",e+=n)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class z extends A{}z.kind="ArithmeticException";class K extends F{constructor(e,t,r){super(),this.primitive=e,this.size=t,this.generatorBase=r;const n=new Int32Array(t);let i=1;for(let a=0;a<t;a++)n[a]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=n;const s=new Int32Array(t);for(let a=0;a<t-1;a++)s[n[a]]=a;this.logTable=s,this.zero=new G(this,Int32Array.from([0])),this.one=new G(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new O;if(t===0)return this.zero;const r=new Int32Array(e+1);return r[0]=t,new G(this,r)}inverse(e){if(e===0)throw new z;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+we.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}K.AZTEC_DATA_12=new K(4201,4096,1),K.AZTEC_DATA_10=new K(1033,1024,1),K.AZTEC_DATA_6=new K(67,64,1),K.AZTEC_PARAM=new K(19,16,1),K.QR_CODE_FIELD_256=new K(285,256,0),K.DATA_MATRIX_FIELD_256=new K(301,256,1),K.AZTEC_DATA_8=K.DATA_MATRIX_FIELD_256,K.MAXICODE_FIELD_64=K.AZTEC_DATA_6;class ge extends A{}ge.kind="ReedSolomonException";class fe extends A{}fe.kind="IllegalStateException";class Me{constructor(e){this.field=e}decode(e,t){const r=this.field,n=new G(r,e),i=new Int32Array(t);let s=!0;for(let I=0;I<t;I++){const y=n.evaluateAt(r.exp(I+r.getGeneratorBase()));i[i.length-1-I]=y,y!==0&&(s=!1)}if(s)return;const a=new G(r,i),o=this.runEuclideanAlgorithm(r.buildMonomial(t,1),a,t),l=o[0],h=o[1],w=this.findErrorLocations(l),C=this.findErrorMagnitudes(h,w);for(let I=0;I<w.length;I++){const y=e.length-1-r.log(w[I]);if(y<0)throw new ge("Bad error location");e[y]=K.addOrSubtract(e[y],C[I])}}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){const I=e;e=t,t=I}const n=this.field;let i=e,s=t,a=n.getZero(),o=n.getOne();for(;s.getDegree()>=(r/2|0);){let I=i,y=a;if(i=s,a=o,i.isZero())throw new ge("r_{i-1} was zero");s=I;let S=n.getZero();const M=i.getCoefficient(i.getDegree()),k=n.inverse(M);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const Q=s.getDegree()-i.getDegree(),$=n.multiply(s.getCoefficient(s.getDegree()),k);S=S.addOrSubtract(n.buildMonomial(Q,$)),s=s.addOrSubtract(i.multiplyByMonomial(Q,$))}if(o=S.multiply(a).addOrSubtract(y),s.getDegree()>=i.getDegree())throw new fe("Division algorithm failed to reduce polynomial?")}const l=o.getCoefficient(0);if(l===0)throw new ge("sigmaTilde(0) was zero");const h=n.inverse(l),w=o.multiplyScalar(h),C=s.multiplyScalar(h);return[w,C]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(t);let n=0;const i=this.field;for(let s=1;s<i.getSize()&&n<t;s++)e.evaluateAt(s)===0&&(r[n]=i.inverse(s),n++);if(n!==t)throw new ge("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,t){const r=t.length,n=new Int32Array(r),i=this.field;for(let s=0;s<r;s++){const a=i.inverse(t[s]);let o=1;for(let l=0;l<r;l++)if(s!==l){const h=i.multiply(t[l],a),w=h&1?h&-2:h|1;o=i.multiply(o,w)}n[s]=i.multiply(e.evaluateAt(a),i.inverse(o)),i.getGeneratorBase()!==0&&(n[s]=i.multiply(n[s],a))}return n}}var ye;(function(x){x[x.UPPER=0]="UPPER",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.DIGIT=3]="DIGIT",x[x.PUNCT=4]="PUNCT",x[x.BINARY=5]="BINARY"})(ye||(ye={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),r=this.extractBits(t),n=this.correctBits(r),i=ie.convertBoolArrayToByteArray(n),s=ie.getEncodedData(n),a=new W(i,s,null,null);return a.setNumBits(n.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,r=ye.UPPER,n=ye.UPPER,i="",s=0;for(;s<t;)if(n===ye.BINARY){if(t-s<5)break;let a=ie.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=ie.readCode(e,s,11)+31,s+=11}for(let o=0;o<a;o++){if(t-s<8){s=t;break}const l=ie.readCode(e,s,8);i+=_.castAsNonUtf8Char(l),s+=8}n=r}else{let a=n===ye.DIGIT?4:5;if(t-s<a)break;let o=ie.readCode(e,s,a);s+=a;let l=ie.getCharacter(n,o);l.startsWith("CTRL_")?(r=n,n=ie.getTable(l.charAt(5)),l.charAt(6)==="L"&&(r=n)):(i+=l,n=r)}return i}static getTable(e){switch(e){case"L":return ye.LOWER;case"P":return ye.PUNCT;case"M":return ye.MIXED;case"D":return ye.DIGIT;case"B":return ye.BINARY;case"U":default:return ye.UPPER}}static getCharacter(e,t){switch(e){case ye.UPPER:return ie.UPPER_TABLE[t];case ye.LOWER:return ie.LOWER_TABLE[t];case ye.MIXED:return ie.MIXED_TABLE[t];case ye.PUNCT:return ie.PUNCT_TABLE[t];case ye.DIGIT:return ie.DIGIT_TABLE[t];default:throw new fe("Bad table")}}correctBits(e){let t,r;this.ddata.getNbLayers()<=2?(r=6,t=K.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=K.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=K.AZTEC_DATA_10):(r=12,t=K.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=e.length/r;if(i<n)throw new v;let s=e.length%r,a=new Int32Array(i);for(let C=0;C<i;C++,s+=r)a[C]=ie.readCode(e,s,r);try{new Me(t).decode(a,i-n)}catch(C){throw new v(C)}let o=(1<<r)-1,l=0;for(let C=0;C<n;C++){let I=a[C];if(I===0||I===o)throw new v;(I===1||I===o-1)&&l++}let h=new Array(n*r-l),w=0;for(let C=0;C<n;C++){let I=a[C];if(I===1||I===o-1)h.fill(I>1,w,w+r-1),w+=r-1;else for(let y=r-1;y>=0;--y)h[w++]=(I&1<<y)!==0}return h}extractBits(e){let t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+r*4,i=new Int32Array(n),s=new Array(this.totalBitsInLayer(r,t));if(t)for(let a=0;a<i.length;a++)i[a]=a;else{let a=n+1+2*we.truncDivision(we.truncDivision(n,2)-1,15),o=n/2,l=we.truncDivision(a,2);for(let h=0;h<o;h++){let w=h+we.truncDivision(h,15);i[o-h-1]=l-w-1,i[o+h]=l+w+1}}for(let a=0,o=0;a<r;a++){let l=(r-a)*4+(t?9:12),h=a*2,w=n-1-h;for(let C=0;C<l;C++){let I=C*2;for(let y=0;y<2;y++)s[o+I+y]=e.get(i[h+y],i[h+C]),s[o+2*l+I+y]=e.get(i[h+C],i[w-y]),s[o+4*l+I+y]=e.get(i[w-y],i[w-C]),s[o+6*l+I+y]=e.get(i[w-C],i[h+y])}o+=l*8}return s}static readCode(e,t,r){let n=0;for(let i=t;i<t+r;i++)n<<=1,e[i]&&(n|=1);return n}static readByte(e,t){let r=e.length-t;return r>=8?ie.readCode(e,t,8):ie.readCode(e,t,r)<<8-r}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let r=0;r<t.length;r++)t[r]=ie.readByte(e,8*r);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ce{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,r,n){const i=e-r,s=t-n;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let r=0,n=e.length;r!==n;r++){const i=e[r];t+=i}return t}}class Et{static floatToIntBits(e){return e}}Et.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ce){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*Et.floatToIntBits(this.x)+Et.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),n=this.distance(e[0],e[2]);let i,s,a;if(r>=t&&r>=n?(s=e[0],i=e[1],a=e[2]):n>=r&&n>=t?(s=e[1],i=e[0],a=e[2]):(s=e[2],i=e[0],a=e[1]),this.crossProductZ(i,s,a)<0){const o=i;i=a,a=o}e[0]=i,e[1]=s,e[2]=a}static distance(e,t){return Ce.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,r){const n=t.x,i=t.y;return(r.x-n)*(e.y-i)-(r.y-i)*(e.x-n)}}class cr{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Or extends cr{constructor(e,t,r,n,i){super(e,t),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Mt{constructor(e,t,r,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Mt.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),n==null&&(n=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new T}detect(){let e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,i=!1,s=!0,a=!1,o=!1,l=!1,h=!1,w=!1;const C=this.width,I=this.height;for(;s;){s=!1;let y=!0;for(;(y||!o)&&t<C;)y=this.containsBlackPoint(r,n,t,!1),y?(t++,s=!0,o=!0):o||t++;if(t>=C){i=!0;break}let S=!0;for(;(S||!l)&&n<I;)S=this.containsBlackPoint(e,t,n,!0),S?(n++,s=!0,l=!0):l||n++;if(n>=I){i=!0;break}let M=!0;for(;(M||!h)&&e>=0;)M=this.containsBlackPoint(r,n,e,!1),M?(e--,s=!0,h=!0):h||e--;if(e<0){i=!0;break}let k=!0;for(;(k||!w)&&r>=0;)k=this.containsBlackPoint(e,t,r,!0),k?(r--,s=!0,w=!0):w||r--;if(r<0){i=!0;break}s&&(a=!0)}if(!i&&a){const y=t-e;let S=null;for(let $=1;S===null&&$<y;$++)S=this.getBlackPointOnSegment(e,n-$,e+$,n);if(S==null)throw new T;let M=null;for(let $=1;M===null&&$<y;$++)M=this.getBlackPointOnSegment(e,r+$,e+$,r);if(M==null)throw new T;let k=null;for(let $=1;k===null&&$<y;$++)k=this.getBlackPointOnSegment(t,r+$,t-$,r);if(k==null)throw new T;let Q=null;for(let $=1;Q===null&&$<y;$++)Q=this.getBlackPointOnSegment(t,n-$,t-$,n);if(Q==null)throw new T;return this.centerEdges(Q,S,k,M)}else throw new T}getBlackPointOnSegment(e,t,r,n){const i=Ce.round(Ce.distance(e,t,r,n)),s=(r-e)/i,a=(n-t)/i,o=this.image;for(let l=0;l<i;l++){const h=Ce.round(e+l*s),w=Ce.round(t+l*a);if(o.get(h,w))return new ce(h,w)}return null}centerEdges(e,t,r,n){const i=e.getX(),s=e.getY(),a=t.getX(),o=t.getY(),l=r.getX(),h=r.getY(),w=n.getX(),C=n.getY(),I=Mt.CORR;return i<this.width/2?[new ce(w-I,C+I),new ce(a+I,o+I),new ce(l-I,h-I),new ce(i+I,s-I)]:[new ce(w+I,C+I),new ce(a+I,o-I),new ce(l-I,h+I),new ce(i-I,s-I)]}containsBlackPoint(e,t,r,n){const i=this.image;if(n){for(let s=e;s<=t;s++)if(i.get(s,r))return!0}else for(let s=e;s<=t;s++)if(i.get(r,s))return!0;return!1}}Mt.INIT_SIZE=10,Mt.CORR=1;class tr{static checkAndNudgePoints(e,t){const r=e.getWidth(),n=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const a=Math.floor(t[s]),o=Math.floor(t[s+1]);if(a<-1||a>r||o<-1||o>n)throw new T;i=!1,a===-1?(t[s]=0,i=!0):a===r&&(t[s]=r-1,i=!0),o===-1?(t[s+1]=0,i=!0):o===n&&(t[s+1]=n-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const a=Math.floor(t[s]),o=Math.floor(t[s+1]);if(a<-1||a>r||o<-1||o>n)throw new T;i=!1,a===-1?(t[s]=0,i=!0):a===r&&(t[s]=r-1,i=!0),o===-1?(t[s+1]=0,i=!0):o===n&&(t[s+1]=n-1,i=!0)}}}class Gt{constructor(e,t,r,n,i,s,a,o,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=i,this.a32=s,this.a13=a,this.a23=o,this.a33=l}static quadrilateralToQuadrilateral(e,t,r,n,i,s,a,o,l,h,w,C,I,y,S,M){const k=Gt.quadrilateralToSquare(e,t,r,n,i,s,a,o);return Gt.squareToQuadrilateral(l,h,w,C,I,y,S,M).times(k)}transformPoints(e){const t=e.length,r=this.a11,n=this.a12,i=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,h=this.a32,w=this.a33;for(let C=0;C<t;C+=2){const I=e[C],y=e[C+1],S=i*I+o*y+w;e[C]=(r*I+s*y+l)/S,e[C+1]=(n*I+a*y+h)/S}}transformPointsWithValues(e,t){const r=this.a11,n=this.a12,i=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,h=this.a32,w=this.a33,C=e.length;for(let I=0;I<C;I++){const y=e[I],S=t[I],M=i*y+o*S+w;e[I]=(r*y+s*S+l)/M,t[I]=(n*y+a*S+h)/M}}static squareToQuadrilateral(e,t,r,n,i,s,a,o){const l=e-r+i-a,h=t-n+s-o;if(l===0&&h===0)return new Gt(r-e,i-r,e,n-t,s-n,t,0,0,1);{const w=r-i,C=a-i,I=n-s,y=o-s,S=w*y-C*I,M=(l*y-C*h)/S,k=(w*h-l*I)/S;return new Gt(r-e+M*r,a-e+k*a,e,n-t+M*n,o-t+k*o,t,M,k,1)}}static quadrilateralToSquare(e,t,r,n,i,s,a,o){return Gt.squareToQuadrilateral(e,t,r,n,i,s,a,o).buildAdjoint()}buildAdjoint(){return new Gt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Gt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class kn extends tr{sampleGrid(e,t,r,n,i,s,a,o,l,h,w,C,I,y,S,M,k,Q,$){const j=Gt.quadrilateralToQuadrilateral(n,i,s,a,o,l,h,w,C,I,y,S,M,k,Q,$);return this.sampleGridWithTransform(e,t,r,j)}sampleGridWithTransform(e,t,r,n){if(t<=0||r<=0)throw new T;const i=new Y(t,r),s=new Float32Array(2*t);for(let a=0;a<r;a++){const o=s.length,l=a+.5;for(let h=0;h<o;h+=2)s[h]=h/2+.5,s[h+1]=l;n.transformPoints(s),tr.checkAndNudgePoints(e,s);try{for(let h=0;h<o;h+=2)e.get(Math.floor(s[h]),Math.floor(s[h+1]))&&i.set(h/2,a)}catch{throw new T}}return i}}class rr{static setGridSampler(e){rr.gridSampler=e}static getInstance(){return rr.gridSampler}}rr.gridSampler=new kn;class _t{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Fn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){let s=r[0];r[0]=r[2],r[2]=s}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new Or(n,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new T;let t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);let n=0;for(let s=0;s<4;s++){let a=r[(this.shift+s)%4];this.compact?(n<<=7,n+=a>>1&127):(n<<=10,n+=(a>>2&992)+(a>>1&31))}let i=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let r=0;e.forEach((n,i,s)=>{let a=(n>>t-2<<1)+(n&1);r=(r<<3)+a}),r=((r&1)<<11)+(r>>1);for(let n=0;n<4;n++)if(we.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new T}getCorrectedParameterData(e,t){let r,n;t?(r=7,n=2):(r=10,n=4);let i=r-n,s=new Int32Array(r);for(let o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{new Me(K.AZTEC_PARAM).decode(s,i)}catch{throw new T}let a=0;for(let o=0;o<n;o++)a=(a<<4)+s[o];return a}getBullsEyeCorners(e){let t=e,r=e,n=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let w=this.getFirstDifferent(t,s,1,-1),C=this.getFirstDifferent(r,s,1,1),I=this.getFirstDifferent(n,s,-1,1),y=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let S=this.distancePoint(y,w)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(S<.75||S>1.25||!this.isWhiteOrBlackRectangle(w,C,I,y))break}t=w,r=C,n=I,i=y,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new T;this.compact=this.nbCenterLayers===5;let a=new ce(t.getX()+.5,t.getY()-.5),o=new ce(r.getX()+.5,r.getY()+.5),l=new ce(n.getX()-.5,n.getY()+.5),h=new ce(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,o,l,h],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,r,n;try{let a=new Mt(this.image).detect();e=a[0],t=a[1],r=a[2],n=a[3]}catch{let o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new _t(o+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new _t(o+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new _t(o-7,l+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new _t(o-7,l-7),!1,-1,-1).toResultPoint()}let i=Ce.round((e.getX()+n.getX()+t.getX()+r.getX())/4),s=Ce.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{let a=new Mt(this.image,15,i,s).detect();e=a[0],t=a[1],r=a[2],n=a[3]}catch{e=this.getFirstDifferent(new _t(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new _t(i+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new _t(i-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new _t(i-7,s-7),!1,-1,-1).toResultPoint()}return i=Ce.round((e.getX()+n.getX()+t.getX()+r.getX())/4),s=Ce.round((e.getY()+n.getY()+t.getY()+r.getY())/4),new _t(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,r,n,i){let s=rr.getInstance(),a=this.getDimension(),o=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,o,o,l,o,l,l,o,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(e,t,r){let n=0,i=this.distanceResultPoint(e,t),s=i/r,a=e.getX(),o=e.getY(),l=s*(t.getX()-e.getX())/i,h=s*(t.getY()-e.getY())/i;for(let w=0;w<r;w++)this.image.get(Ce.round(a+w*l),Ce.round(o+w*h))&&(n|=1<<r-w-1);return n}isWhiteOrBlackRectangle(e,t,r,n){let i=3;e=new _t(e.getX()-i,e.getY()+i),t=new _t(t.getX()-i,t.getY()-i),r=new _t(r.getX()+i,r.getY()-i),n=new _t(n.getX()+i,n.getY()+i);let s=this.getColor(n,e);if(s===0)return!1;let a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,n),a===s)}getColor(e,t){let r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,i=(t.getY()-e.getY())/r,s=0,a=e.getX(),o=e.getY(),l=this.image.get(e.getX(),e.getY()),h=Math.ceil(r);for(let C=0;C<h;C++)a+=n,o+=i,this.image.get(Ce.round(a),Ce.round(o))!==l&&s++;let w=s/r;return w>.1&&w<.9?0:w<=.1===l?1:-1}getFirstDifferent(e,t,r,n){let i=e.getX()+r,s=e.getY()+n;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=r,s+=n;for(i-=r,s-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=r;for(i-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=n;return s-=n,new _t(i,s)}expandSquare(e,t,r){let n=r/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,l=new ce(a+n*i,o+n*s),h=new ce(a-n*i,o-n*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,o=(e[1].getY()+e[3].getY())/2;let w=new ce(a+n*i,o+n*s),C=new ce(a-n*i,o-n*s);return[l,w,h,C]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=Ce.round(e.getX()),r=Ce.round(e.getY());return this.isValid(t,r)}distancePoint(e,t){return Ce.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return Ce.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(we.truncDivision(this.nbLayers-4,8)+1)+15}}class Wr{decode(e,t=null){let r=null,n=new Fn(e.getBlackMatrix()),i=null,s=null;try{let h=n.detectMirror(!1);i=h.getPoints(),this.reportFoundResultPoints(t,i),s=new ie().decode(h)}catch(h){r=h}if(s==null)try{let h=n.detectMirror(!0);i=h.getPoints(),this.reportFoundResultPoints(t,i),s=new ie().decode(h)}catch(h){throw r??h}let a=new $e(s.getText(),s.getRawBytes(),s.getNumBits(),i,ue.AZTEC,le.currentTimeMillis()),o=s.getByteSegments();o!=null&&a.putMetadata(U.BYTE_SEGMENTS,o);let l=s.getECLevel();return l!=null&&a.putMetadata(U.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(e!=null){let r=e.get(q.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach((n,i,s)=>{r.foundPossibleResultPoint(n)})}}reset(){}}class vi extends At{constructor(e=500){super(new Wr,e)}}class it{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(q.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),s=this.doDecode(i,t),a=s.getResultMetadata();let o=270;a!==null&&a.get(U.ORIENTATION)===!0&&(o=o+a.get(U.ORIENTATION)%360),s.putMetadata(U.ORIENTATION,o);const l=s.getResultPoints();if(l!==null){const h=i.getHeight();for(let w=0;w<l.length;w++)l[w]=new ce(h-l[w].getY()-1,l[w].getX())}return s}else throw new T}}reset(){}doDecode(e,t){const r=e.getWidth(),n=e.getHeight();let i=new Te(r);const s=t&&t.get(q.TRY_HARDER)===!0,a=Math.max(1,n>>(s?8:5));let o;s?o=n:o=15;const l=Math.trunc(n/2);for(let h=0;h<o;h++){const w=Math.trunc((h+1)/2),C=(h&1)===0,I=l+a*(C?w:-w);if(I<0||I>=n)break;try{i=e.getBlackRow(I,i)}catch{continue}for(let y=0;y<2;y++){if(y===1&&(i.reverse(),t&&t.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const S=new Map;t.forEach((M,k)=>S.set(k,M)),S.delete(q.NEED_RESULT_POINT_CALLBACK),t=S}try{const S=this.decodeRow(I,i,t);if(y===1){S.putMetadata(U.ORIENTATION,180);const M=S.getResultPoints();M!==null&&(M[0]=new ce(r-M[0].getX()-1,M[0].getY()),M[1]=new ce(r-M[1].getX()-1,M[1].getY()))}return S}catch{}}}throw new T}static recordPattern(e,t,r){const n=r.length;for(let l=0;l<n;l++)r[l]=0;const i=e.getSize();if(t>=i)throw new T;let s=!e.get(t),a=0,o=t;for(;o<i;){if(e.get(o)!==s)r[a]++;else{if(++a===n)break;r[a]=1,s=!s}o++}if(!(a===n||a===n-1&&o===i))throw new T}static recordPatternInReverse(e,t,r){let n=r.length,i=e.get(t);for(;t>0&&n>=0;)e.get(--t)!==i&&(n--,i=!i);if(n>=0)throw new T;it.recordPattern(e,t+1,r)}static patternMatchVariance(e,t,r){const n=e.length;let i=0,s=0;for(let l=0;l<n;l++)i+=e[l],s+=t[l];if(i<s)return Number.POSITIVE_INFINITY;const a=i/s;r*=a;let o=0;for(let l=0;l<n;l++){const h=e[l],w=t[l]*a,C=h>w?h-w:w-h;if(C>r)return Number.POSITIVE_INFINITY;o+=C}return o/i}}class ee extends it{static findStartPattern(e){const t=e.getSize(),r=e.getNextSet(0);let n=0,i=Int32Array.from([0,0,0,0,0,0]),s=r,a=!1;const o=6;for(let l=r;l<t;l++)if(e.get(l)!==a)i[n]++;else{if(n===o-1){let h=ee.MAX_AVG_VARIANCE,w=-1;for(let C=ee.CODE_START_A;C<=ee.CODE_START_C;C++){const I=it.patternMatchVariance(i,ee.CODE_PATTERNS[C],ee.MAX_INDIVIDUAL_VARIANCE);I<h&&(h=I,w=C)}if(w>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,w]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[n-1]=0,i[n]=0,n--}else n++;i[n]=1,a=!a}throw new T}static decodeCode(e,t,r){it.recordPattern(e,r,t);let n=ee.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<ee.CODE_PATTERNS.length;s++){const a=ee.CODE_PATTERNS[s],o=this.patternMatchVariance(t,a,ee.MAX_INDIVIDUAL_VARIANCE);o<n&&(n=o,i=s)}if(i>=0)return i;throw new T}decodeRow(e,t,r){const n=r&&r.get(q.ASSUME_GS1)===!0,i=ee.findStartPattern(t),s=i[2];let a=0;const o=new Uint8Array(20);o[a++]=s;let l;switch(s){case ee.CODE_START_A:l=ee.CODE_CODE_A;break;case ee.CODE_START_B:l=ee.CODE_CODE_B;break;case ee.CODE_START_C:l=ee.CODE_CODE_C;break;default:throw new v}let h=!1,w=!1,C="",I=i[0],y=i[1];const S=Int32Array.from([0,0,0,0,0,0]);let M=0,k=0,Q=s,$=0,j=!0,Se=!1,Ie=!1;for(;!h;){const yr=w;switch(w=!1,M=k,k=ee.decodeCode(t,S,y),o[a++]=k,k!==ee.CODE_STOP&&(j=!0),k!==ee.CODE_STOP&&($++,Q+=$*k),I=y,y+=S.reduce((as,os)=>as+os,0),k){case ee.CODE_START_A:case ee.CODE_START_B:case ee.CODE_START_C:throw new v}switch(l){case ee.CODE_CODE_A:if(k<64)Ie===Se?C+=String.fromCharCode(" ".charCodeAt(0)+k):C+=String.fromCharCode(" ".charCodeAt(0)+k+128),Ie=!1;else if(k<96)Ie===Se?C+=String.fromCharCode(k-64):C+=String.fromCharCode(k+64),Ie=!1;else switch(k!==ee.CODE_STOP&&(j=!1),k){case ee.CODE_FNC_1:n&&(C.length===0?C+="]C1":C+=String.fromCharCode(29));break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_A:!Se&&Ie?(Se=!0,Ie=!1):Se&&Ie?(Se=!1,Ie=!1):Ie=!0;break;case ee.CODE_SHIFT:w=!0,l=ee.CODE_CODE_B;break;case ee.CODE_CODE_B:l=ee.CODE_CODE_B;break;case ee.CODE_CODE_C:l=ee.CODE_CODE_C;break;case ee.CODE_STOP:h=!0;break}break;case ee.CODE_CODE_B:if(k<96)Ie===Se?C+=String.fromCharCode(" ".charCodeAt(0)+k):C+=String.fromCharCode(" ".charCodeAt(0)+k+128),Ie=!1;else switch(k!==ee.CODE_STOP&&(j=!1),k){case ee.CODE_FNC_1:n&&(C.length===0?C+="]C1":C+=String.fromCharCode(29));break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_B:!Se&&Ie?(Se=!0,Ie=!1):Se&&Ie?(Se=!1,Ie=!1):Ie=!0;break;case ee.CODE_SHIFT:w=!0,l=ee.CODE_CODE_A;break;case ee.CODE_CODE_A:l=ee.CODE_CODE_A;break;case ee.CODE_CODE_C:l=ee.CODE_CODE_C;break;case ee.CODE_STOP:h=!0;break}break;case ee.CODE_CODE_C:if(k<100)k<10&&(C+="0"),C+=k;else switch(k!==ee.CODE_STOP&&(j=!1),k){case ee.CODE_FNC_1:n&&(C.length===0?C+="]C1":C+=String.fromCharCode(29));break;case ee.CODE_CODE_A:l=ee.CODE_CODE_A;break;case ee.CODE_CODE_B:l=ee.CODE_CODE_B;break;case ee.CODE_STOP:h=!0;break}break}yr&&(l=l===ee.CODE_CODE_A?ee.CODE_CODE_B:ee.CODE_CODE_A)}const Rt=y-I;if(y=t.getNextUnset(y),!t.isRange(y,Math.min(t.getSize(),y+(y-I)/2),!1))throw new T;if(Q-=$*M,Q%103!==M)throw new J;const Wt=C.length;if(Wt===0)throw new T;Wt>0&&j&&(l===ee.CODE_CODE_C?C=C.substring(0,Wt-2):C=C.substring(0,Wt-1));const Ot=(i[1]+i[0])/2,We=I+Rt/2,mt=o.length,Bt=new Uint8Array(mt);for(let yr=0;yr<mt;yr++)Bt[yr]=o[yr];const _r=[new ce(Ot,e),new ce(We,e)];return new $e(C,Bt,0,_r,ue.CODE_128,new Date().getTime())}}ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ee.MAX_AVG_VARIANCE=.25,ee.MAX_INDIVIDUAL_VARIANCE=.7,ee.CODE_SHIFT=98,ee.CODE_CODE_C=99,ee.CODE_CODE_B=100,ee.CODE_CODE_A=101,ee.CODE_FNC_1=102,ee.CODE_FNC_2=97,ee.CODE_FNC_3=96,ee.CODE_FNC_4_A=101,ee.CODE_FNC_4_B=100,ee.CODE_START_A=103,ee.CODE_START_B=104,ee.CODE_START_C=105,ee.CODE_STOP=106;class ft extends it{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let i=ft.findAsteriskPattern(t,n),s=t.getNextSet(i[1]),a=t.getSize(),o,l;do{ft.recordPattern(t,s,n);let S=ft.toNarrowWidePattern(n);if(S<0)throw new T;o=ft.patternToChar(S),this.decodeRowResult+=o,l=s;for(let M of n)s+=M;s=t.getNextSet(s)}while(o!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let h=0;for(let S of n)h+=S;let w=s-l-h;if(s!==a&&w*2<h)throw new T;if(this.usingCheckDigit){let S=this.decodeRowResult.length-1,M=0;for(let k=0;k<S;k++)M+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(S)!==ft.ALPHABET_STRING.charAt(M%43))throw new J;this.decodeRowResult=this.decodeRowResult.substring(0,S)}if(this.decodeRowResult.length===0)throw new T;let C;this.extendedMode?C=ft.decodeExtended(this.decodeRowResult):C=this.decodeRowResult;let I=(i[1]+i[0])/2,y=l+h/2;return new $e(C,null,0,[new ce(I,e),new ce(y,e)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let r=e.getSize(),n=e.getNextSet(0),i=0,s=n,a=!1,o=t.length;for(let l=n;l<r;l++)if(e.get(l)!==a)t[i]++;else{if(i===o-1){if(this.toNarrowWidePattern(t)===ft.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new T}static toNarrowWidePattern(e){let t=e.length,r=0,n;do{let i=2147483647;for(let o of e)o<i&&o>r&&(i=o);r=i,n=0;let s=0,a=0;for(let o=0;o<t;o++){let l=e[o];l>r&&(a|=1<<t-1-o,n++,s+=l)}if(n===3){for(let o=0;o<t&&n>0;o++){let l=e[o];if(l>r&&(n--,l*2>=s))return-1}return a}}while(n>3);return-1}static patternToChar(e){for(let t=0;t<ft.CHARACTER_ENCODINGS.length;t++)if(ft.CHARACTER_ENCODINGS[t]===e)return ft.ALPHABET_STRING.charAt(t);if(e===ft.ASTERISK_ENCODING)return"*";throw new T}static decodeExtended(e){let t=e.length,r="";for(let n=0;n<t;n++){let i=e.charAt(n);if(i==="+"||i==="$"||i==="%"||i==="/"){let s=e.charAt(n+1),a="\0";switch(i){case"+":if(s>="A"&&s<="Z")a=String.fromCharCode(s.charCodeAt(0)+32);else throw new v;break;case"$":if(s>="A"&&s<="Z")a=String.fromCharCode(s.charCodeAt(0)-64);else throw new v;break;case"%":if(s>="A"&&s<="E")a=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")a=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")a=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")a="\0";else if(s==="V")a="@";else if(s==="W")a="`";else if(s==="X"||s==="Y"||s==="Z")a="";else throw new v;break;case"/":if(s>="A"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")a=":";else throw new v;break}r+=a,n++}else r+=i}return r}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class Ge extends it{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,r){let n=this.decodeStart(t),i=this.decodeEnd(t),s=new H;Ge.decodeMiddle(t,n[1],i[0],s);let a=s.toString(),o=null;r!=null&&(o=r.get(q.ALLOWED_LENGTHS)),o==null&&(o=Ge.DEFAULT_ALLOWED_LENGTHS);let l=a.length,h=!1,w=0;for(let y of o){if(l===y){h=!0;break}y>w&&(w=y)}if(!h&&l>w&&(h=!0),!h)throw new v;const C=[new ce(n[1],e),new ce(i[0],e)];return new $e(a,null,0,C,ue.ITF,new Date().getTime())}static decodeMiddle(e,t,r,n){let i=new Int32Array(10),s=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),s.fill(0),a.fill(0);t<r;){it.recordPattern(e,t,i);for(let l=0;l<5;l++){let h=2*l;s[l]=i[h],a[l]=i[h+1]}let o=Ge.decodeDigit(s);n.append(o.toString()),o=this.decodeDigit(a),n.append(o.toString()),i.forEach(function(l){t+=l})}}decodeStart(e){let t=Ge.skipWhiteSpace(e),r=Ge.findGuardPattern(e,t,Ge.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,t){let r=this.narrowLineWidth*10;r=r<t?r:t;for(let n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(r!==0)throw new T}static skipWhiteSpace(e){const t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new T;return r}decodeEnd(e){e.reverse();try{let t=Ge.skipWhiteSpace(e),r;try{r=Ge.findGuardPattern(e,t,Ge.END_PATTERN_REVERSED[0])}catch(i){i instanceof T&&(r=Ge.findGuardPattern(e,t,Ge.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let n=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-n,r}finally{e.reverse()}}static findGuardPattern(e,t,r){let n=r.length,i=new Int32Array(n),s=e.getSize(),a=!1,o=0,l=t;i.fill(0);for(let h=t;h<s;h++)if(e.get(h)!==a)i[o]++;else{if(o===n-1){if(it.patternMatchVariance(i,r,Ge.MAX_INDIVIDUAL_VARIANCE)<Ge.MAX_AVG_VARIANCE)return[l,h];l+=i[0]+i[1],le.arraycopy(i,2,i,0,o-1),i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,a=!a}throw new T}static decodeDigit(e){let t=Ge.MAX_AVG_VARIANCE,r=-1,n=Ge.PATTERNS.length;for(let i=0;i<n;i++){let s=Ge.PATTERNS[i],a=it.patternMatchVariance(e,s,Ge.MAX_INDIVIDUAL_VARIANCE);a<t?(t=a,r=i):a===t&&(r=-1)}if(r>=0)return r%10;throw new T}}Ge.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ge.MAX_AVG_VARIANCE=.38,Ge.MAX_INDIVIDUAL_VARIANCE=.5,Ge.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ge.START_PATTERN=Int32Array.from([1,1,1,1]),Ge.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Je extends it{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,r,n=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),r=Je.findGuardPattern(e,n,!1,this.START_END_PATTERN,i);let s=r[0];n=r[1];let a=s-(n-s);a>=0&&(t=e.isRange(a,s,!1))}return r}static checkChecksum(e){return Je.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let r=parseInt(e.charAt(t-1),10);return Je.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let i=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new v;r+=i}r*=3;for(let n=t-2;n>=0;n-=2){let i=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new v;r+=i}return(1e3-r)%10}static decodeEnd(e,t){return Je.findGuardPattern(e,t,!1,Je.START_END_PATTERN,new Int32Array(Je.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))}static findGuardPattern(e,t,r,n,i){let s=e.getSize();t=r?e.getNextUnset(t):e.getNextSet(t);let a=0,o=t,l=n.length,h=r;for(let w=t;w<s;w++)if(e.get(w)!==h)i[a]++;else{if(a===l-1){if(it.patternMatchVariance(i,n,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return Int32Array.from([o,w]);o+=i[0]+i[1];let C=i.slice(2,i.length-1);for(let I=0;I<a-1;I++)i[I]=C[I];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,h=!h}throw new T}static decodeDigit(e,t,r,n){this.recordPattern(e,r,t);let i=this.MAX_AVG_VARIANCE,s=-1,a=n.length;for(let o=0;o<a;o++){let l=n[o],h=it.patternMatchVariance(t,l,Je.MAX_INDIVIDUAL_VARIANCE);h<i&&(i=h,s=o)}if(s>=0)return s;throw new T}}Je.MAX_AVG_VARIANCE=.48,Je.MAX_INDIVIDUAL_VARIANCE=.7,Je.START_END_PATTERN=Int32Array.from([1,1,1]),Je.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Je.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Je.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class vr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),s=n.toString(),a=vr.parseExtensionString(s),o=[new ce((r[0]+r[1])/2,e),new ce(i,e)],l=new $e(s,null,0,o,ue.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],a=0;for(let l=0;l<5&&s<i;l++){let h=Je.decodeDigit(e,n,s,Je.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h%10);for(let w of n)s+=w;h>=10&&(a|=1<<4-l),l!==4&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(r.length!==5)throw new T;let o=this.determineCheckDigit(a);if(vr.extensionChecksum(r.toString())!==o)throw new T;return s}static extensionChecksum(e){let t=e.length,r=0;for(let n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=t-1;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new T}static parseExtensionString(e){if(e.length!==5)return null;let t=vr.parseExtension5String(e);return t==null?null:new Map([[U.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let r=parseInt(e.substring(1)),n=(r/100).toString(),i=r%100,s=i<10?"0"+i:i.toString();return t+n+"."+s}}class ln{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),s=n.toString(),a=ln.parseExtensionString(s),o=[new ce((r[0]+r[1])/2,e),new ce(i,e)],l=new $e(s,null,0,o,ue.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],a=0;for(let o=0;o<2&&s<i;o++){let l=Je.decodeDigit(e,n,s,Je.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+l%10);for(let h of n)s+=h;l>=10&&(a|=1<<1-o),o!==1&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(r.length!==2)throw new T;if(parseInt(r.toString())%4!==a)throw new T;return s}static parseExtensionString(e){return e.length!==2?null:new Map([[U.ISSUE_NUMBER,parseInt(e)]])}}class Un{static decodeRow(e,t,r){let n=Je.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new vr().decodeRow(e,t,n)}catch{return new ln().decodeRow(e,t,n)}}}Un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Be extends Je{constructor(){super(),this.decodeRowStringBuffer="",Be.L_AND_G_PATTERNS=Be.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Be.L_PATTERNS[e-10],r=new Int32Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[t.length-n-1];Be.L_AND_G_PATTERNS[e]=r}}decodeRow(e,t,r){let n=Be.findStartGuardPattern(t),i=r==null?null:r.get(q.NEED_RESULT_POINT_CALLBACK);if(i!=null){const j=new ce((n[0]+n[1])/2,e);i.foundPossibleResultPoint(j)}let s=this.decodeMiddle(t,n,this.decodeRowStringBuffer),a=s.rowOffset,o=s.resultString;if(i!=null){const j=new ce(a,e);i.foundPossibleResultPoint(j)}let l=this.decodeEnd(t,a);if(i!=null){const j=new ce((l[0]+l[1])/2,e);i.foundPossibleResultPoint(j)}let h=l[1],w=h+(h-l[0]);if(w>=t.getSize()||!t.isRange(h,w,!1))throw new T;let C=o.toString();if(C.length<8)throw new v;if(!Be.checkChecksum(C))throw new J;let I=(n[1]+n[0])/2,y=(l[1]+l[0])/2,S=this.getBarcodeFormat(),M=[new ce(I,e),new ce(y,e)],k=new $e(C,null,0,M,S,new Date().getTime()),Q=0;try{let j=Un.decodeRow(e,t,l[1]);k.putMetadata(U.UPC_EAN_EXTENSION,j.getText()),k.putAllMetadata(j.getResultMetadata()),k.addResultPoints(j.getResultPoints()),Q=j.getText().length}catch{}let $=r==null?null:r.get(q.ALLOWED_EAN_EXTENSIONS);if($!=null){let j=!1;for(let Se in $)if(Q.toString()===Se){j=!0;break}if(!j)throw new T}return k}decodeEnd(e,t){return Be.findGuardPattern(e,t,!1,Be.START_END_PATTERN,new Int32Array(Be.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Be.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let r=parseInt(e.charAt(t-1),10);return Be.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let i=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new v;r+=i}r*=3;for(let n=t-2;n>=0;n-=2){let i=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new v;r+=i}return(1e3-r)%10}}class fr extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],a=0;for(let l=0;l<6&&s<i;l++){let h=Be.decodeDigit(e,n,s,Be.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h%10);for(let w of n)s+=w;h>=10&&(a|=1<<5-l)}r=fr.determineFirstDigit(r,a),s=Be.findGuardPattern(e,s,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let l=0;l<6&&s<i;l++){let h=Be.decodeDigit(e,n,s,Be.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h);for(let w of n)s+=w}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(e,t){for(let r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode("0".charCodeAt(0)+r)+e,e;throw new T}}fr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Vn extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1];for(let o=0;o<4&&s<i;o++){let l=Be.decodeDigit(e,n,s,Be.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+l);for(let h of n)s+=h}s=Be.findGuardPattern(e,s,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&s<i;o++){let l=Be.decodeDigit(e,n,s,Be.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+l);for(let h of n)s+=h}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return ue.EAN_8}}class Gn extends Be{constructor(){super(...arguments),this.ean13Reader=new fr}getBarcodeFormat(){return ue.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))}decodeMiddle(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let r=new $e(t.substring(1),null,null,e.getResultPoints(),ue.UPC_A);return e.getResultMetadata()!=null&&r.putAllMetadata(e.getResultMetadata()),r}else throw new T}reset(){this.ean13Reader.reset()}}class Ht extends Be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters.map(l=>l);n[0]=0,n[1]=0,n[2]=0,n[3]=0;const i=e.getSize();let s=t[1],a=0;for(let l=0;l<6&&s<i;l++){const h=Ht.decodeDigit(e,n,s,Ht.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h%10);for(let w of n)s+=w;h>=10&&(a|=1<<5-l)}let o=Ht.determineNumSysAndCheckDigit(r,a);return{rowOffset:s,resultString:o}}decodeEnd(e,t){return Ht.findGuardPatternWithoutCounters(e,t,!0,Ht.MIDDLE_END_PATTERN)}checkChecksum(e){return Be.checkChecksum(Ht.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n]){let i=String.fromCharCode("0".charCodeAt(0)+r),s=String.fromCharCode("0".charCodeAt(0)+n);return i+e+s}throw T.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),r=new H;r.append(e.charAt(0));let n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n);break}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Ht.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ht.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class cn extends it{constructor(e){super();let t=e==null?null:e.get(q.POSSIBLE_FORMATS),r=[];d(t)?(r.push(new fr),r.push(new Gn),r.push(new Vn),r.push(new Ht)):(t.indexOf(ue.EAN_13)>-1&&r.push(new fr),t.indexOf(ue.UPC_A)>-1&&r.push(new Gn),t.indexOf(ue.EAN_8)>-1&&r.push(new Vn),t.indexOf(ue.UPC_E)>-1&&r.push(new Ht)),this.readers=r}decodeRow(e,t,r){for(let n of this.readers)try{const i=n.decodeRow(e,t,r),s=i.getBarcodeFormat()===ue.EAN_13&&i.getText().charAt(0)==="0",a=r==null?null:r.get(q.POSSIBLE_FORMATS),o=a==null||a.includes(ue.UPC_A);if(s&&o){const l=i.getRawBytes(),h=new $e(i.getText().substring(1),l,l?l.length:null,i.getResultPoints(),ue.UPC_A);return h.putAllMetadata(i.getResultMetadata()),h}return i}catch{}throw new T}reset(){for(let e of this.readers)e.reset()}}class It extends it{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let r=0;r<t.length;r++)if(it.patternMatchVariance(e,t[r],It.MAX_INDIVIDUAL_VARIANCE)<It.MAX_AVG_VARIANCE)return r;throw new T}static count(e){return Ce.sum(new Int32Array(e))}static increment(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]>n&&(n=t[i],r=i);e[r]++}static decrement(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]<n&&(n=t[i],r=i);e[r]--}static isFinderPattern(e){let t=e[0]+e[1],r=t+e[2]+e[3],n=t/r;if(n>=It.MIN_FINDER_PATTERN_RATIO&&n<=It.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let a of e)a>s&&(s=a),a<i&&(i=a);return s<10*i}return!1}}It.MAX_AVG_VARIANCE=.2,It.MAX_INDIVIDUAL_VARIANCE=.45,It.MIN_FINDER_PATTERN_RATIO=9.5/12,It.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ar{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Ar))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Xr{constructor(e,t,r,n,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ce(r,i)),this.resultPoints.push(new ce(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Xr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Zt{constructor(){}static getRSSvalue(e,t,r){let n=0;for(let o of e)n+=o;let i=0,s=0,a=e.length;for(let o=0;o<a-1;o++){let l;for(l=1,s|=1<<o;l<e[o];l++,s&=~(1<<o)){let h=Zt.combins(n-l-1,a-o-2);if(r&&s===0&&n-l-(a-o-1)>=a-o-1&&(h-=Zt.combins(n-l-(a-o),a-o-2)),a-o-1>1){let w=0;for(let C=n-l-(a-o-2);C>t;C--)w+=Zt.combins(n-l-C-1,a-o-3);h-=w*(a-1-o)}else n-l>t&&h--;i+=h}n-=l}return i}static combins(e,t){let r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);let i=1,s=1;for(let a=e;a>r;a--)i*=a,s<=n&&(i/=s,s++);for(;s<=n;)i/=s,s++;return i}}class Di{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let r=12*t,n=new Te(r),i=0,a=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)a&1<<o&&n.set(i),i++;for(let o=1;o<e.length;++o){let l=e[o],h=l.getLeftChar().getValue();for(let w=11;w>=0;--w)h&1<<w&&n.set(i),i++;if(l.getRightChar()!=null){let w=l.getRightChar().getValue();for(let C=11;C>=0;--C)w&1<<C&&n.set(i),i++}}return n}}class ur{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class fn{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Tt extends fn{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Tt.FNC1}}Tt.FNC1="$";class hr extends fn{constructor(e,t,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Pt extends fn{constructor(e,t,r){if(super(e),t<0||t>10||r<0||r>10)throw new v;this.firstDigit=t,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Pt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Pt.FNC1}isAnyFNC1(){return this.firstDigit===Pt.FNC1||this.secondDigit===Pt.FNC1}}Pt.FNC1=10;class se{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new T;let t=e.substring(0,2);for(let i of se.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===se.VARIABLE_LENGTH?se.processVariableAI(2,i[2],e):se.processFixedAI(2,i[1],e);if(e.length<3)throw new T;let r=e.substring(0,3);for(let i of se.THREE_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===se.VARIABLE_LENGTH?se.processVariableAI(3,i[2],e):se.processFixedAI(3,i[1],e);for(let i of se.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===se.VARIABLE_LENGTH?se.processVariableAI(4,i[2],e):se.processFixedAI(4,i[1],e);if(e.length<4)throw new T;let n=e.substring(0,4);for(let i of se.FOUR_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===se.VARIABLE_LENGTH?se.processVariableAI(4,i[2],e):se.processFixedAI(4,i[1],e);throw new T}static processFixedAI(e,t,r){if(r.length<e)throw new T;let n=r.substring(0,e);if(r.length<e+t)throw new T;let i=r.substring(e,e+t),s=r.substring(e+t),a="("+n+")"+i,o=se.parseFieldsInGeneralPurpose(s);return o==null?a:a+o}static processVariableAI(e,t,r){let n=r.substring(0,e),i;r.length<e+t?i=r.length:i=e+t;let s=r.substring(e,i),a=r.substring(i),o="("+n+")"+s,l=se.parseFieldsInGeneralPurpose(a);return l==null?o:o+l}}se.VARIABLE_LENGTH=[],se.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",se.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",se.VARIABLE_LENGTH,20],["22",se.VARIABLE_LENGTH,29],["30",se.VARIABLE_LENGTH,8],["37",se.VARIABLE_LENGTH,8],["90",se.VARIABLE_LENGTH,30],["91",se.VARIABLE_LENGTH,30],["92",se.VARIABLE_LENGTH,30],["93",se.VARIABLE_LENGTH,30],["94",se.VARIABLE_LENGTH,30],["95",se.VARIABLE_LENGTH,30],["96",se.VARIABLE_LENGTH,30],["97",se.VARIABLE_LENGTH,3],["98",se.VARIABLE_LENGTH,30],["99",se.VARIABLE_LENGTH,30]],se.THREE_DIGIT_DATA_LENGTH=[["240",se.VARIABLE_LENGTH,30],["241",se.VARIABLE_LENGTH,30],["242",se.VARIABLE_LENGTH,6],["250",se.VARIABLE_LENGTH,30],["251",se.VARIABLE_LENGTH,30],["253",se.VARIABLE_LENGTH,17],["254",se.VARIABLE_LENGTH,20],["400",se.VARIABLE_LENGTH,30],["401",se.VARIABLE_LENGTH,30],["402",17],["403",se.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",se.VARIABLE_LENGTH,20],["421",se.VARIABLE_LENGTH,15],["422",3],["423",se.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],se.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",se.VARIABLE_LENGTH,15],["391",se.VARIABLE_LENGTH,18],["392",se.VARIABLE_LENGTH,15],["393",se.VARIABLE_LENGTH,18],["703",se.VARIABLE_LENGTH,30]],se.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",se.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",se.VARIABLE_LENGTH,20],["8003",se.VARIABLE_LENGTH,30],["8004",se.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",se.VARIABLE_LENGTH,30],["8008",se.VARIABLE_LENGTH,12],["8018",18],["8020",se.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",se.VARIABLE_LENGTH,70],["8200",se.VARIABLE_LENGTH,70]];class Er{constructor(e){this.buffer=new H,this.information=e}decodeAllCodes(e,t){let r=t,n=null;do{let i=this.decodeGeneralPurposeField(r,n),s=se.parseFieldsInGeneralPurpose(i.getNewString());if(s!=null&&e.append(s),i.isRemaining()?n=""+i.getRemainingValue():n=null,r===i.getNewPosition())break;r=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new Pt(this.information.getSize(),Pt.FNC1,Pt.FNC1):new Pt(this.information.getSize(),i-1,Pt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),r=(t-8)/11,n=(t-8)%11;return new Pt(e+7,r,n)}extractNumericValueFromBitArray(e,t){return Er.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,r){let n=0;for(let i=0;i<r;++i)e.get(t+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new hr(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new hr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let r=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(r!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new hr(this.current.getPosition(),this.buffer.toString()):t=new hr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ur(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new hr(this.current.getPosition(),this.buffer.toString());return new ur(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ur(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new hr(this.current.getPosition(),this.buffer.toString());return new ur(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ur(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new hr(this.current.getPosition(),this.buffer.toString());return new ur(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ur(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Tt(e+5,Tt.FNC1);if(t>=5&&t<15)return new Tt(e+5,"0"+(t-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Tt(e+7,""+(r+1));if(r>=90&&r<116)return new Tt(e+7,""+(r+7));let n=this.extractNumericValueFromBitArray(e,8),i;switch(n){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new v}return new Tt(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Tt(e+5,Tt.FNC1);if(t>=5&&t<15)return new Tt(e+5,"0"+(t-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Tt(e+6,""+(r+33));let n;switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new fe("Decoding invalid alphanumeric value: "+r)}return new Tt(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class un{constructor(e){this.information=e,this.generalDecoder=new Er(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class St extends un{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)}encodeCompressedGtinWithoutAI(e,t,r){for(let n=0;n<4;++n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*n,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}St.appendCheckDigit(e,r)}static appendCheckDigit(e,t){let r=0;for(let n=0;n<13;n++){let i=e.charAt(n+t).charCodeAt(0)-"0".charCodeAt(0);r+=n&1?i:3*i}r=10-r%10,r===10&&(r=0),e.append(r)}}St.GTIN_SIZE=40;class Cr extends St{constructor(e){super(e)}parseInformation(){let e=new H;e.append("(01)");let t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Cr.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Cr.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Cr.HEADER_SIZE+44)}}Cr.HEADER_SIZE=1+1+2;class Yr extends un{constructor(e){super(e)}parseInformation(){let e=new H;return this.getGeneralDecoder().decodeAllCodes(e,Yr.HEADER_SIZE)}}Yr.HEADER_SIZE=2+1+2;class Zr extends St{constructor(e){super(e)}encodeCompressedWeight(e,t,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);let i=this.checkWeight(n),s=1e5;for(let a=0;a<5;++a)i/s===0&&e.append("0"),s/=10;e.append(i)}}class zt extends Zr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=zt.HEADER_SIZE+Zr.GTIN_SIZE+zt.WEIGHT_SIZE)throw new T;let e=new H;return this.encodeCompressedGtin(e,zt.HEADER_SIZE),this.encodeCompressedWeight(e,zt.HEADER_SIZE+Zr.GTIN_SIZE,zt.WEIGHT_SIZE),e.toString()}}zt.HEADER_SIZE=4+1,zt.WEIGHT_SIZE=15;class Mi extends zt{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Bi extends zt{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Kt extends St{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Kt.HEADER_SIZE+St.GTIN_SIZE)throw new T;let e=new H;this.encodeCompressedGtin(e,Kt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Kt.HEADER_SIZE+St.GTIN_SIZE,Kt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Kt.HEADER_SIZE+St.GTIN_SIZE+Kt.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Kt.HEADER_SIZE=5+1+2,Kt.LAST_DIGIT_SIZE=2;class yt extends St{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<yt.HEADER_SIZE+St.GTIN_SIZE)throw new T;let e=new H;this.encodeCompressedGtin(e,yt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+St.GTIN_SIZE,yt.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+St.GTIN_SIZE+yt.LAST_DIGIT_SIZE,yt.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(yt.HEADER_SIZE+St.GTIN_SIZE+yt.LAST_DIGIT_SIZE+yt.FIRST_THREE_DIGITS_SIZE,null);return e.append(n.getNewString()),e.toString()}}yt.HEADER_SIZE=5+1+2,yt.LAST_DIGIT_SIZE=2,yt.FIRST_THREE_DIGITS_SIZE=10;class qe extends Zr{constructor(e,t,r){super(e),this.dateCode=r,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=qe.HEADER_SIZE+qe.GTIN_SIZE+qe.WEIGHT_SIZE+qe.DATE_SIZE)throw new T;let e=new H;return this.encodeCompressedGtin(e,qe.HEADER_SIZE),this.encodeCompressedWeight(e,qe.HEADER_SIZE+qe.GTIN_SIZE,qe.WEIGHT_SIZE),this.encodeCompressedDate(e,qe.HEADER_SIZE+qe.GTIN_SIZE+qe.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,qe.DATE_SIZE);if(r==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let n=r%32;r/=32;let i=r%12+1;r/=12;let s=r;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),n/10==0&&e.append("0"),e.append(n)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}qe.HEADER_SIZE=7+1,qe.WEIGHT_SIZE=20,qe.DATE_SIZE=16;function Hn(x){try{if(x.get(1))return new Cr(x);if(!x.get(2))return new Yr(x);switch(Er.extractNumericValueFromBitArray(x,1,4)){case 4:return new Mi(x);case 5:return new Bi(x)}switch(Er.extractNumericValueFromBitArray(x,1,5)){case 12:return new Kt(x);case 13:return new yt(x)}switch(Er.extractNumericValueFromBitArray(x,1,7)){case 56:return new qe(x,"310","11");case 57:return new qe(x,"320","11");case 58:return new qe(x,"310","13");case 59:return new qe(x,"320","13");case 60:return new qe(x,"310","15");case 61:return new qe(x,"320","15");case 62:return new qe(x,"310","17");case 63:return new qe(x,"320","17")}}catch(e){throw console.log(e),new fe("unknown decoder: "+x)}}class nr{constructor(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof nr?nr.equalsOrNull(e.leftchar,t.leftchar)&&nr.equalsOrNull(e.rightchar,t.rightchar)&&nr.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:nr.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class hn{constructor(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof hn?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let r;return e.forEach((n,i)=>{t.forEach(s=>{n.getLeftChar().getValue()===s.getLeftChar().getValue()&&n.getRightChar().getValue()===s.getRightChar().getValue()&&n.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}}class Z extends It{constructor(e){super(...arguments),this.pairs=new Array(Z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return Z.constructResult(this.decodeRow2pairs(e,t))}catch(n){this.verbose&&console.log(n)}return this.pairs.length=0,this.startFromEven=!0,Z.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof T){if(!this.pairs.length)throw new T;r=!0}}if(this.checkChecksum())return this.pairs;let n;if(this.rows.length?n=!0:n=!1,this.storeRow(e,!1),n){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new T}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let n=this.rows[r];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(n.getPairs()),!Z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(n);try{return this.checkRows(i,r+1)}catch(s){this.verbose&&console.log(s)}}throw new T}static isValidSequence(e){for(let t of Z.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let r=!0;for(let n=0;n<e.length;n++)if(e[n].getFinderPattern().getValue()!=t[n]){r=!1;break}if(r)return!0}return!1}storeRow(e,t){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let s=this.rows[r];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}n=s.isEquivalent(this.pairs),r++}i||n||Z.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new hn(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let r of t)if(r.getPairs().length!==e.length){for(let n of r.getPairs())for(let i of e)if(nr.equals(n,i))break}}static isPartialRow(e,t){for(let r of t){let n=!0;for(let i of e){let s=!1;for(let a of r.getPairs())if(i.equals(a)){s=!0;break}if(!s){n=!1;break}}if(n)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Di.buildBitArray(e),n=Hn(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),a=[i[0],i[1],s[0],s[1]];return new $e(n,null,null,a,ue.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(r==null)return!1;let n=r.getChecksumPortion(),i=2;for(let a=1;a<this.pairs.size();++a){let o=this.pairs.get(a);n+=o.getLeftChar().getChecksumPortion(),i++;let l=o.getRightChar();l!=null&&(n+=l.getChecksumPortion(),i++)}return n%=211,211*(i-4)+n==t.getValue()}static getNextSecondBar(e,t){let r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r}retrieveNextPair(e,t,r){let n=t.length%2==0;this.startFromEven&&(n=!n);let i,s=!0,a=-1;do this.findNextPair(e,t,a),i=this.parseFoundFinderPattern(e,r,n),i==null?a=Z.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let o=this.decodeDataCharacter(e,i,n,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new T;let l;try{l=this.decodeDataCharacter(e,i,n,!1)}catch(h){l=null,this.verbose&&console.log(h)}return new nr(o,l,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s;r>=0?s=r:this.isEmptyPair(t)?s=0:s=t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let o=!1;for(;s<i&&(o=!e.get(s),!!o);)s++;let l=0,h=s;for(let w=s;w<i;w++)if(e.get(w)!=o)n[l]++;else{if(l==3){if(a&&Z.reverseCounters(n),Z.isFinderPattern(n)){this.startEnd[0]=h,this.startEnd[1]=w;return}a&&Z.reverseCounters(n),h+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,o=!o}throw new T}static reverseCounters(e){let t=e.length;for(let r=0;r<t/2;++r){let n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}}parseFoundFinderPattern(e,t,r){let n,i,s;if(r){let l=this.startEnd[0]-1;for(;l>=0&&!e.get(l);)l--;l++,n=this.startEnd[0]-l,i=l,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),n=s-this.startEnd[1];let a=this.getDecodeFinderCounters();le.arraycopy(a,0,a,1,a.length-1),a[0]=n;let o;try{o=this.parseFinderValue(a,Z.FINDER_PATTERNS)}catch{return null}return new Xr(o,[i,s],i,s,t)}decodeDataCharacter(e,t,r,n){let i=this.getDataCharacterCounters();for(let We=0;We<i.length;We++)i[We]=0;if(n)Z.recordPatternInReverse(e,t.getStartEnd()[0],i);else{Z.recordPattern(e,t.getStartEnd()[1],i);for(let We=0,mt=i.length-1;We<mt;We++,mt--){let Bt=i[We];i[We]=i[mt],i[mt]=Bt}}let s=17,a=Ce.sum(new Int32Array(i))/s,o=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-o)/o>.3)throw new T;let l=this.getOddCounts(),h=this.getEvenCounts(),w=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let We=0;We<i.length;We++){let mt=1*i[We]/a,Bt=mt+.5;if(Bt<1){if(mt<.3)throw new T;Bt=1}else if(Bt>8){if(mt>8.7)throw new T;Bt=8}let _r=We/2;We&1?(h[_r]=Bt,C[_r]=mt-Bt):(l[_r]=Bt,w[_r]=mt-Bt)}this.adjustOddEvenCounts(s);let I=4*t.getValue()+(r?0:2)+(n?0:1)-1,y=0,S=0;for(let We=l.length-1;We>=0;We--){if(Z.isNotA1left(t,r,n)){let mt=Z.WEIGHTS[I][2*We];S+=l[We]*mt}y+=l[We]}let M=0;for(let We=h.length-1;We>=0;We--)if(Z.isNotA1left(t,r,n)){let mt=Z.WEIGHTS[I][2*We+1];M+=h[We]*mt}let k=S+M;if(y&1||y>13||y<4)throw new T;let Q=(13-y)/2,$=Z.SYMBOL_WIDEST[Q],j=9-$,Se=Zt.getRSSvalue(l,$,!0),Ie=Zt.getRSSvalue(h,j,!1),Rt=Z.EVEN_TOTAL_SUBSET[Q],Wt=Z.GSUM[Q],Ot=Se*Rt+Ie+Wt;return new Ar(Ot,k)}static isNotA1left(e,t,r){return!(e.getValue()==0&&t&&r)}adjustOddEvenCounts(e){let t=Ce.sum(new Int32Array(this.getOddCounts())),r=Ce.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;t>13?i=!0:t<4&&(n=!0);let s=!1,a=!1;r>13?a=!0:r<4&&(s=!0);let o=t+r-e,l=(t&1)==1,h=(r&1)==0;if(o==1)if(l){if(h)throw new T;i=!0}else{if(!h)throw new T;a=!0}else if(o==-1)if(l){if(h)throw new T;n=!0}else{if(!h)throw new T;s=!0}else if(o==0){if(l){if(!h)throw new T;t<r?(n=!0,a=!0):(i=!0,s=!0)}else if(h)throw new T}else throw new T;if(n){if(i)throw new T;Z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new T;Z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Z.SYMBOL_WIDEST=[7,5,4,3,1],Z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Z.GSUM=[0,348,1388,2948,3988],Z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Z.FINDER_PAT_A=0,Z.FINDER_PAT_B=1,Z.FINDER_PAT_C=2,Z.FINDER_PAT_D=3,Z.FINDER_PAT_E=4,Z.FINDER_PAT_F=5,Z.FINDER_PATTERN_SEQUENCES=[[Z.FINDER_PAT_A,Z.FINDER_PAT_A],[Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B],[Z.FINDER_PAT_A,Z.FINDER_PAT_C,Z.FINDER_PAT_B,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_C],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F]],Z.MAX_PAIRS=11;class Li extends Ar{constructor(e,t,r){super(e,t),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class et extends It{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,r){const n=this.decodePair(t,!1,e,r);et.addOrTally(this.possibleLeftPairs,n),t.reverse();let i=this.decodePair(t,!0,e,r);et.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1){for(let a of this.possibleRightPairs)if(a.getCount()>1&&et.checkChecksum(s,a))return et.constructResult(s,a)}throw new T}static addOrTally(e,t){if(t==null)return;let r=!1;for(let n of e)if(n.getValue()===t.getValue()){n.incrementCount(),r=!0;break}r||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let r=4537077*e.getValue()+t.getValue(),n=new String(r).toString(),i=new H;for(let l=13-n.length;l>0;l--)i.append("0");i.append(n);let s=0;for(let l=0;l<13;l++){let h=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=l&1?h:3*h}s=10-s%10,s===10&&(s=0),i.append(s.toString());let a=e.getFinderPattern().getResultPoints(),o=t.getFinderPattern().getResultPoints();return new $e(i.toString(),null,0,[a[0],a[1],o[0],o[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(e,t){let r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(e,t,r,n){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,r,t,i),a=n==null?null:n.get(q.NEED_RESULT_POINT_CALLBACK);if(a!=null){let h=(i[0]+i[1])/2;t&&(h=e.getSize()-1-h),a.foundPossibleResultPoint(new ce(h,r))}let o=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new Li(1597*o.getValue()+l.getValue(),o.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,r){let n=this.getDataCharacterCounters();for(let M=0;M<n.length;M++)n[M]=0;if(r)it.recordPatternInReverse(e,t.getStartEnd()[0],n);else{it.recordPattern(e,t.getStartEnd()[1]+1,n);for(let M=0,k=n.length-1;M<k;M++,k--){let Q=n[M];n[M]=n[k],n[k]=Q}}let i=r?16:15,s=Ce.sum(new Int32Array(n))/i,a=this.getOddCounts(),o=this.getEvenCounts(),l=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let M=0;M<n.length;M++){let k=n[M]/s,Q=Math.floor(k+.5);Q<1?Q=1:Q>8&&(Q=8);let $=Math.floor(M/2);M&1?(o[$]=Q,h[$]=k-Q):(a[$]=Q,l[$]=k-Q)}this.adjustOddEvenCounts(r,i);let w=0,C=0;for(let M=a.length-1;M>=0;M--)C*=9,C+=a[M],w+=a[M];let I=0,y=0;for(let M=o.length-1;M>=0;M--)I*=9,I+=o[M],y+=o[M];let S=C+3*I;if(r){if(w&1||w>12||w<4)throw new T;let M=(12-w)/2,k=et.OUTSIDE_ODD_WIDEST[M],Q=9-k,$=Zt.getRSSvalue(a,k,!1),j=Zt.getRSSvalue(o,Q,!0),Se=et.OUTSIDE_EVEN_TOTAL_SUBSET[M],Ie=et.OUTSIDE_GSUM[M];return new Ar($*Se+j+Ie,S)}else{if(y&1||y>10||y<4)throw new T;let M=(10-y)/2,k=et.INSIDE_ODD_WIDEST[M],Q=9-k,$=Zt.getRSSvalue(a,k,!0),j=Zt.getRSSvalue(o,Q,!1),Se=et.INSIDE_ODD_TOTAL_SUBSET[M],Ie=et.INSIDE_GSUM[M];return new Ar(j*Se+$+Ie,S)}}findFinderPattern(e,t){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=e.getSize(),i=!1,s=0;for(;s<n&&(i=!e.get(s),t!==i);)s++;let a=0,o=s;for(let l=s;l<n;l++)if(e.get(l)!==i)r[a]++;else{if(a===3){if(It.isFinderPattern(r))return[o,l];o+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,i=!i}throw new T}parseFoundFinderPattern(e,t,r,n){let i=e.get(n[0]),s=n[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const a=n[0]-s,o=this.getDecodeFinderCounters(),l=new Int32Array(o.length);le.arraycopy(o,0,l,1,o.length-1),l[0]=a;const h=this.parseFinderValue(l,et.FINDER_PATTERNS);let w=s,C=n[1];return r&&(w=e.getSize()-1-w,C=e.getSize()-1-C),new Xr(h,[s,n[1]],w,C,t)}adjustOddEvenCounts(e,t){let r=Ce.sum(new Int32Array(this.getOddCounts())),n=Ce.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,a=!1,o=!1;e?(r>12?s=!0:r<4&&(i=!0),n>12?o=!0:n<4&&(a=!0)):(r>11?s=!0:r<5&&(i=!0),n>10?o=!0:n<4&&(a=!0));let l=r+n-t,h=(r&1)===(e?1:0),w=(n&1)===1;if(l===1)if(h){if(w)throw new T;s=!0}else{if(!w)throw new T;o=!0}else if(l===-1)if(h){if(w)throw new T;i=!0}else{if(!w)throw new T;a=!0}else if(l===0){if(h){if(!w)throw new T;r<n?(i=!0,o=!0):(s=!0,a=!0)}else if(w)throw new T}else throw new T;if(i){if(s)throw new T;It.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&It.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(o)throw new T;It.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&It.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}et.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],et.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],et.OUTSIDE_GSUM=[0,161,961,2015,2715],et.INSIDE_GSUM=[0,336,1036,1516],et.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],et.INSIDE_ODD_WIDEST=[2,4,6,8],et.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class pr extends it{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const r=e?e.get(q.POSSIBLE_FORMATS):null,n=e&&e.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(ue.EAN_13)||r.includes(ue.UPC_A)||r.includes(ue.EAN_8)||r.includes(ue.UPC_E))&&this.readers.push(new cn(e)),r.includes(ue.CODE_39)&&this.readers.push(new ft(n)),r.includes(ue.CODE_128)&&this.readers.push(new ee),r.includes(ue.ITF)&&this.readers.push(new Ge),r.includes(ue.RSS_14)&&this.readers.push(new et),r.includes(ue.RSS_EXPANDED)&&this.readers.push(new Z(this.verbose))):(this.readers.push(new cn(e)),this.readers.push(new ft),this.readers.push(new cn(e)),this.readers.push(new ee),this.readers.push(new Ge),this.readers.push(new et),this.readers.push(new Z(this.verbose)))}decodeRow(e,t,r){for(let n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(e,t,r)}catch{}throw new T}reset(){this.readers.forEach(e=>e.reset())}}class Pi extends At{constructor(e=500,t){super(new pr(t),e,t)}}class Pe{constructor(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Le{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ne{constructor(e,t,r,n,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=s;let a=0;const o=s.getECCodewords(),l=s.getECBlocks();for(let h of l)a+=h.getCount()*(h.getDataCodewords()+o);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new v;for(let r of Ne.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===t)return r;throw new v}toString(){return""+this.versionNumber}static buildVersions(){return[new Ne(1,10,10,8,8,new Pe(5,new Le(1,3))),new Ne(2,12,12,10,10,new Pe(7,new Le(1,5))),new Ne(3,14,14,12,12,new Pe(10,new Le(1,8))),new Ne(4,16,16,14,14,new Pe(12,new Le(1,12))),new Ne(5,18,18,16,16,new Pe(14,new Le(1,18))),new Ne(6,20,20,18,18,new Pe(18,new Le(1,22))),new Ne(7,22,22,20,20,new Pe(20,new Le(1,30))),new Ne(8,24,24,22,22,new Pe(24,new Le(1,36))),new Ne(9,26,26,24,24,new Pe(28,new Le(1,44))),new Ne(10,32,32,14,14,new Pe(36,new Le(1,62))),new Ne(11,36,36,16,16,new Pe(42,new Le(1,86))),new Ne(12,40,40,18,18,new Pe(48,new Le(1,114))),new Ne(13,44,44,20,20,new Pe(56,new Le(1,144))),new Ne(14,48,48,22,22,new Pe(68,new Le(1,174))),new Ne(15,52,52,24,24,new Pe(42,new Le(2,102))),new Ne(16,64,64,14,14,new Pe(56,new Le(2,140))),new Ne(17,72,72,16,16,new Pe(36,new Le(4,92))),new Ne(18,80,80,18,18,new Pe(48,new Le(4,114))),new Ne(19,88,88,20,20,new Pe(56,new Le(4,144))),new Ne(20,96,96,22,22,new Pe(68,new Le(4,174))),new Ne(21,104,104,24,24,new Pe(56,new Le(6,136))),new Ne(22,120,120,18,18,new Pe(68,new Le(6,175))),new Ne(23,132,132,20,20,new Pe(62,new Le(8,163))),new Ne(24,144,144,22,22,new Pe(62,new Le(8,156),new Le(2,155))),new Ne(25,8,18,6,16,new Pe(7,new Le(1,5))),new Ne(26,8,32,6,14,new Pe(11,new Le(1,10))),new Ne(27,12,26,10,24,new Pe(14,new Le(1,16))),new Ne(28,12,36,10,16,new Pe(18,new Le(1,22))),new Ne(29,16,36,14,16,new Pe(24,new Le(1,32))),new Ne(30,16,48,14,22,new Pe(28,new Le(1,49)))]}}Ne.VERSIONS=Ne.buildVersions();class dn{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new v;this.version=dn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Y(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),r=e.getWidth();return Ne.getVersionForDimensions(t,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,r=4,n=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let a=!1,o=!1,l=!1,h=!1;do if(r===i&&n===0&&!a)e[t++]=this.readCorner1(i,s)&255,r-=2,n+=2,a=!0;else if(r===i-2&&n===0&&s&3&&!o)e[t++]=this.readCorner2(i,s)&255,r-=2,n+=2,o=!0;else if(r===i+4&&n===2&&!(s&7)&&!l)e[t++]=this.readCorner3(i,s)&255,r-=2,n+=2,l=!0;else if(r===i-2&&n===0&&(s&7)===4&&!h)e[t++]=this.readCorner4(i,s)&255,r-=2,n+=2,h=!0;else{do r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=this.readUtah(r,n,i,s)&255),r-=2,n+=2;while(r>=0&&n<s);r+=1,n+=3;do r>=0&&n<s&&!this.readMappingMatrix.get(n,r)&&(e[t++]=this.readUtah(r,n,i,s)&255),r+=2,n-=2;while(r<i&&n>=0);r+=3,n+=1}while(r<i||n<s);if(t!==this.version.getTotalCodewords())throw new v;return e}readModule(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,r,n){let i=0;return this.readModule(e-2,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-2,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t,r,n)&&(i|=1),i<<=1,this.readModule(e,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e,t,r,n)&&(i|=1),i}readCorner1(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}readCorner2(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner3(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner4(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new O("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/n|0,a=r/i|0,o=s*n,l=a*i,h=new Y(l,o);for(let w=0;w<s;++w){const C=w*n;for(let I=0;I<a;++I){const y=I*i;for(let S=0;S<n;++S){const M=w*(n+2)+1+S,k=C+S;for(let Q=0;Q<i;++Q){const $=I*(i+2)+1+Q;if(e.get($,M)){const j=y+Q;h.set(j,k)}}}}}return h}}class gn{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const r=t.getECBlocks();let n=0;const i=r.getECBlocks();for(let S of i)n+=S.getCount();const s=new Array(n);let a=0;for(let S of i)for(let M=0;M<S.getCount();M++){const k=S.getDataCodewords(),Q=r.getECCodewords()+k;s[a++]=new gn(k,new Uint8Array(Q))}const l=s[0].codewords.length-r.getECCodewords(),h=l-1;let w=0;for(let S=0;S<h;S++)for(let M=0;M<a;M++)s[M].codewords[S]=e[w++];const C=t.getVersionNumber()===24,I=C?8:a;for(let S=0;S<I;S++)s[S].codewords[l-1]=e[w++];const y=s[0].codewords.length;for(let S=l;S<y;S++)for(let M=0;M<a;M++){const k=C?(M+8)%a:M,Q=C&&k>7?S-1:S;s[k].codewords[Q]=e[w++]}if(w!==e.length)throw new O;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class xn{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new O(""+e);let t=0,r=this.bitOffset,n=this.byteOffset;const i=this.bytes;if(r>0){const s=8-r,a=e<s?e:s,o=s-a,l=255>>8-a<<o;t=(i[n]&l)>>o,e-=a,r+=a,r===8&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|i[n]&255,n++,e-=8;if(e>0){const s=8-e,a=255>>s<<s;t=t<<e|(i[n]&a)>>s,r+=e}}return this.bitOffset=r,this.byteOffset=n,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ut;(function(x){x[x.PAD_ENCODE=0]="PAD_ENCODE",x[x.ASCII_ENCODE=1]="ASCII_ENCODE",x[x.C40_ENCODE=2]="C40_ENCODE",x[x.TEXT_ENCODE=3]="TEXT_ENCODE",x[x.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",x[x.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",x[x.BASE256_ENCODE=6]="BASE256_ENCODE"})(ut||(ut={}));class ir{static decode(e){const t=new xn(e),r=new H,n=new H,i=new Array;let s=ut.ASCII_ENCODE;do if(s===ut.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,n);else{switch(s){case ut.C40_ENCODE:this.decodeC40Segment(t,r);break;case ut.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case ut.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case ut.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case ut.BASE256_ENCODE:this.decodeBase256Segment(t,r,i);break;default:throw new v}s=ut.ASCII_ENCODE}while(s!==ut.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new W(e,r.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,r){let n=!1;do{let i=e.readBits(8);if(i===0)throw new v;if(i<=128)return n&&(i+=128),t.append(String.fromCharCode(i-1)),ut.ASCII_ENCODE;if(i===129)return ut.PAD_ENCODE;if(i<=229){const s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return ut.C40_ENCODE;case 231:return ut.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:n=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return ut.ANSIX12_ENCODE;case 239:return ut.TEXT_ENCODE;case 240:return ut.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new v;break}}while(e.available()>0);return ut.ASCII_ENCODE}static decodeC40Segment(e,t){let r=!1;const n=[];let i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),n);for(let a=0;a<3;a++){const o=n[a];switch(i){case 0:if(o<3)i=o+1;else if(o<this.C40_BASIC_SET_CHARS.length){const l=this.C40_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else throw new v;break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const l=this.C40_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new v}i=0;break;case 3:r?(t.append(String.fromCharCode(o+224)),r=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new v}}}while(e.available()>0)}static decodeTextSegment(e,t){let r=!1,n=[],i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),n);for(let a=0;a<3;a++){const o=n[a];switch(i){case 0:if(o<3)i=o+1;else if(o<this.TEXT_BASIC_SET_CHARS.length){const l=this.TEXT_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else throw new v;break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const l=this.TEXT_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new v}i=0;break;case 3:if(o<this.TEXT_SHIFT3_SET_CHARS.length){const l=this.TEXT_SHIFT3_SET_CHARS[o];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l),i=0}else throw new v;break;default:throw new v}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const r=[];do{if(e.available()===8)return;const n=e.readBits(8);if(n===254)return;this.parseTwoBytes(n,e.readBits(8),r);for(let i=0;i<3;i++){const s=r[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new v;break}}}while(e.available()>0)}static parseTwoBytes(e,t,r){let n=(e<<8)+t-1,i=Math.floor(n/1600);r[0]=i,n-=i*1600,i=Math.floor(n/40),r[1]=i,r[2]=n-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let n=e.readBits(6);if(n===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}n&32||(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,r){let n=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),n++);let s;if(i===0?s=e.available()/8|0:i<250?s=i:s=250*(i-249)+this.unrandomize255State(e.readBits(8),n++),s<0)throw new v;const a=new Uint8Array(s);for(let o=0;o<s;o++){if(e.available()<8)throw new v;a[o]=this.unrandomize255State(e.readBits(8),n++)}r.push(a);try{t.append(B.decode(a,_.ISO88591))}catch(o){throw new fe("Platform does not support required encoding: "+o.message)}}static unrandomize255State(e,t){const r=149*t%255+1,n=e-r;return n>=0?n:n+256}}ir.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ir.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ir.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ir.TEXT_SHIFT2_SET_CHARS=ir.C40_SHIFT2_SET_CHARS,ir.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class ki{constructor(){this.rsDecoder=new Me(K.DATA_MATRIX_FIELD_256)}decode(e){const t=new dn(e),r=t.getVersion(),n=t.readCodewords(),i=gn.getDataBlocks(n,r);let s=0;for(let l of i)s+=l.getNumDataCodewords();const a=new Uint8Array(s),o=i.length;for(let l=0;l<o;l++){const h=i[l],w=h.getCodewords(),C=h.getNumDataCodewords();this.correctErrors(w,C);for(let I=0;I<C;I++)a[I*o+l]=w[I]}return ir.decode(a)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new J}for(let n=0;n<t;n++)e[n]=r[n]}}class nt{constructor(e){this.image=e,this.rectangleDetector=new Mt(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new T;t=this.shiftToModuleCenter(t);const r=t[0],n=t[1],i=t[2],s=t[3];let a=this.transitionsBetween(r,s)+1,o=this.transitionsBetween(i,s)+1;(a&1)===1&&(a+=1),(o&1)===1&&(o+=1),4*a<7*o&&4*o<7*a&&(a=o=Math.max(a,o));let l=nt.sampleGrid(this.image,r,n,i,s,a,o);return new cr(l,[r,n,i,s])}static shiftPoint(e,t,r){let n=(t.getX()-e.getX())/(r+1),i=(t.getY()-e.getY())/(r+1);return new ce(e.getX()+n,e.getY()+i)}static moveAway(e,t,r){let n=e.getX(),i=e.getY();return n<t?n-=1:n+=1,i<r?i-=1:i+=1,new ce(n,i)}detectSolid1(e){let t=e[0],r=e[1],n=e[3],i=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,n),o=this.transitionsBetween(n,i),l=this.transitionsBetween(i,t),h=s,w=[i,t,r,n];return h>a&&(h=a,w[0]=t,w[1]=r,w[2]=n,w[3]=i),h>o&&(h=o,w[0]=r,w[1]=n,w[2]=i,w[3]=t),h>l&&(w[0]=n,w[1]=i,w[2]=t,w[3]=r),w}detectSolid2(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=this.transitionsBetween(t,i),a=nt.shiftPoint(r,n,(s+1)*4),o=nt.shiftPoint(n,r,(s+1)*4),l=this.transitionsBetween(a,t),h=this.transitionsBetween(o,i);return l<h?(e[0]=t,e[1]=r,e[2]=n,e[3]=i):(e[0]=r,e[1]=n,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=this.transitionsBetween(t,i),a=this.transitionsBetween(r,i),o=nt.shiftPoint(t,r,(a+1)*4),l=nt.shiftPoint(n,r,(s+1)*4);s=this.transitionsBetween(o,i),a=this.transitionsBetween(l,i);let h=new ce(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1)),w=new ce(i.getX()+(t.getX()-r.getX())/(a+1),i.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(h))return this.isValid(w)?w:null;if(!this.isValid(w))return h;let C=this.transitionsBetween(o,h)+this.transitionsBetween(l,h),I=this.transitionsBetween(o,w)+this.transitionsBetween(l,w);return C>I?h:w}shiftToModuleCenter(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,a=this.transitionsBetween(n,i)+1,o=nt.shiftPoint(t,r,a*4),l=nt.shiftPoint(n,r,s*4);s=this.transitionsBetween(o,i)+1,a=this.transitionsBetween(l,i)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);let h=(t.getX()+r.getX()+n.getX()+i.getX())/4,w=(t.getY()+r.getY()+n.getY()+i.getY())/4;t=nt.moveAway(t,h,w),r=nt.moveAway(r,h,w),n=nt.moveAway(n,h,w),i=nt.moveAway(i,h,w);let C,I;return o=nt.shiftPoint(t,r,a*4),o=nt.shiftPoint(o,i,s*4),C=nt.shiftPoint(r,t,a*4),C=nt.shiftPoint(C,n,s*4),l=nt.shiftPoint(n,i,a*4),l=nt.shiftPoint(l,r,s*4),I=nt.shiftPoint(i,n,a*4),I=nt.shiftPoint(I,t,s*4),[o,C,l,I]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,r,n,i,s,a){return rr.getInstance().sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(e,t){let r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-n)>Math.abs(i-r);if(a){let S=r;r=n,n=S,S=i,i=s,s=S}let o=Math.abs(i-r),l=Math.abs(s-n),h=-o/2,w=n<s?1:-1,C=r<i?1:-1,I=0,y=this.image.get(a?n:r,a?r:n);for(let S=r,M=n;S!==i;S+=C){let k=this.image.get(a?M:S,a?S:M);if(k!==y&&(I++,y=k),h+=l,h>0){if(M===s)break;M+=w,h-=o}}return I}}class sr{constructor(){this.decoder=new ki}decode(e,t=null){let r,n;if(t!=null&&t.has(q.PURE_BARCODE)){const l=sr.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(l),n=sr.NO_POINTS}else{const l=new nt(e.getBlackMatrix()).detect();r=this.decoder.decode(l.getBits()),n=l.getPoints()}const i=r.getRawBytes(),s=new $e(r.getText(),i,8*i.length,n,ue.DATA_MATRIX,le.currentTimeMillis()),a=r.getByteSegments();a!=null&&s.putMetadata(U.BYTE_SEGMENTS,a);const o=r.getECLevel();return o!=null&&s.putMetadata(U.ERROR_CORRECTION_LEVEL,o),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new T;const n=this.moduleSize(t,e);let i=t[1];const s=r[1];let a=t[0];const l=(r[0]-a+1)/n,h=(s-i+1)/n;if(l<=0||h<=0)throw new T;const w=n/2;i+=w,a+=w;const C=new Y(l,h);for(let I=0;I<h;I++){const y=i+I*n;for(let S=0;S<l;S++)e.get(a+S*n,y)&&C.set(S,I)}return C}static moduleSize(e,t){const r=t.getWidth();let n=e[0];const i=e[1];for(;n<r&&t.get(n,i);)n++;if(n===r)throw new T;const s=n-e[0];if(s===0)throw new T;return s}}sr.NO_POINTS=[];class Fi extends At{constructor(e=500){super(new sr,e)}}var mr;(function(x){x[x.L=0]="L",x[x.M=1]="M",x[x.Q=2]="Q",x[x.H=3]="H"})(mr||(mr={}));class Ye{constructor(e,t,r){this.value=e,this.stringValue=t,this.bits=r,Ye.FOR_BITS.set(r,this),Ye.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ye.L;case"M":return Ye.M;case"Q":return Ye.Q;case"H":return Ye.H;default:throw new D(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ye))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Ye.FOR_BITS.size)throw new O;return Ye.FOR_BITS.get(e)}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.L=new Ye(mr.L,"L",1),Ye.M=new Ye(mr.M,"M",0),Ye.Q=new Ye(mr.Q,"Q",3),Ye.H=new Ye(mr.H,"H",2);class bt{constructor(e){this.errorCorrectionLevel=Ye.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return we.bitCount(e^t)}static decodeFormatInformation(e,t){const r=bt.doDecodeFormatInformation(e,t);return r!==null?r:bt.doDecodeFormatInformation(e^bt.FORMAT_INFO_MASK_QR,t^bt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;for(const i of bt.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new bt(i[1]);let a=bt.numBitsDiffering(e,s);a<r&&(n=i[1],r=a),e!==t&&(a=bt.numBitsDiffering(t,s),a<r&&(n=i[1],r=a))}return r<=3?new bt(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof bt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}bt.FORMAT_INFO_MASK_QR=21522,bt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class L{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const r of t)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class m{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(e,t,...r){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=r;let n=0;const i=r[0].getECCodewordsPerBlock(),s=r[0].getECBlocks();for(const a of s)n+=a.getCount()*(a.getDataCodewords()+i);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new v;try{return this.getVersionForNumber((e-17)/4)}catch{throw new v}}static getVersionForNumber(e){if(e<1||e>40)throw new O;return de.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<de.VERSION_DECODE_INFO.length;n++){const i=de.VERSION_DECODE_INFO[n];if(i===e)return de.getVersionForNumber(n+7);const s=bt.numBitsDiffering(e,i);s<t&&(r=n+7,t=s)}return t<=3?de.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Y(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){const i=this.alignmentPatternCenters[n]-2;for(let s=0;s<r;s++)n===0&&(s===0||s===r-1)||n===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}de.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),de.VERSIONS=[new de(1,new Int32Array(0),new L(7,new m(1,19)),new L(10,new m(1,16)),new L(13,new m(1,13)),new L(17,new m(1,9))),new de(2,Int32Array.from([6,18]),new L(10,new m(1,34)),new L(16,new m(1,28)),new L(22,new m(1,22)),new L(28,new m(1,16))),new de(3,Int32Array.from([6,22]),new L(15,new m(1,55)),new L(26,new m(1,44)),new L(18,new m(2,17)),new L(22,new m(2,13))),new de(4,Int32Array.from([6,26]),new L(20,new m(1,80)),new L(18,new m(2,32)),new L(26,new m(2,24)),new L(16,new m(4,9))),new de(5,Int32Array.from([6,30]),new L(26,new m(1,108)),new L(24,new m(2,43)),new L(18,new m(2,15),new m(2,16)),new L(22,new m(2,11),new m(2,12))),new de(6,Int32Array.from([6,34]),new L(18,new m(2,68)),new L(16,new m(4,27)),new L(24,new m(4,19)),new L(28,new m(4,15))),new de(7,Int32Array.from([6,22,38]),new L(20,new m(2,78)),new L(18,new m(4,31)),new L(18,new m(2,14),new m(4,15)),new L(26,new m(4,13),new m(1,14))),new de(8,Int32Array.from([6,24,42]),new L(24,new m(2,97)),new L(22,new m(2,38),new m(2,39)),new L(22,new m(4,18),new m(2,19)),new L(26,new m(4,14),new m(2,15))),new de(9,Int32Array.from([6,26,46]),new L(30,new m(2,116)),new L(22,new m(3,36),new m(2,37)),new L(20,new m(4,16),new m(4,17)),new L(24,new m(4,12),new m(4,13))),new de(10,Int32Array.from([6,28,50]),new L(18,new m(2,68),new m(2,69)),new L(26,new m(4,43),new m(1,44)),new L(24,new m(6,19),new m(2,20)),new L(28,new m(6,15),new m(2,16))),new de(11,Int32Array.from([6,30,54]),new L(20,new m(4,81)),new L(30,new m(1,50),new m(4,51)),new L(28,new m(4,22),new m(4,23)),new L(24,new m(3,12),new m(8,13))),new de(12,Int32Array.from([6,32,58]),new L(24,new m(2,92),new m(2,93)),new L(22,new m(6,36),new m(2,37)),new L(26,new m(4,20),new m(6,21)),new L(28,new m(7,14),new m(4,15))),new de(13,Int32Array.from([6,34,62]),new L(26,new m(4,107)),new L(22,new m(8,37),new m(1,38)),new L(24,new m(8,20),new m(4,21)),new L(22,new m(12,11),new m(4,12))),new de(14,Int32Array.from([6,26,46,66]),new L(30,new m(3,115),new m(1,116)),new L(24,new m(4,40),new m(5,41)),new L(20,new m(11,16),new m(5,17)),new L(24,new m(11,12),new m(5,13))),new de(15,Int32Array.from([6,26,48,70]),new L(22,new m(5,87),new m(1,88)),new L(24,new m(5,41),new m(5,42)),new L(30,new m(5,24),new m(7,25)),new L(24,new m(11,12),new m(7,13))),new de(16,Int32Array.from([6,26,50,74]),new L(24,new m(5,98),new m(1,99)),new L(28,new m(7,45),new m(3,46)),new L(24,new m(15,19),new m(2,20)),new L(30,new m(3,15),new m(13,16))),new de(17,Int32Array.from([6,30,54,78]),new L(28,new m(1,107),new m(5,108)),new L(28,new m(10,46),new m(1,47)),new L(28,new m(1,22),new m(15,23)),new L(28,new m(2,14),new m(17,15))),new de(18,Int32Array.from([6,30,56,82]),new L(30,new m(5,120),new m(1,121)),new L(26,new m(9,43),new m(4,44)),new L(28,new m(17,22),new m(1,23)),new L(28,new m(2,14),new m(19,15))),new de(19,Int32Array.from([6,30,58,86]),new L(28,new m(3,113),new m(4,114)),new L(26,new m(3,44),new m(11,45)),new L(26,new m(17,21),new m(4,22)),new L(26,new m(9,13),new m(16,14))),new de(20,Int32Array.from([6,34,62,90]),new L(28,new m(3,107),new m(5,108)),new L(26,new m(3,41),new m(13,42)),new L(30,new m(15,24),new m(5,25)),new L(28,new m(15,15),new m(10,16))),new de(21,Int32Array.from([6,28,50,72,94]),new L(28,new m(4,116),new m(4,117)),new L(26,new m(17,42)),new L(28,new m(17,22),new m(6,23)),new L(30,new m(19,16),new m(6,17))),new de(22,Int32Array.from([6,26,50,74,98]),new L(28,new m(2,111),new m(7,112)),new L(28,new m(17,46)),new L(30,new m(7,24),new m(16,25)),new L(24,new m(34,13))),new de(23,Int32Array.from([6,30,54,78,102]),new L(30,new m(4,121),new m(5,122)),new L(28,new m(4,47),new m(14,48)),new L(30,new m(11,24),new m(14,25)),new L(30,new m(16,15),new m(14,16))),new de(24,Int32Array.from([6,28,54,80,106]),new L(30,new m(6,117),new m(4,118)),new L(28,new m(6,45),new m(14,46)),new L(30,new m(11,24),new m(16,25)),new L(30,new m(30,16),new m(2,17))),new de(25,Int32Array.from([6,32,58,84,110]),new L(26,new m(8,106),new m(4,107)),new L(28,new m(8,47),new m(13,48)),new L(30,new m(7,24),new m(22,25)),new L(30,new m(22,15),new m(13,16))),new de(26,Int32Array.from([6,30,58,86,114]),new L(28,new m(10,114),new m(2,115)),new L(28,new m(19,46),new m(4,47)),new L(28,new m(28,22),new m(6,23)),new L(30,new m(33,16),new m(4,17))),new de(27,Int32Array.from([6,34,62,90,118]),new L(30,new m(8,122),new m(4,123)),new L(28,new m(22,45),new m(3,46)),new L(30,new m(8,23),new m(26,24)),new L(30,new m(12,15),new m(28,16))),new de(28,Int32Array.from([6,26,50,74,98,122]),new L(30,new m(3,117),new m(10,118)),new L(28,new m(3,45),new m(23,46)),new L(30,new m(4,24),new m(31,25)),new L(30,new m(11,15),new m(31,16))),new de(29,Int32Array.from([6,30,54,78,102,126]),new L(30,new m(7,116),new m(7,117)),new L(28,new m(21,45),new m(7,46)),new L(30,new m(1,23),new m(37,24)),new L(30,new m(19,15),new m(26,16))),new de(30,Int32Array.from([6,26,52,78,104,130]),new L(30,new m(5,115),new m(10,116)),new L(28,new m(19,47),new m(10,48)),new L(30,new m(15,24),new m(25,25)),new L(30,new m(23,15),new m(25,16))),new de(31,Int32Array.from([6,30,56,82,108,134]),new L(30,new m(13,115),new m(3,116)),new L(28,new m(2,46),new m(29,47)),new L(30,new m(42,24),new m(1,25)),new L(30,new m(23,15),new m(28,16))),new de(32,Int32Array.from([6,34,60,86,112,138]),new L(30,new m(17,115)),new L(28,new m(10,46),new m(23,47)),new L(30,new m(10,24),new m(35,25)),new L(30,new m(19,15),new m(35,16))),new de(33,Int32Array.from([6,30,58,86,114,142]),new L(30,new m(17,115),new m(1,116)),new L(28,new m(14,46),new m(21,47)),new L(30,new m(29,24),new m(19,25)),new L(30,new m(11,15),new m(46,16))),new de(34,Int32Array.from([6,34,62,90,118,146]),new L(30,new m(13,115),new m(6,116)),new L(28,new m(14,46),new m(23,47)),new L(30,new m(44,24),new m(7,25)),new L(30,new m(59,16),new m(1,17))),new de(35,Int32Array.from([6,30,54,78,102,126,150]),new L(30,new m(12,121),new m(7,122)),new L(28,new m(12,47),new m(26,48)),new L(30,new m(39,24),new m(14,25)),new L(30,new m(22,15),new m(41,16))),new de(36,Int32Array.from([6,24,50,76,102,128,154]),new L(30,new m(6,121),new m(14,122)),new L(28,new m(6,47),new m(34,48)),new L(30,new m(46,24),new m(10,25)),new L(30,new m(2,15),new m(64,16))),new de(37,Int32Array.from([6,28,54,80,106,132,158]),new L(30,new m(17,122),new m(4,123)),new L(28,new m(29,46),new m(14,47)),new L(30,new m(49,24),new m(10,25)),new L(30,new m(24,15),new m(46,16))),new de(38,Int32Array.from([6,32,58,84,110,136,162]),new L(30,new m(4,122),new m(18,123)),new L(28,new m(13,46),new m(32,47)),new L(30,new m(48,24),new m(14,25)),new L(30,new m(42,15),new m(32,16))),new de(39,Int32Array.from([6,26,54,82,110,138,166]),new L(30,new m(20,117),new m(4,118)),new L(28,new m(40,47),new m(7,48)),new L(30,new m(43,24),new m(22,25)),new L(30,new m(10,15),new m(67,16))),new de(40,Int32Array.from([6,30,58,86,114,142,170]),new L(30,new m(19,118),new m(6,119)),new L(28,new m(18,47),new m(31,48)),new L(30,new m(34,24),new m(34,25)),new L(30,new m(20,15),new m(61,16)))];var dt;(function(x){x[x.DATA_MASK_000=0]="DATA_MASK_000",x[x.DATA_MASK_001=1]="DATA_MASK_001",x[x.DATA_MASK_010=2]="DATA_MASK_010",x[x.DATA_MASK_011=3]="DATA_MASK_011",x[x.DATA_MASK_100=4]="DATA_MASK_100",x[x.DATA_MASK_101=5]="DATA_MASK_101",x[x.DATA_MASK_110=6]="DATA_MASK_110",x[x.DATA_MASK_111=7]="DATA_MASK_111"})(dt||(dt={}));class kt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let r=0;r<t;r++)for(let n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)}}kt.values=new Map([[dt.DATA_MASK_000,new kt(dt.DATA_MASK_000,(x,e)=>(x+e&1)===0)],[dt.DATA_MASK_001,new kt(dt.DATA_MASK_001,(x,e)=>(x&1)===0)],[dt.DATA_MASK_010,new kt(dt.DATA_MASK_010,(x,e)=>e%3===0)],[dt.DATA_MASK_011,new kt(dt.DATA_MASK_011,(x,e)=>(x+e)%3===0)],[dt.DATA_MASK_100,new kt(dt.DATA_MASK_100,(x,e)=>(Math.floor(x/2)+Math.floor(e/3)&1)===0)],[dt.DATA_MASK_101,new kt(dt.DATA_MASK_101,(x,e)=>x*e%6===0)],[dt.DATA_MASK_110,new kt(dt.DATA_MASK_110,(x,e)=>x*e%6<3)],[dt.DATA_MASK_111,new kt(dt.DATA_MASK_111,(x,e)=>(x+e+x*e%3&1)===0)]]);class Ui{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new v;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let r=0;const n=t-7;for(let i=t-1;i>=n;i--)r=this.copyBit(8,i,r);for(let i=t-8;i<t;i++)r=this.copyBit(i,8,r);if(this.parsedFormatInfo=bt.decodeFormatInformation(e,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new v}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return de.getVersionForNumber(t);let r=0;const n=e-11;for(let s=5;s>=0;s--)for(let a=e-9;a>=n;a--)r=this.copyBit(a,s,r);let i=de.decodeVersionInformation(r);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;r=0;for(let s=5;s>=0;s--)for(let a=e-9;a>=n;a--)r=this.copyBit(s,a,r);if(i=de.decodeVersionInformation(r),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new v}copyBit(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),r=kt.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const i=t.buildFunctionPattern();let s=!0;const a=new Uint8Array(t.getTotalCodewords());let o=0,l=0,h=0;for(let w=n-1;w>0;w-=2){w===6&&w--;for(let C=0;C<n;C++){const I=s?n-1-C:C;for(let y=0;y<2;y++)i.get(w-y,I)||(h++,l<<=1,this.bitMatrix.get(w-y,I)&&(l|=1),h===8&&(a[o++]=l,h=0,l=0))}s=!s}if(o!==t.getTotalCodewords())throw new v;return a}remask(){if(this.parsedFormatInfo===null)return;const e=kt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,r=e.getWidth();t<r;t++)for(let n=t+1,i=e.getHeight();n<i;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))}}class wn{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,r){if(e.length!==t.getTotalCodewords())throw new O;const n=t.getECBlocksForLevel(r);let i=0;const s=n.getECBlocks();for(const y of s)i+=y.getCount();const a=new Array(i);let o=0;for(const y of s)for(let S=0;S<y.getCount();S++){const M=y.getDataCodewords(),k=n.getECCodewordsPerBlock()+M;a[o++]=new wn(M,new Uint8Array(k))}const l=a[0].codewords.length;let h=a.length-1;for(;h>=0&&a[h].codewords.length!==l;)h--;h++;const w=l-n.getECCodewordsPerBlock();let C=0;for(let y=0;y<w;y++)for(let S=0;S<o;S++)a[S].codewords[y]=e[C++];for(let y=h;y<o;y++)a[y].codewords[w]=e[C++];const I=a[0].codewords.length;for(let y=w;y<I;y++)for(let S=0;S<o;S++){const M=S<h?y:y+1;a[S].codewords[M]=e[C++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ft;(function(x){x[x.TERMINATOR=0]="TERMINATOR",x[x.NUMERIC=1]="NUMERIC",x[x.ALPHANUMERIC=2]="ALPHANUMERIC",x[x.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",x[x.BYTE=4]="BYTE",x[x.ECI=5]="ECI",x[x.KANJI=6]="KANJI",x[x.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",x[x.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",x[x.HANZI=9]="HANZI"})(Ft||(Ft={}));class xe{constructor(e,t,r,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=n,xe.FOR_BITS.set(n,this),xe.FOR_VALUE.set(e,this)}static forBits(e){const t=xe.FOR_BITS.get(e);if(t===void 0)throw new O;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof xe))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}xe.FOR_BITS=new Map,xe.FOR_VALUE=new Map,xe.TERMINATOR=new xe(Ft.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),xe.NUMERIC=new xe(Ft.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),xe.ALPHANUMERIC=new xe(Ft.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),xe.STRUCTURED_APPEND=new xe(Ft.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),xe.BYTE=new xe(Ft.BYTE,"BYTE",Int32Array.from([8,16,16]),4),xe.ECI=new xe(Ft.ECI,"ECI",Int32Array.from([0,0,0]),7),xe.KANJI=new xe(Ft.KANJI,"KANJI",Int32Array.from([8,10,12]),8),xe.FNC1_FIRST_POSITION=new xe(Ft.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),xe.FNC1_SECOND_POSITION=new xe(Ft.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),xe.HANZI=new xe(Ft.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Qe{static decode(e,t,r,n){const i=new xn(e);let s=new H;const a=new Array;let o=-1,l=-1;try{let h=null,w=!1,C;do{if(i.available()<4)C=xe.TERMINATOR;else{const I=i.readBits(4);C=xe.forBits(I)}switch(C){case xe.TERMINATOR:break;case xe.FNC1_FIRST_POSITION:case xe.FNC1_SECOND_POSITION:w=!0;break;case xe.STRUCTURED_APPEND:if(i.available()<16)throw new v;o=i.readBits(8),l=i.readBits(8);break;case xe.ECI:const I=Qe.parseECIValue(i);if(h=R.getCharacterSetECIByValue(I),h===null)throw new v;break;case xe.HANZI:const y=i.readBits(4),S=i.readBits(C.getCharacterCountBits(t));y===Qe.GB2312_SUBSET&&Qe.decodeHanziSegment(i,s,S);break;default:const M=i.readBits(C.getCharacterCountBits(t));switch(C){case xe.NUMERIC:Qe.decodeNumericSegment(i,s,M);break;case xe.ALPHANUMERIC:Qe.decodeAlphanumericSegment(i,s,M,w);break;case xe.BYTE:Qe.decodeByteSegment(i,s,M,h,a,n);break;case xe.KANJI:Qe.decodeKanjiSegment(i,s,M);break;default:throw new v}break}}while(C!==xe.TERMINATOR)}catch{throw new v}return new W(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),o,l)}static decodeHanziSegment(e,t,r){if(r*13>e.available())throw new v;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const s=e.readBits(13);let a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,n[i]=a>>8&255,n[i+1]=a&255,i+=2,r--}try{t.append(B.decode(n,_.GB2312))}catch(s){throw new v(s)}}static decodeKanjiSegment(e,t,r){if(r*13>e.available())throw new v;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const s=e.readBits(13);let a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,n[i]=a>>8,n[i+1]=a,i+=2,r--}try{t.append(B.decode(n,_.SHIFT_JIS))}catch(s){throw new v(s)}}static decodeByteSegment(e,t,r,n,i,s){if(8*r>e.available())throw new v;const a=new Uint8Array(r);for(let l=0;l<r;l++)a[l]=e.readBits(8);let o;n===null?o=_.guessEncoding(a,s):o=n.getName();try{t.append(B.decode(a,o))}catch(l){throw new v(l)}i.push(a)}static toAlphaNumericChar(e){if(e>=Qe.ALPHANUMERIC_CHARS.length)throw new v;return Qe.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,r,n){const i=t.length();for(;r>1;){if(e.available()<11)throw new v;const s=e.readBits(11);t.append(Qe.toAlphaNumericChar(Math.floor(s/45))),t.append(Qe.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new v;t.append(Qe.toAlphaNumericChar(e.readBits(6)))}if(n)for(let s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,r){for(;r>=3;){if(e.available()<10)throw new v;const n=e.readBits(10);if(n>=1e3)throw new v;t.append(Qe.toAlphaNumericChar(Math.floor(n/100))),t.append(Qe.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(Qe.toAlphaNumericChar(n%10)),r-=3}if(r===2){if(e.available()<7)throw new v;const n=e.readBits(7);if(n>=100)throw new v;t.append(Qe.toAlphaNumericChar(Math.floor(n/10))),t.append(Qe.toAlphaNumericChar(n%10))}else if(r===1){if(e.available()<4)throw new v;const n=e.readBits(4);if(n>=10)throw new v;t.append(Qe.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){const r=e.readBits(16);return(t&31)<<16&4294967295|r}throw new v}}Qe.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Qe.GB2312_SUBSET=1;class Wn{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Vi{constructor(){this.rsDecoder=new Me(K.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Y.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const r=new Ui(e);let n=null;try{return this.decodeBitMatrixParser(r,t)}catch(i){n=i}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const i=this.decodeBitMatrixParser(r,t);return i.setOther(new Wn(!0)),i}catch(i){throw n!==null?n:i}}decodeBitMatrixParser(e,t){const r=e.readVersion(),n=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=wn.getDataBlocks(i,r,n);let a=0;for(const h of s)a+=h.getNumDataCodewords();const o=new Uint8Array(a);let l=0;for(const h of s){const w=h.getCodewords(),C=h.getNumDataCodewords();this.correctErrors(w,C);for(let I=0;I<C;I++)o[l++]=w[I]}return Qe.decode(o,r,n,t)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new J}for(let n=0;n<t;n++)e[n]=r[n]}}class An extends ce{constructor(e,t,r){super(e,t),this.estimatedModuleSize=r}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const n=Math.abs(e-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+r)/2;return new An(n,i,s)}}class zr{constructor(e,t,r,n,i,s,a){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=i,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,r=this.width,n=e+r,i=this.startY+t/2,s=new Int32Array(3),a=this.image;for(let o=0;o<t;o++){const l=i+(o&1?-Math.floor((o+1)/2):Math.floor((o+1)/2));s[0]=0,s[1]=0,s[2]=0;let h=e;for(;h<n&&!a.get(h,l);)h++;let w=0;for(;h<n;){if(a.get(h,l))if(w===1)s[1]++;else if(w===2){if(this.foundPatternCross(s)){const C=this.handlePossibleCenter(s,l,h);if(C!==null)return C}s[0]=s[2],s[1]=1,s[2]=0,w=1}else s[++w]++;else w===1&&w++,s[w]++;h++}if(this.foundPatternCross(s)){const C=this.handlePossibleCenter(s,l,n);if(C!==null)return C}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new T}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,r=t/2;for(let n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0}crossCheckVertical(e,t,r,n){const i=this.image,s=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let o=e;for(;o>=0&&i.get(t,o)&&a[1]<=r;)a[1]++,o--;if(o<0||a[1]>r)return NaN;for(;o>=0&&!i.get(t,o)&&a[0]<=r;)a[0]++,o--;if(a[0]>r)return NaN;for(o=e+1;o<s&&i.get(t,o)&&a[1]<=r;)a[1]++,o++;if(o===s||a[1]>r)return NaN;for(;o<s&&!i.get(t,o)&&a[2]<=r;)a[2]++,o++;if(a[2]>r)return NaN;const l=a[0]+a[1]+a[2];return 5*Math.abs(l-n)>=2*n?NaN:this.foundPatternCross(a)?zr.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,r){const n=e[0]+e[1]+e[2],i=zr.centerFromEnd(e,r),s=this.crossCheckVertical(t,i,2*e[1],n);if(!isNaN(s)){const a=(e[0]+e[1]+e[2])/3;for(const l of this.possibleCenters)if(l.aboutEquals(a,s,i))return l.combineEstimate(s,i,a);const o=new An(i,s,a);this.possibleCenters.push(o),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(o)}return null}}class En extends ce{constructor(e,t,r,n){super(e,t),this.estimatedModuleSize=r,this.count=n,n===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const n=Math.abs(e-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=this.count+1,i=(this.count*this.getX()+t)/n,s=(this.count*this.getY()+e)/n,a=(this.count*this.estimatedModuleSize+r)/n;return new En(i,s,a,n)}}class Gi{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class gt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(q.TRY_HARDER)!==void 0,r=e!=null&&e.get(q.PURE_BARCODE)!==void 0,n=this.image,i=n.getHeight(),s=n.getWidth();let a=Math.floor(3*i/(4*gt.MAX_MODULES));(a<gt.MIN_SKIP||t)&&(a=gt.MIN_SKIP);let o=!1;const l=new Int32Array(5);for(let w=a-1;w<i&&!o;w+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let C=0;for(let I=0;I<s;I++)if(n.get(I,w))(C&1)===1&&C++,l[C]++;else if(C&1)l[C]++;else if(C===4)if(gt.foundPatternCross(l)){if(this.handlePossibleCenter(l,w,I,r)===!0)if(a=2,this.hasSkipped===!0)o=this.haveMultiplyConfirmedCenters();else{const S=this.findRowSkip();S>l[2]&&(w+=S-l[2]-a,I=s-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,C=3;continue}C=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,C=3;else l[++C]++;gt.foundPatternCross(l)&&this.handlePossibleCenter(l,w,s,r)===!0&&(a=l[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}const h=this.selectBestPatterns();return ce.orderBestPatterns(h),new Gi(h)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const s=e[i];if(s===0)return!1;t+=s}if(t<7)return!1;const r=t/7,n=r/2;return Math.abs(r-e[0])<n&&Math.abs(r-e[1])<n&&Math.abs(3*r-e[2])<3*n&&Math.abs(r-e[3])<n&&Math.abs(r-e[4])<n}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,r,n){const i=this.getCrossCheckStateCount();let s=0;const a=this.image;for(;e>=s&&t>=s&&a.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&i[1]<=r;)i[1]++,s++;if(e<s||t<s||i[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&i[0]<=r;)i[0]++,s++;if(i[0]>r)return!1;const o=a.getHeight(),l=a.getWidth();for(s=1;e+s<o&&t+s<l&&a.get(t+s,e+s);)i[2]++,s++;if(e+s>=o||t+s>=l)return!1;for(;e+s<o&&t+s<l&&!a.get(t+s,e+s)&&i[3]<r;)i[3]++,s++;if(e+s>=o||t+s>=l||i[3]>=r)return!1;for(;e+s<o&&t+s<l&&a.get(t+s,e+s)&&i[4]<r;)i[4]++,s++;if(i[4]>=r)return!1;const h=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(h-n)<2*n&&gt.foundPatternCross(i)}crossCheckVertical(e,t,r,n){const i=this.image,s=i.getHeight(),a=this.getCrossCheckStateCount();let o=e;for(;o>=0&&i.get(t,o);)a[2]++,o--;if(o<0)return NaN;for(;o>=0&&!i.get(t,o)&&a[1]<=r;)a[1]++,o--;if(o<0||a[1]>r)return NaN;for(;o>=0&&i.get(t,o)&&a[0]<=r;)a[0]++,o--;if(a[0]>r)return NaN;for(o=e+1;o<s&&i.get(t,o);)a[2]++,o++;if(o===s)return NaN;for(;o<s&&!i.get(t,o)&&a[3]<r;)a[3]++,o++;if(o===s||a[3]>=r)return NaN;for(;o<s&&i.get(t,o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-n)>=2*n?NaN:gt.foundPatternCross(a)?gt.centerFromEnd(a,o):NaN}crossCheckHorizontal(e,t,r,n){const i=this.image,s=i.getWidth(),a=this.getCrossCheckStateCount();let o=e;for(;o>=0&&i.get(o,t);)a[2]++,o--;if(o<0)return NaN;for(;o>=0&&!i.get(o,t)&&a[1]<=r;)a[1]++,o--;if(o<0||a[1]>r)return NaN;for(;o>=0&&i.get(o,t)&&a[0]<=r;)a[0]++,o--;if(a[0]>r)return NaN;for(o=e+1;o<s&&i.get(o,t);)a[2]++,o++;if(o===s)return NaN;for(;o<s&&!i.get(o,t)&&a[3]<r;)a[3]++,o++;if(o===s||a[3]>=r)return NaN;for(;o<s&&i.get(o,t)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-n)>=n?NaN:gt.foundPatternCross(a)?gt.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,r,n){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=gt.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],i),!isNaN(s)&&(!n||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],i)))){const o=i/7;let l=!1;const h=this.possibleCenters;for(let w=0,C=h.length;w<C;w++){const I=h[w];if(I.aboutEquals(o,a,s)){h[w]=I.combineEstimate(a,s,o),l=!0;break}}if(!l){const w=new En(s,a,o);h.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const r of this.possibleCenters)if(r.getCount()>=gt.CENTER_QUORUM)if(t==null)t=r;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-r.getX())-Math.abs(t.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const r=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=gt.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const n=t/r;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-n);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new T;const t=this.possibleCenters;let r;if(e>3){let n=0,i=0;for(const o of this.possibleCenters){const l=o.getEstimatedModuleSize();n+=l,i+=l*l}r=n/e;let s=Math.sqrt(i/e-r*r);t.sort((o,l)=>{const h=Math.abs(l.getEstimatedModuleSize()-r),w=Math.abs(o.getEstimatedModuleSize()-r);return h<w?-1:h>w?1:0});const a=Math.max(.2*r,s);for(let o=0;o<t.length&&t.length>3;o++){const l=t[o];Math.abs(l.getEstimatedModuleSize()-r)>a&&(t.splice(o,1),o--)}}if(t.length>3){let n=0;for(const i of t)n+=i.getEstimatedModuleSize();r=n/t.length,t.sort((i,s)=>{if(s.getCount()===i.getCount()){const a=Math.abs(s.getEstimatedModuleSize()-r),o=Math.abs(i.getEstimatedModuleSize()-r);return a<o?1:a>o?-1:0}else return s.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}gt.CENTER_QUORUM=2,gt.MIN_SKIP=3,gt.MAX_MODULES=57;class Dr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(q.NEED_RESULT_POINT_CALLBACK);const r=new gt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){const t=e.getTopLeft(),r=e.getTopRight(),n=e.getBottomLeft(),i=this.calculateModuleSize(t,r,n);if(i<1)throw new T("No pattern found in proccess finder.");const s=Dr.computeDimension(t,r,n,i),a=de.getProvisionalVersionForDimension(s),o=a.getDimensionForVersion()-7;let l=null;if(a.getAlignmentPatternCenters().length>0){const I=r.getX()-t.getX()+n.getX(),y=r.getY()-t.getY()+n.getY(),S=1-3/o,M=Math.floor(t.getX()+S*(I-t.getX())),k=Math.floor(t.getY()+S*(y-t.getY()));for(let Q=4;Q<=16;Q<<=1)try{l=this.findAlignmentInRegion(i,M,k,Q);break}catch($){if(!($ instanceof T))throw $}}const h=Dr.createTransform(t,r,n,l,s),w=Dr.sampleGrid(this.image,h,s);let C;return l===null?C=[n,t,r]:C=[n,t,r,l],new cr(w,C)}static createTransform(e,t,r,n,i){const s=i-3.5;let a,o,l,h;return n!==null?(a=n.getX(),o=n.getY(),l=s-3,h=l):(a=t.getX()-e.getX()+r.getX(),o=t.getY()-e.getY()+r.getY(),l=s,h=s),Gt.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,h,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,o,r.getX(),r.getY())}static sampleGrid(e,t,r){return rr.getInstance().sampleGridWithTransform(e,r,r,t)}static computeDimension(e,t,r,n){const i=Ce.round(ce.distance(e,t)/n),s=Ce.round(ce.distance(e,r)/n);let a=Math.floor((i+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new T("Dimensions could be not found.")}return a}calculateModuleSize(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,t){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,r,n){let i=this.sizeOfBlackWhiteBlackRun(e,t,r,n),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let o=Math.floor(t-(n-t)*s);return s=1,o<0?(s=t/(t-o),o=0):o>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,a,o),i-1}sizeOfBlackWhiteBlackRun(e,t,r,n){const i=Math.abs(n-t)>Math.abs(r-e);if(i){let I=e;e=t,t=I,I=r,r=n,n=I}const s=Math.abs(r-e),a=Math.abs(n-t);let o=-s/2;const l=e<r?1:-1,h=t<n?1:-1;let w=0;const C=r+l;for(let I=e,y=t;I!==C;I+=l){const S=i?y:I,M=i?I:y;if(w===1===this.image.get(S,M)){if(w===2)return Ce.distance(I,y,e,t);w++}if(o+=a,o>0){if(y===n)break;y+=h,o-=s}}return w===2?Ce.distance(r+l,n,e,t):NaN}findAlignmentInRegion(e,t,r,n){const i=Math.floor(n*e),s=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-s<e*3)throw new T("Alignment top exceeds estimated module size.");const o=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-o<e*3)throw new T("Alignment bottom exceeds estimated module size.");return new zr(this.image,s,o,a-s,l-o,e,this.resultPointCallback).find()}}class ar{constructor(){this.decoder=new Vi}getDecoder(){return this.decoder}decode(e,t){let r,n;if(t!=null&&t.get(q.PURE_BARCODE)!==void 0){const o=ar.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),n=ar.NO_POINTS}else{const o=new Dr(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),n=o.getPoints()}r.getOther()instanceof Wn&&r.getOther().applyMirroredCorrection(n);const i=new $e(r.getText(),r.getRawBytes(),void 0,n,ue.QR_CODE,void 0),s=r.getByteSegments();s!==null&&i.putMetadata(U.BYTE_SEGMENTS,s);const a=r.getECLevel();return a!==null&&i.putMetadata(U.ERROR_CORRECTION_LEVEL,a),r.hasStructuredAppend()&&(i.putMetadata(U.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),i.putMetadata(U.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new T;const n=this.moduleSize(t,e);let i=t[1],s=r[1],a=t[0],o=r[0];if(a>=o||i>=s)throw new T;if(s-i!==o-a&&(o=a+(s-i),o>=e.getWidth()))throw new T;const l=Math.round((o-a+1)/n),h=Math.round((s-i+1)/n);if(l<=0||h<=0)throw new T;if(h!==l)throw new T;const w=Math.floor(n/2);i+=w,a+=w;const C=a+Math.floor((l-1)*n)-o;if(C>0){if(C>w)throw new T;a-=C}const I=i+Math.floor((h-1)*n)-s;if(I>0){if(I>w)throw new T;i-=I}const y=new Y(l,h);for(let S=0;S<h;S++){const M=i+Math.floor(S*n);for(let k=0;k<l;k++)e.get(a+Math.floor(k*n),M)&&y.set(k,S)}return y}static moduleSize(e,t){const r=t.getHeight(),n=t.getWidth();let i=e[0],s=e[1],a=!0,o=0;for(;i<n&&s<r;){if(a!==t.get(i,s)){if(++o===5)break;a=!a}i++,s++}if(i===n||s===r)throw new T;return(i-e[0])/7}}ar.NO_POINTS=new Array;class Ee{PDF417Common(){}static getBitCountSum(e){return Ce.sum(e)}static toIntArray(e){if(e==null||!e.length)return Ee.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let r=0;for(const n of e)t[r++]=n;return t}static getCodeword(e){const t=me.binarySearch(Ee.SYMBOL_TABLE,e&262143);return t<0?-1:(Ee.CODEWORD_TABLE[t]-1)%Ee.NUMBER_OF_CODEWORDS}}Ee.NUMBER_OF_CODEWORDS=929,Ee.MAX_CODEWORDS_IN_BARCODE=Ee.NUMBER_OF_CODEWORDS-1,Ee.MIN_ROWS_IN_BARCODE=3,Ee.MAX_ROWS_IN_BARCODE=90,Ee.MODULES_IN_CODEWORD=17,Ee.MODULES_IN_STOP_PATTERN=18,Ee.BARS_IN_MODULE=8,Ee.EMPTY_INT_ARRAY=new Int32Array([]),Ee.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ee.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Hi{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class be{static detectMultiple(e,t,r){let n=e.getBlackMatrix(),i=be.detect(r,n);return i.length||(n=n.clone(),n.rotate180(),i=be.detect(r,n)),new Hi(n,i)}static detect(e,t){const r=new Array;let n=0,i=0,s=!1;for(;n<t.getHeight();){const a=be.findVertices(t,n,i);if(a[0]==null&&a[3]==null){if(!s)break;s=!1,i=0;for(const o of r)o[1]!=null&&(n=Math.trunc(Math.max(n,o[1].getY()))),o[3]!=null&&(n=Math.max(n,Math.trunc(o[3].getY())));n+=be.ROW_STEP;continue}if(s=!0,r.push(a),!e)break;a[2]!=null?(i=Math.trunc(a[2].getX()),n=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY()))}return r}static findVertices(e,t,r){const n=e.getHeight(),i=e.getWidth(),s=new Array(8);return be.copyToResult(s,be.findRowsWithPattern(e,n,i,t,r,be.START_PATTERN),be.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),be.copyToResult(s,be.findRowsWithPattern(e,n,i,t,r,be.STOP_PATTERN),be.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,r){for(let n=0;n<r.length;n++)e[r[n]]=t[n]}static findRowsWithPattern(e,t,r,n,i,s){const a=new Array(4);let o=!1;const l=new Int32Array(s.length);for(;n<t;n+=be.ROW_STEP){let w=be.findGuardPattern(e,i,n,r,!1,s,l);if(w!=null){for(;n>0;){const C=be.findGuardPattern(e,i,--n,r,!1,s,l);if(C!=null)w=C;else{n++;break}}a[0]=new ce(w[0],n),a[1]=new ce(w[1],n),o=!0;break}}let h=n+1;if(o){let w=0,C=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;h<t;h++){const I=be.findGuardPattern(e,C[0],h,r,!1,s,l);if(I!=null&&Math.abs(C[0]-I[0])<be.MAX_PATTERN_DRIFT&&Math.abs(C[1]-I[1])<be.MAX_PATTERN_DRIFT)C=I,w=0;else{if(w>be.SKIPPED_ROW_COUNT_MAX)break;w++}}h-=w+1,a[2]=new ce(C[0],h),a[3]=new ce(C[1],h)}return h-n<be.BARCODE_MIN_HEIGHT&&me.fill(a,null),a}static findGuardPattern(e,t,r,n,i,s,a){me.fillWithin(a,0,a.length,0);let o=t,l=0;for(;e.get(o,r)&&o>0&&l++<be.MAX_PIXEL_DRIFT;)o--;let h=o,w=0,C=s.length;for(let I=i;h<n;h++)if(e.get(h,r)!==I)a[w]++;else{if(w===C-1){if(be.patternMatchVariance(a,s,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE)return new Int32Array([o,h]);o+=a[0]+a[1],le.arraycopy(a,2,a,0,w-1),a[w-1]=0,a[w]=0,w--}else w++;a[w]=1,I=!I}return w===C-1&&be.patternMatchVariance(a,s,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE?new Int32Array([o,h-1]):null}static patternMatchVariance(e,t,r){let n=e.length,i=0,s=0;for(let l=0;l<n;l++)i+=e[l],s+=t[l];if(i<s)return 1/0;let a=i/s;r*=a;let o=0;for(let l=0;l<n;l++){let h=e[l],w=t[l]*a,C=h>w?h-w:w-h;if(C>r)return 1/0;o+=C}return o/i}}be.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),be.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),be.MAX_AVG_VARIANCE=.42,be.MAX_INDIVIDUAL_VARIANCE=.8,be.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),be.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),be.MAX_PIXEL_DRIFT=3,be.MAX_PATTERN_DRIFT=5,be.SKIPPED_ROW_COUNT_MAX=25,be.ROW_STEP=5,be.BARCODE_MIN_HEIGHT=10;class Ct{constructor(e,t){if(t.length===0)throw new O;this.field=e;let r=t.length;if(r>1&&t[0]===0){let n=1;for(;n<r&&t[n]===0;)n++;n===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-n),le.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let n=0;for(let i of this.coefficients)n=this.field.add(n,i);return n}let t=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)t=this.field.add(this.field.multiply(e,t),this.coefficients[n]);return t}add(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let s=t;t=r,r=s}let n=new Int32Array(r.length),i=r.length-t.length;le.arraycopy(r,0,n,0,i);for(let s=i;s<r.length;s++)n[s]=this.field.add(t[s-i],r[s]);return new Ct(this.field,n)}subtract(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Ct?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Ct(this.field,new Int32Array([0]));let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,s=new Int32Array(r+i-1);for(let a=0;a<r;a++){let o=t[a];for(let l=0;l<i;l++)s[a+l]=this.field.add(s[a+l],this.field.multiply(o,n[l]))}return new Ct(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new Ct(this.field,t)}multiplyScalar(e){if(e===0)return new Ct(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new Ct(this.field,r)}multiplyByMonomial(e,t){if(e<0)throw new O;if(t===0)return new Ct(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+e);for(let i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new Ct(this.field,n)}toString(){let e=new H;for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Wi{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new O;return this.logTable[e]}inverse(e){if(e===0)throw new z;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Cn extends Wi{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let n=0;n<e;n++)this.expTable[n]=r,r=r*t%e;for(let n=0;n<e-1;n++)this.logTable[this.expTable[n]]=n;this.zero=new Ct(this,new Int32Array([0])),this.one=new Ct(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new O;if(t===0)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new Ct(this,r)}}Cn.PDF417_GF=new Cn(Ee.NUMBER_OF_CODEWORDS,3);class Xn{constructor(){this.field=Cn.PDF417_GF}decode(e,t,r){let n=new Ct(this.field,e),i=new Int32Array(t),s=!1;for(let y=t;y>0;y--){let S=n.evaluateAt(this.field.exp(y));i[t-y]=S,S!==0&&(s=!0)}if(!s)return 0;let a=this.field.getOne();if(r!=null)for(const y of r){let S=this.field.exp(e.length-1-y),M=new Ct(this.field,new Int32Array([this.field.subtract(0,S),1]));a=a.multiply(M)}let o=new Ct(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),h=l[0],w=l[1],C=this.findErrorLocations(h),I=this.findErrorMagnitudes(w,h,C);for(let y=0;y<C.length;y++){let S=e.length-1-this.field.log(C[y]);if(S<0)throw J.getChecksumInstance();e[S]=this.field.subtract(e[S],I[y])}return C.length}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let C=e;e=t,t=C}let n=e,i=t,s=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(r/2);){let C=n,I=s;if(n=i,s=a,n.isZero())throw J.getChecksumInstance();i=C;let y=this.field.getZero(),S=n.getCoefficient(n.getDegree()),M=this.field.inverse(S);for(;i.getDegree()>=n.getDegree()&&!i.isZero();){let k=i.getDegree()-n.getDegree(),Q=this.field.multiply(i.getCoefficient(i.getDegree()),M);y=y.add(this.field.buildMonomial(k,Q)),i=i.subtract(n.multiplyByMonomial(k,Q))}a=y.multiply(s).subtract(I).negative()}let o=a.getCoefficient(0);if(o===0)throw J.getChecksumInstance();let l=this.field.inverse(o),h=a.multiply(l),w=i.multiply(l);return[h,w]}findErrorLocations(e){let t=e.getDegree(),r=new Int32Array(t),n=0;for(let i=1;i<this.field.getSize()&&n<t;i++)e.evaluateAt(i)===0&&(r[n]=this.field.inverse(i),n++);if(n!==t)throw J.getChecksumInstance();return r}findErrorMagnitudes(e,t,r){let n=t.getDegree(),i=new Int32Array(n);for(let l=1;l<=n;l++)i[n-l]=this.field.multiply(l,t.getCoefficient(l));let s=new Ct(this.field,i),a=r.length,o=new Int32Array(a);for(let l=0;l<a;l++){let h=this.field.inverse(r[l]),w=this.field.subtract(0,e.evaluateAt(h)),C=this.field.inverse(s.evaluateAt(h));o[l]=this.field.multiply(w,C)}return o}}class dr{constructor(e,t,r,n,i){e instanceof dr?this.constructor_2(e):this.constructor_1(e,t,r,n,i)}constructor_1(e,t,r,n,i){const s=t==null||r==null,a=n==null||i==null;if(s&&a)throw new T;s?(t=new ce(0,n.getY()),r=new ce(0,i.getY())):a&&(n=new ce(e.getWidth()-1,t.getY()),i=new ce(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new dr(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,r){let n=this.topLeft,i=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){let o=r?this.topLeft:this.topRight,l=Math.trunc(o.getY()-e);l<0&&(l=0);let h=new ce(o.getX(),l);r?n=h:s=h}if(t>0){let o=r?this.bottomLeft:this.bottomRight,l=Math.trunc(o.getY()+t);l>=this.image.getHeight()&&(l=this.image.getHeight()-1);let h=new ce(o.getX(),l);r?i=h:a=h}return new dr(this.image,n,i,s,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xi{constructor(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Mr{constructor(){this.buffer=""}static form(e,t){let r=-1;function n(s,a,o,l,h,w){if(s==="%%")return"%";if(t[++r]===void 0)return;s=l?parseInt(l.substr(1)):void 0;let C=h?parseInt(h.substr(1)):void 0,I;switch(w){case"s":I=t[r];break;case"c":I=t[r][0];break;case"f":I=parseFloat(t[r]).toFixed(s);break;case"p":I=parseFloat(t[r]).toPrecision(s);break;case"e":I=parseFloat(t[r]).toExponential(s);break;case"x":I=parseInt(t[r]).toString(C||16);break;case"d":I=parseFloat(parseInt(t[r],C||10).toPrecision(s)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(C);let y=parseInt(o),S=o&&o[0]+""=="0"?"0":" ";for(;I.length<y;)I=a!==void 0?I+S:S+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,n)}format(e,...t){this.buffer+=Mr.form(e,t)}toString(){return this.buffer}}class Br{constructor(e){this.boundingBox=new dr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let r=1;r<Br.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(e)-r;if(n>=0&&(t=this.codewords[n],t!=null)||(n=this.imageRowToCodewordIndex(e)+r,n<this.codewords.length&&(t=this.codewords[n],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Mr;let t=0;for(const r of this.codewords){if(r==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,r.getRowNumber(),r.getValue())}return e.toString()}}Br.MAX_NEARBY_DISTANCE=5;class Lr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[r,n]of this.values.entries()){const i={getKey:()=>r,getValue:()=>n};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Ee.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Yn extends Br{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=-1,l=1,h=0;for(let w=s;w<a;w++){if(t[w]==null)continue;let C=t[w],I=C.getRowNumber()-o;if(I===0)h++;else if(I===1)l=Math.max(l,h),h=1,o=C.getRowNumber();else if(I<0||C.getRowNumber()>=e.getRowCount()||I>w)t[w]=null;else{let y;l>2?y=(l-2)*I:y=I;let S=y>=w;for(let M=1;M<=y&&!S;M++)S=t[w-M]!=null;S?t[w]=null:(o=C.getRowNumber(),h=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(r!=null){let n=r.getRowNumber();if(n>=t.length)continue;t[n]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),o=-1;for(let l=i;l<s;l++){if(a[l]==null)continue;let h=a[l];h.setRowNumberAsRowIndicatorColumn();let w=h.getRowNumber()-o;w===0||(w===1?o=h.getRowNumber():h.getRowNumber()>=e.getRowCount()?a[l]=null:o=h.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Lr,r=new Lr,n=new Lr,i=new Lr;for(let a of e){if(a==null)continue;a.setRowNumberAsRowIndicatorColumn();let o=a.getValue()%30,l=a.getRowNumber();switch(this._isLeft||(l+=2),l%3){case 0:r.setValue(o*3+1);break;case 1:i.setValue(o/3),n.setValue(o%3);break;case 2:t.setValue(o+1);break}}if(t.getValue().length===0||r.getValue().length===0||n.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<Ee.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>Ee.MAX_ROWS_IN_BARCODE)return null;let s=new Xi(t.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(e[r]==null)continue;let i=n.getValue()%30,s=n.getRowNumber();if(s>t.getRowCount()){e[r]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[r]=null);break;case 2:i+1!==t.getColumnCount()&&(e[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Pr{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Ee.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let r=this.detectionResultColumns[t].getCodewords();for(let n=0;n<r.length;n++)r[n]!=null&&(r[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(let n=1;n<=this.barcodeColumnCount;n++){let i=this.detectionResultColumns[n].getCodewords()[r];i!=null&&(i.setRowNumber(e[r].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++){if(t[r]==null)continue;let n=t[r].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(i=Pr.adjustRowNumberIfValid(n,i,a),a.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let r=0;r<t.length;r++){if(t[r]==null)continue;let n=t[r].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(i=Pr.adjustRowNumberIfValid(n,i,a),a.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,r){if(!this.detectionResultColumns[e-1])return;let n=r[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;this.detectionResultColumns[e+1]!=null&&(s=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=i[t],a[3]=s[t],t>0&&(a[0]=r[t-1],a[4]=i[t-1],a[5]=s[t-1]),t>1&&(a[8]=r[t-2],a[10]=i[t-2],a[11]=s[t-2]),t<r.length-1&&(a[1]=r[t+1],a[6]=i[t+1],a[7]=s[t+1]),t<r.length-2&&(a[9]=r[t+2],a[12]=i[t+2],a[13]=s[t+2]);for(let o of a)if(Pr.adjustRowNumber(n,o))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Mr;for(let r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(let n=0;n<this.barcodeColumnCount+2;n++){if(this.detectionResultColumns[n]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[n].getCodewords()[r];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class kr{constructor(e,t,r,n){this.rowNumber=kr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==kr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}kr.BARCODE_ROW_UNKNOWN=-1;class Nt{static initialize(){for(let e=0;e<Ee.SYMBOL_TABLE.length;e++){let t=Ee.SYMBOL_TABLE[e],r=t&1;for(let n=0;n<Ee.BARS_IN_MODULE;n++){let i=0;for(;(t&1)===r;)i+=1,t>>=1;r=t&1,Nt.RATIOS_TABLE[e]||(Nt.RATIOS_TABLE[e]=new Array(Ee.BARS_IN_MODULE)),Nt.RATIOS_TABLE[e][Ee.BARS_IN_MODULE-n-1]=Math.fround(i/Ee.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=Nt.getDecodedCodewordValue(Nt.sampleBitCounts(e));return t!==-1?t:Nt.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=Ce.sum(e),r=new Int32Array(Ee.BARS_IN_MODULE),n=0,i=0;for(let s=0;s<Ee.MODULES_IN_CODEWORD;s++){let a=t/(2*Ee.MODULES_IN_CODEWORD)+s*t/Ee.MODULES_IN_CODEWORD;i+e[n]<=a&&(i+=e[n],n++),r[n]++}return r}static getDecodedCodewordValue(e){let t=Nt.getBitValue(e);return Ee.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let r=0;r<e.length;r++)for(let n=0;n<e[r];n++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=Ce.sum(e),r=new Array(Ee.BARS_IN_MODULE);if(t>1)for(let s=0;s<r.length;s++)r[s]=Math.fround(e[s]/t);let n=Et.MAX_VALUE,i=-1;this.bSymbolTableReady||Nt.initialize();for(let s=0;s<Nt.RATIOS_TABLE.length;s++){let a=0,o=Nt.RATIOS_TABLE[s];for(let l=0;l<Ee.BARS_IN_MODULE;l++){let h=Math.fround(o[l]-r[l]);if(a+=Math.fround(h*h),a>=n)break}a<n&&(n=a,i=Ee.SYMBOL_TABLE[s])}return i}}Nt.bSymbolTableReady=!1,Nt.RATIOS_TABLE=new Array(Ee.SYMBOL_TABLE.length).map(x=>new Array(Ee.BARS_IN_MODULE));class Zn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class zn{static parseLong(e,t=void 0){return parseInt(e,t)}}class Kn extends A{}Kn.kind="NullPointerException";class Yi{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,r){if(e==null)throw new Kn;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Xe;if(r===0)return;for(let n=0;n<r;n++)this.write(e[t+n])}flush(){}close(){}}class Zi extends A{}class zi extends Yi{constructor(e=32){if(super(),this.count=0,e<0)throw new O("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let r=this.buf.length<<1;if(r-e<0&&(r=e),r<0){if(e<0)throw new Zi;r=we.MAX_VALUE}this.buf=me.copyOfUint8Array(this.buf,r)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new Xe;this.ensureCapacity(this.count+r),le.arraycopy(e,t,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return me.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ve;(function(x){x[x.ALPHA=0]="ALPHA",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.PUNCT=3]="PUNCT",x[x.ALPHA_SHIFT=4]="ALPHA_SHIFT",x[x.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ve||(Ve={}));function jn(){if(typeof window<"u")return window.BigInt||null;if(typeof Vr<"u")return Vr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Kr;function or(x){if(typeof Kr>"u"&&(Kr=jn()),Kr===null)throw new Error("BigInt is not supported!");return Kr(x)}function Ki(){let x=[];x[0]=or(1);let e=or(900);x[1]=e;for(let t=2;t<16;t++)x[t]=x[t-1]*e;return x}class P{static decode(e,t){let r=new H(""),n=R.ISO8859_1;r.enableDecoding(n);let i=1,s=e[i++],a=new Zn;for(;i<e[0];){switch(s){case P.TEXT_COMPACTION_MODE_LATCH:i=P.textCompaction(e,i,r);break;case P.BYTE_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:i=P.byteCompaction(s,e,n,i,r);break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[i++]);break;case P.NUMERIC_COMPACTION_MODE_LATCH:i=P.numericCompaction(e,i,r);break;case P.ECI_CHARSET:R.getCharacterSetECIByValue(e[i++]);break;case P.ECI_GENERAL_PURPOSE:i+=2;break;case P.ECI_USER_DEFINED:i++;break;case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=P.decodeMacroBlock(e,i,a);break;case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:throw new v;default:i--,i=P.textCompaction(e,i,r);break}if(i<e.length)s=e[i++];else throw v.getFormatInstance()}if(r.length()===0)throw v.getFormatInstance();let o=new W(null,r.toString(),null,t);return o.setOther(a),o}static decodeMacroBlock(e,t,r){if(t+P.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw v.getFormatInstance();let n=new Int32Array(P.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<P.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)n[a]=e[t];r.setSegmentIndex(we.parseInt(P.decodeBase900toBase10(n,P.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new H;t=P.textCompaction(e,t,i),r.setFileId(i.toString());let s=-1;for(e[t]===P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case P.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let a=new H;t=P.textCompaction(e,t+1,a),r.setFileName(a.toString());break;case P.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let o=new H;t=P.textCompaction(e,t+1,o),r.setSender(o.toString());break;case P.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let l=new H;t=P.textCompaction(e,t+1,l),r.setAddressee(l.toString());break;case P.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let h=new H;t=P.numericCompaction(e,t+1,h),r.setSegmentCount(we.parseInt(h.toString()));break;case P.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let w=new H;t=P.numericCompaction(e,t+1,w),r.setTimestamp(zn.parseLong(w.toString()));break;case P.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let C=new H;t=P.numericCompaction(e,t+1,C),r.setChecksum(we.parseInt(C.toString()));break;case P.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new H;t=P.numericCompaction(e,t+1,I),r.setFileSize(zn.parseLong(I.toString()));break;default:throw v.getFormatInstance()}break;case P.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw v.getFormatInstance()}if(s!==-1){let a=t-s;r.isLastSegment()&&a--,r.setOptionalData(me.copyOfRange(e,s,s+a))}return t}static textCompaction(e,t,r){let n=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,a=!1;for(;t<e[0]&&!a;){let o=e[t++];if(o<P.TEXT_COMPACTION_MODE_LATCH)n[s]=o/30,n[s+1]=o%30,s+=2;else switch(o){case P.TEXT_COMPACTION_MODE_LATCH:n[s++]=P.TEXT_COMPACTION_MODE_LATCH;break;case P.BYTE_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.NUMERIC_COMPACTION_MODE_LATCH:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[s]=P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,o=e[t++],i[s]=o,s++;break}}return P.decodeTextCompaction(n,i,s,r),t}static decodeTextCompaction(e,t,r,n){let i=Ve.ALPHA,s=Ve.ALPHA,a=0;for(;a<r;){let o=e[a],l="";switch(i){case Ve.ALPHA:if(o<26)l=String.fromCharCode(65+o);else switch(o){case 26:l=" ";break;case P.LL:i=Ve.LOWER;break;case P.ML:i=Ve.MIXED;break;case P.PS:s=i,i=Ve.PUNCT_SHIFT;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case P.TEXT_COMPACTION_MODE_LATCH:i=Ve.ALPHA;break}break;case Ve.LOWER:if(o<26)l=String.fromCharCode(97+o);else switch(o){case 26:l=" ";break;case P.AS:s=i,i=Ve.ALPHA_SHIFT;break;case P.ML:i=Ve.MIXED;break;case P.PS:s=i,i=Ve.PUNCT_SHIFT;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case P.TEXT_COMPACTION_MODE_LATCH:i=Ve.ALPHA;break}break;case Ve.MIXED:if(o<P.PL)l=P.MIXED_CHARS[o];else switch(o){case P.PL:i=Ve.PUNCT;break;case 26:l=" ";break;case P.LL:i=Ve.LOWER;break;case P.AL:i=Ve.ALPHA;break;case P.PS:s=i,i=Ve.PUNCT_SHIFT;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case P.TEXT_COMPACTION_MODE_LATCH:i=Ve.ALPHA;break}break;case Ve.PUNCT:if(o<P.PAL)l=P.PUNCT_CHARS[o];else switch(o){case P.PAL:i=Ve.ALPHA;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case P.TEXT_COMPACTION_MODE_LATCH:i=Ve.ALPHA;break}break;case Ve.ALPHA_SHIFT:if(i=s,o<26)l=String.fromCharCode(65+o);else switch(o){case 26:l=" ";break;case P.TEXT_COMPACTION_MODE_LATCH:i=Ve.ALPHA;break}break;case Ve.PUNCT_SHIFT:if(i=s,o<P.PAL)l=P.PUNCT_CHARS[o];else switch(o){case P.PAL:i=Ve.ALPHA;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case P.TEXT_COMPACTION_MODE_LATCH:i=Ve.ALPHA;break}break}l!==""&&n.append(l),a++}}static byteCompaction(e,t,r,n,i){let s=new zi,a=0,o=0,l=!1;switch(e){case P.BYTE_COMPACTION_MODE_LATCH:let h=new Int32Array(6),w=t[n++];for(;n<t[0]&&!l;)switch(h[a++]=w,o=900*o+w,w=t[n++],w){case P.TEXT_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH:case P.NUMERIC_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(a%5===0&&a>0){for(let C=0;C<6;++C)s.write(Number(or(o)>>or(8*(5-C))));o=0,a=0}break}n===t[0]&&w<P.TEXT_COMPACTION_MODE_LATCH&&(h[a++]=w);for(let C=0;C<a;C++)s.write(h[C]);break;case P.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!l;){let C=t[n++];if(C<P.TEXT_COMPACTION_MODE_LATCH)a++,o=900*o+C;else switch(C){case P.TEXT_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH:case P.NUMERIC_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:n--,l=!0;break}if(a%5===0&&a>0){for(let I=0;I<6;++I)s.write(Number(or(o)>>or(8*(5-I))));o=0,a=0}}break}return i.append(B.decode(s.toByteArray(),r)),n}static numericCompaction(e,t,r){let n=0,i=!1,s=new Int32Array(P.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<P.TEXT_COMPACTION_MODE_LATCH)s[n]=a,n++;else switch(a){case P.TEXT_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(n%P.MAX_NUMERIC_CODEWORDS===0||a===P.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(P.decodeBase900toBase10(s,n)),n=0)}return t}static decodeBase900toBase10(e,t){let r=or(0);for(let i=0;i<t;i++)r+=P.EXP900[t-i-1]*or(e[i]);let n=r.toString();if(n.charAt(0)!=="1")throw new v;return n.substring(1)}}P.TEXT_COMPACTION_MODE_LATCH=900,P.BYTE_COMPACTION_MODE_LATCH=901,P.NUMERIC_COMPACTION_MODE_LATCH=902,P.BYTE_COMPACTION_MODE_LATCH_6=924,P.ECI_USER_DEFINED=925,P.ECI_GENERAL_PURPOSE=926,P.ECI_CHARSET=927,P.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,P.MACRO_PDF417_TERMINATOR=922,P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,P.MAX_NUMERIC_CODEWORDS=15,P.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,P.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,P.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,P.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,P.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,P.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,P.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,P.PL=25,P.LL=27,P.AS=27,P.ML=28,P.AL=28,P.PS=29,P.PAL=29,P.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,P.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",P.EXP900=jn()?Ki():[],P.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _e{constructor(){}static decode(e,t,r,n,i,s,a){let o=new dr(e,t,r,n,i),l=null,h=null,w;for(let y=!0;;y=!1){if(t!=null&&(l=_e.getRowIndicatorColumn(e,o,t,!0,s,a)),n!=null&&(h=_e.getRowIndicatorColumn(e,o,n,!1,s,a)),w=_e.merge(l,h),w==null)throw T.getNotFoundInstance();let S=w.getBoundingBox();if(y&&S!=null&&(S.getMinY()<o.getMinY()||S.getMaxY()>o.getMaxY()))o=S;else break}w.setBoundingBox(o);let C=w.getBarcodeColumnCount()+1;w.setDetectionResultColumn(0,l),w.setDetectionResultColumn(C,h);let I=l!=null;for(let y=1;y<=C;y++){let S=I?y:C-y;if(w.getDetectionResultColumn(S)!==void 0)continue;let M;S===0||S===C?M=new Yn(o,S===0):M=new Br(o),w.setDetectionResultColumn(S,M);let k=-1,Q=k;for(let $=o.getMinY();$<=o.getMaxY();$++){if(k=_e.getStartColumn(w,S,$,I),k<0||k>o.getMaxX()){if(Q===-1)continue;k=Q}let j=_e.detectCodeword(e,o.getMinX(),o.getMaxX(),I,k,$,s,a);j!=null&&(M.setCodeword($,j),Q=k,s=Math.min(s,j.getWidth()),a=Math.max(a,j.getWidth()))}}return _e.createDecoderResult(w)}static merge(e,t){if(e==null&&t==null)return null;let r=_e.getBarcodeMetadata(e,t);if(r==null)return null;let n=dr.merge(_e.adjustBoundingBox(e),_e.adjustBoundingBox(t));return new Pr(r,n)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let r=_e.getMax(t),n=0;for(let a of t)if(n+=r-a,a>0)break;let i=e.getCodewords();for(let a=0;n>0&&i[a]==null;a++)n--;let s=0;for(let a=t.length-1;a>=0&&(s+=r-t[a],!(t[a]>0));a--);for(let a=i.length-1;s>0&&i[a]==null;a--)s--;return e.getBoundingBox().addMissingRows(n,s,e.isLeft())}static getMax(e){let t=-1;for(let r of e)t=Math.max(t,r);return t}static getBarcodeMetadata(e,t){let r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let n;return t==null||(n=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(e,t,r,n,i,s){let a=new Yn(t,n);for(let o=0;o<2;o++){let l=o===0?1:-1,h=Math.trunc(Math.trunc(r.getX()));for(let w=Math.trunc(Math.trunc(r.getY()));w<=t.getMaxY()&&w>=t.getMinY();w+=l){let C=_e.detectCodeword(e,0,e.getWidth(),n,h,w,i,s);C!=null&&(a.setCodeword(w,C),n?h=C.getStartX():h=C.getEndX())}}return a}static adjustCodewordCount(e,t){let r=t[0][1],n=r.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-_e.getNumberOfECCodeWords(e.getBarcodeECLevel());if(n.length===0){if(i<1||i>Ee.MAX_CODEWORDS_IN_BARCODE)throw T.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(e){let t=_e.createBarcodeMatrix(e);_e.adjustCodewordCount(e,t);let r=new Array,n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let o=0;o<e.getBarcodeRowCount();o++)for(let l=0;l<e.getBarcodeColumnCount();l++){let h=t[o][l+1].getValue(),w=o*e.getBarcodeColumnCount()+l;h.length===0?r.push(w):h.length===1?n[w]=h[0]:(s.push(w),i.push(h))}let a=new Array(i.length);for(let o=0;o<a.length;o++)a[o]=i[o];return _e.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,Ee.toIntArray(r),Ee.toIntArray(s),a)}static createDecoderResultFromAmbiguousValues(e,t,r,n,i){let s=new Int32Array(n.length),a=100;for(;a-- >0;){for(let o=0;o<s.length;o++)t[n[o]]=i[o][s[o]];try{return _e.decodeCodewords(t,e,r)}catch(o){if(!(o instanceof J))throw o}if(s.length===0)throw J.getChecksumInstance();for(let o=0;o<s.length;o++)if(s[o]<i[o].length-1){s[o]++;break}else if(s[o]=0,o===s.length-1)throw J.getChecksumInstance()}throw J.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let n=0;n<t.length;n++)for(let i=0;i<t[n].length;i++)t[n][i]=new Lr;let r=0;for(let n of e.getDetectionResultColumns()){if(n!=null){for(let i of n.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][r].setValue(i.getValue())}}}r++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,r,n){let i=n?1:-1,s=null;if(_e.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(r)),s!=null)return n?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(r),s!=null)return n?s.getStartX():s.getEndX();if(_e.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(r)),s!=null)return n?s.getEndX():s.getStartX();let a=0;for(;_e.isValidBarcodeColumn(e,t-i);){t-=i;for(let o of e.getDetectionResultColumn(t).getCodewords())if(o!=null)return(n?o.getEndX():o.getStartX())+i*a*(o.getEndX()-o.getStartX());a++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,r,n,i,s,a,o){i=_e.adjustCodewordStartColumn(e,t,r,n,i,s);let l=_e.getModuleBitCount(e,t,r,n,i,s);if(l==null)return null;let h,w=Ce.sum(l);if(n)h=i+w;else{for(let y=0;y<l.length/2;y++){let S=l[y];l[y]=l[l.length-1-y],l[l.length-1-y]=S}h=i,i=h-w}if(!_e.checkCodewordSkew(w,a,o))return null;let C=Nt.getDecodedValue(l),I=Ee.getCodeword(C);return I===-1?null:new kr(i,h,_e.getCodewordBucketNumber(C),I)}static getModuleBitCount(e,t,r,n,i,s){let a=i,o=new Int32Array(8),l=0,h=n?1:-1,w=n;for(;(n?a<r:a>=t)&&l<o.length;)e.get(a,s)===w?(o[l]++,a+=h):(l++,w=!w);return l===o.length||a===(n?r:t)&&l===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,r,n,i,s){let a=i,o=n?-1:1;for(let l=0;l<2;l++){for(;(n?a>=t:a<r)&&n===e.get(a,s);){if(Math.abs(i-a)>_e.CODEWORD_SKEW_SIZE)return i;a+=o}o=-o,n=!n}return a}static checkCodewordSkew(e,t,r){return t-_e.CODEWORD_SKEW_SIZE<=e&&e<=r+_e.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,r){if(e.length===0)throw v.getFormatInstance();let n=1<<t+1,i=_e.correctErrors(e,r,n);_e.verifyCodewordCount(e,n);let s=P.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(r.length),s}static correctErrors(e,t,r){if(t!=null&&t.length>r/2+_e.MAX_ERRORS||r<0||r>_e.MAX_EC_CODEWORDS)throw J.getChecksumInstance();return _e.errorCorrection.decode(e,r,t)}static verifyCodewordCount(e,t){if(e.length<4)throw v.getFormatInstance();let r=e[0];if(r>e.length)throw v.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw v.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),r=0,n=t.length-1;for(;!((e&1)!==r&&(r=e&1,n--,n<0));)t[n]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return _e.getCodewordBucketNumber(_e.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Mr;for(let r=0;r<e.length;r++){t.format("Row %2d: ",r);for(let n=0;n<e[r].length;n++){let i=e[r][n];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}_e.CODEWORD_SKEW_SIZE=2,_e.MAX_ERRORS=3,_e.MAX_EC_CODEWORDS=512,_e.errorCorrection=new Xn;class pt{decode(e,t=null){let r=pt.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw T.getNotFoundInstance();return r[0]}decodeMultiple(e,t=null){try{return pt.decode(e,t,!0)}catch(r){throw r instanceof v||r instanceof J?T.getNotFoundInstance():r}}static decode(e,t,r){const n=new Array,i=be.detectMultiple(e,t,r);for(const s of i.getPoints()){const a=_e.decode(i.getBits(),s[4],s[5],s[6],s[7],pt.getMinCodewordWidth(s),pt.getMaxCodewordWidth(s)),o=new $e(a.getText(),a.getRawBytes(),void 0,s,ue.PDF_417);o.putMetadata(U.ERROR_CORRECTION_LEVEL,a.getECLevel());const l=a.getOther();l!=null&&o.putMetadata(U.PDF417_EXTRA_METADATA,l),n.push(o)}return n.map(s=>s)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?we.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(pt.getMaxWidth(e[0],e[4]),pt.getMaxWidth(e[6],e[2])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN),Math.max(pt.getMaxWidth(e[1],e[5]),pt.getMaxWidth(e[7],e[3])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(pt.getMinWidth(e[0],e[4]),pt.getMinWidth(e[6],e[2])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN),Math.min(pt.getMinWidth(e[1],e[5]),pt.getMinWidth(e[7],e[3])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN)))}reset(){}}class jr extends A{}jr.kind="ReaderException";class qn{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!d(e)&&e.get(q.TRY_HARDER)===!0,r=d(e)?null:e.get(q.POSSIBLE_FORMATS),n=new Array;if(!d(r)){const i=r.some(s=>s===ue.UPC_A||s===ue.UPC_E||s===ue.EAN_13||s===ue.EAN_8||s===ue.CODABAR||s===ue.CODE_39||s===ue.CODE_93||s===ue.CODE_128||s===ue.ITF||s===ue.RSS_14||s===ue.RSS_EXPANDED);i&&!t&&n.push(new pr(e,this.verbose)),r.includes(ue.QR_CODE)&&n.push(new ar),r.includes(ue.DATA_MATRIX)&&n.push(new sr),r.includes(ue.AZTEC)&&n.push(new Wr),r.includes(ue.PDF_417)&&n.push(new pt),i&&t&&n.push(new pr(e,this.verbose))}n.length===0&&(t||n.push(new pr(e,this.verbose)),n.push(new ar),n.push(new sr),n.push(new Wr),n.push(new pt),t&&n.push(new pr(e,this.verbose))),this.readers=n}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new jr("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(r){if(r instanceof jr)continue}throw new T("No MultiFormat Readers were able to detect the code.")}}class ji extends At{constructor(e=null,t=500){const r=new qn;r.setHints(e),super(r,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class qi extends At{constructor(e=500){super(new pt,e)}}class Qi extends At{constructor(e=500){super(new ar,e)}}var pn;(function(x){x[x.ERROR_CORRECTION=0]="ERROR_CORRECTION",x[x.CHARACTER_SET=1]="CHARACTER_SET",x[x.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",x[x.MIN_SIZE=3]="MIN_SIZE",x[x.MAX_SIZE=4]="MAX_SIZE",x[x.MARGIN=5]="MARGIN",x[x.PDF417_COMPACT=6]="PDF417_COMPACT",x[x.PDF417_COMPACTION=7]="PDF417_COMPACTION",x[x.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",x[x.AZTEC_LAYERS=9]="AZTEC_LAYERS",x[x.QR_VERSION=10]="QR_VERSION"})(pn||(pn={}));var ht=pn;class mn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new G(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let r=t[t.length-1];const n=this.field;for(let i=t.length;i<=e;i++){const s=r.multiply(new G(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));t.push(s),r=s}}return t[e]}encode(e,t){if(t===0)throw new O("No error correction bytes");const r=e.length-t;if(r<=0)throw new O("No data bytes provided");const n=this.buildGenerator(t),i=new Int32Array(r);le.arraycopy(e,0,i,0,r);let s=new G(this.field,i);s=s.multiplyByMonomial(t,1);const o=s.divide(n)[1].getCoefficients(),l=t-o.length;for(let h=0;h<l;h++)e[r+h]=0;le.arraycopy(o,0,e,r+l,o.length)}}class tt{constructor(){}static applyMaskPenaltyRule1(e){return tt.applyMaskPenaltyRule1Internal(e,!0)+tt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const a=r[s];for(let o=0;o<n-1;o++){const l=a[o];l===a[o+1]&&l===r[s+1][o]&&l===r[s+1][o+1]&&t++}}return tt.N2*t}static applyMaskPenaltyRule3(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let a=0;a<n;a++){const o=r[s];a+6<n&&o[a]===1&&o[a+1]===0&&o[a+2]===1&&o[a+3]===1&&o[a+4]===1&&o[a+5]===0&&o[a+6]===1&&(tt.isWhiteHorizontal(o,a-4,a)||tt.isWhiteHorizontal(o,a+7,a+11))&&t++,s+6<i&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(tt.isWhiteVertical(r,a,s-4,s)||tt.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*tt.N3}static isWhiteHorizontal(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(let n=t;n<r;n++)if(e[n]===1)return!1;return!0}static isWhiteVertical(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let i=r;i<n;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++){const l=r[o];for(let h=0;h<n;h++)l[h]===1&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-s)*10/s)*tt.N4}static getDataMaskBit(e,t,r){let n,i;switch(e){case 0:n=r+t&1;break;case 1:n=r&1;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:i=r*t,n=(i&1)+i%3;break;case 6:i=r*t,n=(i&1)+i%3&1;break;case 7:i=r*t,n=i%3+(r+t&1)&1;break;default:throw new O("Invalid mask pattern: "+e)}return n===0}static applyMaskPenaltyRule1Internal(e,t){let r=0;const n=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let a=0;a<n;a++){let o=0,l=-1;for(let h=0;h<i;h++){const w=t?s[a][h]:s[h][a];w===l?o++:(o>=5&&(r+=tt.N1+(o-5)),o=1,l=w)}o>=5&&(r+=tt.N1+(o-5))}return r}}tt.N1=3,tt.N2=3,tt.N3=40,tt.N4=10;class qr{constructor(e,t){this.width=e,this.height=t;const r=new Array(t);for(let n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,r){this.bytes[t][e]=r}setBoolean(e,t,r){this.bytes[t][e]=r?1:0}clear(e){for(const t of this.bytes)me.fill(t,e)}equals(e){if(!(e instanceof qr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let r=0,n=this.height;r<n;++r){const i=this.bytes[r],s=t.bytes[r];for(let a=0,o=this.width;a<o;++a)if(i[a]!==s[a])return!1}return!0}toString(){const e=new H;for(let t=0,r=this.height;t<r;++t){const n=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(n[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class gr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new H;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<gr.NUM_MASK_PATTERNS}}gr.NUM_MASK_PATTERNS=8;class He extends A{}He.kind="WriterException";class Ae{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,r,n,i){Ae.clearMatrix(i),Ae.embedBasicPatterns(r,i),Ae.embedTypeInfo(t,n,i),Ae.maybeEmbedVersionInfo(r,i),Ae.embedDataBits(e,n,i)}static embedBasicPatterns(e,t){Ae.embedPositionDetectionPatternsAndSeparators(t),Ae.embedDarkDotAtLeftBottomCorner(t),Ae.maybeEmbedPositionAdjustmentPatterns(e,t),Ae.embedTimingPatterns(t)}static embedTypeInfo(e,t,r){const n=new Te;Ae.makeTypeInfoBits(e,t,n);for(let i=0,s=n.getSize();i<s;++i){const a=n.get(n.getSize()-1-i),o=Ae.TYPE_INFO_COORDINATES[i],l=o[0],h=o[1];if(r.setBoolean(l,h,a),i<8){const w=r.getWidth()-i-1,C=8;r.setBoolean(w,C,a)}else{const C=r.getHeight()-7+(i-8);r.setBoolean(8,C,a)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const r=new Te;Ae.makeVersionInfoBits(e,r);let n=6*3-1;for(let i=0;i<6;++i)for(let s=0;s<3;++s){const a=r.get(n);n--,t.setBoolean(i,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,i,a)}}static embedDataBits(e,t,r){let n=0,i=-1,s=r.getWidth()-1,a=r.getHeight()-1;for(;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(let o=0;o<2;++o){const l=s-o;if(!Ae.isEmpty(r.get(l,a)))continue;let h;n<e.getSize()?(h=e.get(n),++n):h=!1,t!==255&&tt.getDataMaskBit(t,l,a)&&(h=!h),r.setBoolean(l,a,h)}a+=i}i=-i,a+=i,s-=2}if(n!==e.getSize())throw new He("Not all bits consumed: "+n+"/"+e.getSize())}static findMSBSet(e){return 32-we.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new O("0 polynomial");const r=Ae.findMSBSet(t);for(e<<=r-1;Ae.findMSBSet(e)>=r;)e^=t<<Ae.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,t,r){if(!gr.isValidMaskPattern(t))throw new He("Invalid mask pattern");const n=e.getBits()<<3|t;r.appendBits(n,5);const i=Ae.calculateBCHCode(n,Ae.TYPE_INFO_POLY);r.appendBits(i,10);const s=new Te;if(s.appendBits(Ae.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new He("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const r=Ae.calculateBCHCode(e.getVersionNumber(),Ae.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new He("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const r=(t+1)%2;Ae.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),Ae.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new He;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,r){for(let n=0;n<8;++n){if(!Ae.isEmpty(r.get(e+n,t)))throw new He;r.setNumber(e+n,t,0)}}static embedVerticalSeparationPattern(e,t,r){for(let n=0;n<7;++n){if(!Ae.isEmpty(r.get(e,t+n)))throw new He;r.setNumber(e,t+n,0)}}static embedPositionAdjustmentPattern(e,t,r){for(let n=0;n<5;++n){const i=Ae.POSITION_ADJUSTMENT_PATTERN[n];for(let s=0;s<5;++s)r.setNumber(e+s,t+n,i[s])}}static embedPositionDetectionPattern(e,t,r){for(let n=0;n<7;++n){const i=Ae.POSITION_DETECTION_PATTERN[n];for(let s=0;s<7;++s)r.setNumber(e+s,t+n,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Ae.POSITION_DETECTION_PATTERN[0].length;Ae.embedPositionDetectionPattern(0,0,e),Ae.embedPositionDetectionPattern(e.getWidth()-t,0,e),Ae.embedPositionDetectionPattern(0,e.getWidth()-t,e);const r=8;Ae.embedHorizontalSeparationPattern(0,r-1,e),Ae.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Ae.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const n=7;Ae.embedVerticalSeparationPattern(n,0,e),Ae.embedVerticalSeparationPattern(e.getHeight()-n-1,0,e),Ae.embedVerticalSeparationPattern(n,e.getHeight()-n,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,n=Ae.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let i=0,s=n.length;i!==s;i++){const a=n[i];if(a>=0)for(let o=0;o!==s;o++){const l=n[o];l>=0&&Ae.isEmpty(t.get(l,a))&&Ae.embedPositionAdjustmentPattern(l-2,a-2,t)}}}}Ae.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ae.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ae.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ae.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ae.VERSION_INFO_POLY=7973,Ae.TYPE_INFO_POLY=1335,Ae.TYPE_INFO_MASK_PATTERN=21522;class $i{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ke{constructor(){}static calculateMaskPenalty(e){return tt.applyMaskPenaltyRule1(e)+tt.applyMaskPenaltyRule2(e)+tt.applyMaskPenaltyRule3(e)+tt.applyMaskPenaltyRule4(e)}static encode(e,t,r=null){let n=Ke.DEFAULT_BYTE_MODE_ENCODING;const i=r!==null&&r.get(ht.CHARACTER_SET)!==void 0;i&&(n=r.get(ht.CHARACTER_SET).toString());const s=this.chooseMode(e,n),a=new Te;if(s===xe.BYTE&&(i||Ke.DEFAULT_BYTE_MODE_ENCODING!==n)){const $=R.getCharacterSetECIByName(n);$!==void 0&&this.appendECI($,a)}this.appendModeInfo(s,a);const o=new Te;this.appendBytes(e,s,o,n);let l;if(r!==null&&r.get(ht.QR_VERSION)!==void 0){const $=Number.parseInt(r.get(ht.QR_VERSION).toString(),10);l=de.getVersionForNumber($);const j=this.calculateBitsNeeded(s,a,o,l);if(!this.willFit(j,l,t))throw new He("Data too big for requested version")}else l=this.recommendVersion(t,s,a,o);const h=new Te;h.appendBitArray(a);const w=s===xe.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(w,l,s,h),h.appendBitArray(o);const C=l.getECBlocksForLevel(t),I=l.getTotalCodewords()-C.getTotalECCodewords();this.terminateBits(I,h);const y=this.interleaveWithECBytes(h,l.getTotalCodewords(),I,C.getNumBlocks()),S=new gr;S.setECLevel(t),S.setMode(s),S.setVersion(l);const M=l.getDimensionForVersion(),k=new qr(M,M),Q=this.chooseMaskPattern(y,t,l,k);return S.setMaskPattern(Q),Ae.buildMatrix(y,t,l,Q,k),S.setMatrix(k),S}static recommendVersion(e,t,r,n){const i=this.calculateBitsNeeded(t,r,n,de.getVersionForNumber(1)),s=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,r,n,s);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(e){return e<Ke.ALPHANUMERIC_TABLE.length?Ke.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(R.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return xe.KANJI;let r=!1,n=!1;for(let i=0,s=e.length;i<s;++i){const a=e.charAt(i);if(Ke.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)n=!0;else return xe.BYTE}return n?xe.ALPHANUMERIC:r?xe.NUMERIC:xe.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=B.encode(e,R.SJIS)}catch{return!1}const r=t.length;if(r%2!==0)return!1;for(let n=0;n<r;n+=2){const i=t[n]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,r,n){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let a=0;a<gr.NUM_MASK_PATTERNS;a++){Ae.buildMatrix(e,t,r,a,n);let o=this.calculateMaskPenalty(n);o<i&&(i=o,s=a)}return s}static chooseVersion(e,t){for(let r=1;r<=40;r++){const n=de.getVersionForNumber(r);if(Ke.willFit(e,n,t))return n}throw new He("Data too big")}static willFit(e,t,r){const n=t.getTotalCodewords(),s=t.getECBlocksForLevel(r).getTotalECCodewords(),a=n-s,o=(e+7)/8;return a>=o}static terminateBits(e,t){const r=e*8;if(t.getSize()>r)throw new He("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(let s=0;s<4&&t.getSize()<r;++s)t.appendBit(!1);const n=t.getSize()&7;if(n>0)for(let s=n;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(s&1?17:236,8);if(t.getSize()!==r)throw new He("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,r,n,i,s){if(n>=r)throw new He("Block ID too large");const a=e%r,o=r-a,l=Math.floor(e/r),h=l+1,w=Math.floor(t/r),C=w+1,I=l-w,y=h-C;if(I!==y)throw new He("EC bytes mismatch");if(r!==o+a)throw new He("RS blocks mismatch");if(e!==(w+I)*o+(C+y)*a)throw new He("Total bytes mismatch");n<o?(i[0]=w,s[0]=I):(i[0]=C,s[0]=y)}static interleaveWithECBytes(e,t,r,n){if(e.getSizeInBytes()!==r)throw new He("Number of bits and data bytes does not match");let i=0,s=0,a=0;const o=new Array;for(let h=0;h<n;++h){const w=new Int32Array(1),C=new Int32Array(1);Ke.getNumDataBytesAndNumECBytesForBlockID(t,r,n,h,w,C);const I=w[0],y=new Uint8Array(I);e.toBytes(8*i,y,0,I);const S=Ke.generateECBytes(y,C[0]);o.push(new $i(y,S)),s=Math.max(s,I),a=Math.max(a,S.length),i+=w[0]}if(r!==i)throw new He("Data bytes does not match offset");const l=new Te;for(let h=0;h<s;++h)for(const w of o){const C=w.getDataBytes();h<C.length&&l.appendBits(C[h],8)}for(let h=0;h<a;++h)for(const w of o){const C=w.getErrorCorrectionBytes();h<C.length&&l.appendBits(C[h],8)}if(t!==l.getSizeInBytes())throw new He("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const r=e.length,n=new Int32Array(r+t);for(let s=0;s<r;s++)n[s]=e[s]&255;new mn(K.QR_CODE_FIELD_256).encode(n,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=n[r+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,r,n){const i=r.getCharacterCountBits(t);if(e>=1<<i)throw new He(e+" is bigger than "+((1<<i)-1));n.appendBits(e,i)}static appendBytes(e,t,r,n){switch(t){case xe.NUMERIC:Ke.appendNumericBytes(e,r);break;case xe.ALPHANUMERIC:Ke.appendAlphanumericBytes(e,r);break;case xe.BYTE:Ke.append8BitBytes(e,r,n);break;case xe.KANJI:Ke.appendKanjiBytes(e,r);break;default:throw new He("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Ke.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const i=Ke.getDigit(e.charAt(n));if(n+2<r){const s=Ke.getDigit(e.charAt(n+1)),a=Ke.getDigit(e.charAt(n+2));t.appendBits(i*100+s*10+a,10),n+=3}else if(n+1<r){const s=Ke.getDigit(e.charAt(n+1));t.appendBits(i*10+s,7),n+=2}else t.appendBits(i,4),n++}}static appendAlphanumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const i=Ke.getAlphanumericCode(e.charCodeAt(n));if(i===-1)throw new He;if(n+1<r){const s=Ke.getAlphanumericCode(e.charCodeAt(n+1));if(s===-1)throw new He;t.appendBits(i*45+s,11),n+=2}else t.appendBits(i,6),n++}}static append8BitBytes(e,t,r){let n;try{n=B.encode(e,r)}catch(i){throw new He(i)}for(let i=0,s=n.length;i!==s;i++){const a=n[i];t.appendBits(a,8)}}static appendKanjiBytes(e,t){let r;try{r=B.encode(e,R.SJIS)}catch(i){throw new He(i)}const n=r.length;for(let i=0;i<n;i+=2){const s=r[i]&255,a=r[i+1]&255,o=s<<8&4294967295|a;let l=-1;if(o>=33088&&o<=40956?l=o-33088:o>=57408&&o<=60351&&(l=o-49472),l===-1)throw new He("Invalid byte sequence");const h=(l>>8)*192+(l&255);t.appendBits(h,13)}}static appendECI(e,t){t.appendBits(xe.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Ke.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ke.DEFAULT_BYTE_MODE_ENCODING=R.UTF8.getName();class xr{write(e,t,r,n=null){if(e.length===0)throw new O("Found empty contents");if(t<0||r<0)throw new O("Requested dimensions are too small: "+t+"x"+r);let i=Ye.L,s=xr.QUIET_ZONE_SIZE;n!==null&&(n.get(ht.ERROR_CORRECTION)!==void 0&&(i=Ye.fromString(n.get(ht.ERROR_CORRECTION).toString())),n.get(ht.MARGIN)!==void 0&&(s=Number.parseInt(n.get(ht.MARGIN).toString(),10)));const a=Ke.encode(e,i,n);return this.renderResult(a,t,r,s)}writeToDom(e,t,r,n,i=null){typeof e=="string"&&(e=document.querySelector(e));const s=this.write(t,r,n,i);e&&e.appendChild(s)}renderResult(e,t,r,n){const i=e.getMatrix();if(i===null)throw new fe;const s=i.getWidth(),a=i.getHeight(),o=s+n*2,l=a+n*2,h=Math.max(t,o),w=Math.max(r,l),C=Math.min(Math.floor(h/o),Math.floor(w/l)),I=Math.floor((h-s*C)/2),y=Math.floor((w-a*C)/2),S=this.createSVGElement(h,w);for(let M=0,k=y;M<a;M++,k+=C)for(let Q=0,$=I;Q<s;Q++,$+=C)if(i.get(Q,M)===1){const j=this.createSvgRectElement($,k,C,C);S.appendChild(j)}return S}createSVGElement(e,t){const r=document.createElementNS(xr.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r}createSvgRectElement(e,t,r,n){const i=document.createElementNS(xr.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}xr.QUIET_ZONE_SIZE=4,xr.SVG_NS="http://www.w3.org/2000/svg";class Ir{encode(e,t,r,n,i){if(e.length===0)throw new O("Found empty contents");if(t!==ue.QR_CODE)throw new O("Can only encode QR_CODE, but got "+t);if(r<0||n<0)throw new O(`Requested dimensions are too small: ${r}x${n}`);let s=Ye.L,a=Ir.QUIET_ZONE_SIZE;i!==null&&(i.get(ht.ERROR_CORRECTION)!==void 0&&(s=Ye.fromString(i.get(ht.ERROR_CORRECTION).toString())),i.get(ht.MARGIN)!==void 0&&(a=Number.parseInt(i.get(ht.MARGIN).toString(),10)));const o=Ke.encode(e,s,i);return Ir.renderResult(o,r,n,a)}static renderResult(e,t,r,n){const i=e.getMatrix();if(i===null)throw new fe;const s=i.getWidth(),a=i.getHeight(),o=s+n*2,l=a+n*2,h=Math.max(t,o),w=Math.max(r,l),C=Math.min(Math.floor(h/o),Math.floor(w/l)),I=Math.floor((h-s*C)/2),y=Math.floor((w-a*C)/2),S=new Y(h,w);for(let M=0,k=y;M<a;M++,k+=C)for(let Q=0,$=I;Q<s;Q++,$+=C)i.get(Q,M)===1&&S.setRegion($,k,C,C);return S}}Ir.QUIET_ZONE_SIZE=4;class Ji{encode(e,t,r,n,i){let s;switch(t){case ue.QR_CODE:s=new Ir;break;default:throw new O("No encoder available for format "+t)}return s.encode(e,t,r,n,i)}}class jt extends Re{constructor(e,t,r,n,i,s,a,o){if(super(s,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=r,this.left=n,this.top=i,n+s>t||i+a>r)throw new O("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(s,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const r=this.getWidth();(t==null||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return le.arraycopy(this.yuvData,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const r=e*t,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return le.arraycopy(this.yuvData,i,n,0,r),n;for(let s=0;s<t;s++){const a=s*e;le.arraycopy(this.yuvData,i,n,a,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new jt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,n,!1)}renderThumbnail(){const e=this.getWidth()/jt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/jt.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),n=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const a=s*e;for(let o=0;o<e;o++){const l=n[i+o*jt.THUMBNAIL_SCALE_FACTOR]&255;r[a+o]=4278190080|l*65793}i+=this.dataWidth*jt.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/jt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/jt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<t;n++,i+=this.dataWidth){const s=i+e/2;for(let a=i,o=i+e-1;a<s;a++,o--){const l=r[a];r[a]=r[o],r[o]=l}}}invert(){return new Fe(this)}}jt.THUMBNAIL_SCALE_FACTOR=2;class In extends Re{constructor(e,t,r,n,i,s,a){if(super(t,r),this.dataWidth=n,this.dataHeight=i,this.left=s,this.top=a,e.BYTES_PER_ELEMENT===4){const o=t*r,l=new Uint8ClampedArray(o);for(let h=0;h<o;h++){const w=e[h],C=w>>16&255,I=w>>7&510,y=w&255;l[h]=(C+I+y)/4&255}this.luminances=l}else this.luminances=e;if(n===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=r),s===void 0&&(this.left=0),a===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+r>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const r=this.getWidth();(t==null||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return le.arraycopy(this.luminances,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const r=e*t,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return le.arraycopy(this.luminances,i,n,0,r),n;for(let s=0;s<t;s++){const a=s*e;le.arraycopy(this.luminances,i,n,a,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new In(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Fe(this)}}class Qn extends R{static forName(e){return this.getCharacterSetECIByName(e)}}class bn{}bn.ISO_8859_1=R.ISO8859_1;class $n{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Jn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class es{constructor(e){this.previous=e}getPrevious(){return this.previous}}class br extends es{constructor(e,t,r){super(e),this.value=t,this.bitCount=r}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new br(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new br(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+we.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class _n extends br{constructor(e,t,r){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=r}appendTo(e,t){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):r===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)}addBinaryShift(e,t){return new _n(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ts(x,e,t){return new _n(x,e,t)}function Fr(x,e,t){return new br(x,e,t)}const rs=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],lr=0,Qr=1,Ut=2,ei=3,qt=4,ns=new br(null,0,0),yn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function is(x){for(let e of x)me.fill(e,-1);return x[lr][qt]=0,x[Qr][qt]=0,x[Qr][lr]=28,x[ei][qt]=0,x[Ut][qt]=0,x[Ut][lr]=15,x}const ti=is(me.createInt32Array(6,6));class Qt{constructor(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let r=this.bitCount,n=this.token;if(e!==this.mode){let s=yn[this.mode][e];n=Fr(n,s&65535,s>>16),r+=s>>16}let i=e===Ut?4:5;return n=Fr(n,t,i),new Qt(n,e,0,r+i)}shiftAndAppend(e,t){let r=this.token,n=this.mode===Ut?4:5;return r=Fr(r,ti[this.mode][e],n),r=Fr(r,t,5),new Qt(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(e){let t=this.token,r=this.mode,n=this.bitCount;if(this.mode===qt||this.mode===Ut){let a=yn[r][lr];t=Fr(t,a&65535,a>>16),n+=a>>16,r=lr}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new Qt(t,r,this.binaryShiftByteCount+1,n+i);return s.binaryShiftByteCount===2047+31&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=ts(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Qt(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(yn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Qt.calculateBinaryShiftCost(e)-Qt.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let n=this.endBinaryShift(e.length).token;n!==null;n=n.getPrevious())t.unshift(n);let r=new Te;for(const n of t)n.appendTo(r,e);return r}toString(){return _.format("%s bits=%d bytes=%d",rs[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Qt.INITIAL_STATE=new Qt(ns,lr,0,0);function ss(x){const e=_.getCharCode(" "),t=_.getCharCode("."),r=_.getCharCode(",");x[lr][e]=1;const n=_.getCharCode("Z"),i=_.getCharCode("A");for(let C=i;C<=n;C++)x[lr][C]=C-i+2;x[Qr][e]=1;const s=_.getCharCode("z"),a=_.getCharCode("a");for(let C=a;C<=s;C++)x[Qr][C]=C-a+2;x[Ut][e]=1;const o=_.getCharCode("9"),l=_.getCharCode("0");for(let C=l;C<=o;C++)x[Ut][C]=C-l+2;x[Ut][r]=12,x[Ut][t]=13;const h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let C=0;C<h.length;C++)x[ei][_.getCharCode(h[C])]=C;const w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let C=0;C<w.length;C++)_.getCharCode(w[C])>0&&(x[qt][_.getCharCode(w[C])]=C);return x}const Tn=ss(me.createInt32Array(5,256));class Ur{constructor(e){this.text=e}encode(){const e=_.getCharCode(" "),t=_.getCharCode(`
`);let r=Jn.singletonList(Qt.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let s,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case _.getCharCode("\r"):s=a===t?2:0;break;case _.getCharCode("."):s=a===e?3:0;break;case _.getCharCode(","):s=a===e?4:0;break;case _.getCharCode(":"):s=a===e?5:0;break;default:s=0}s>0?(r=Ur.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}return Jn.min(r,(i,s)=>i.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const r=[];for(let n of e)this.updateStateForChar(n,t,r);return Ur.simplifyStates(r)}updateStateForChar(e,t,r){let n=this.text[t]&255,i=Tn[e.getMode()][n]>0,s=null;for(let a=0;a<=qt;a++){let o=Tn[a][n];if(o>0){if(s==null&&(s=e.endBinaryShift(t)),!i||a===e.getMode()||a===Ut){const l=s.latchAndAppend(a,o);r.push(l)}if(!i&&ti[e.getMode()][a]>=0){const l=s.shiftAndAppend(a,o);r.push(l)}}}if(e.getBinaryShiftByteCount()>0||Tn[e.getMode()][n]===0){let a=e.addBinaryShiftChar(t);r.push(a)}}static updateStateListForPair(e,t,r){const n=[];for(let i of e)this.updateStateForPair(i,t,r,n);return this.simplifyStates(n)}static updateStateForPair(e,t,r,n){let i=e.endBinaryShift(t);if(n.push(i.latchAndAppend(qt,r)),e.getMode()!==qt&&n.push(i.shiftAndAppend(qt,r)),r===3||r===4){let s=i.latchAndAppend(Ut,16-r).latchAndAppend(Ut,1);n.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(s)}}static simplifyStates(e){let t=[];for(const r of e){let n=!0;for(const i of t){if(i.isBetterThanOrEqualTo(r)){n=!1;break}r.isBetterThanOrEqualTo(i)&&(t=t.filter(s=>s!==i))}n&&t.push(r)}return t}}class Oe{constructor(){}static encodeBytes(e){return Oe.encode(e,Oe.DEFAULT_EC_PERCENT,Oe.DEFAULT_AZTEC_LAYERS)}static encode(e,t,r){let n=new Ur(e).encode(),i=we.truncDivision(n.getSize()*t,100)+11,s=n.getSize()+i,a,o,l,h,w;if(r!==Oe.DEFAULT_AZTEC_LAYERS){if(a=r<0,o=Math.abs(r),o>(a?Oe.MAX_NB_BITS_COMPACT:Oe.MAX_NB_BITS))throw new O(_.format("Illegal value %s for layers",r));l=Oe.totalBitsInLayer(o,a),h=Oe.WORD_SIZE[o];let j=l-l%h;if(w=Oe.stuffBits(n,h),w.getSize()+i>j)throw new O("Data to large for user specified layer");if(a&&w.getSize()>h*64)throw new O("Data to large for user specified layer")}else{h=0,w=null;for(let j=0;;j++){if(j>Oe.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(a=j<=3,o=a?j+1:j,l=Oe.totalBitsInLayer(o,a),s>l)continue;(w==null||h!==Oe.WORD_SIZE[o])&&(h=Oe.WORD_SIZE[o],w=Oe.stuffBits(n,h));let Se=l-l%h;if(!(a&&w.getSize()>h*64)&&w.getSize()+i<=Se)break}}let C=Oe.generateCheckWords(w,l,h),I=w.getSize()/h,y=Oe.generateModeMessage(a,o,I),S=(a?11:14)+o*4,M=new Int32Array(S),k;if(a){k=S;for(let j=0;j<M.length;j++)M[j]=j}else{k=S+1+2*we.truncDivision(we.truncDivision(S,2)-1,15);let j=we.truncDivision(S,2),Se=we.truncDivision(k,2);for(let Ie=0;Ie<j;Ie++){let Rt=Ie+we.truncDivision(Ie,15);M[j-Ie-1]=Se-Rt-1,M[j+Ie]=Se+Rt+1}}let Q=new Y(k);for(let j=0,Se=0;j<o;j++){let Ie=(o-j)*4+(a?9:12);for(let Rt=0;Rt<Ie;Rt++){let Wt=Rt*2;for(let Ot=0;Ot<2;Ot++)C.get(Se+Wt+Ot)&&Q.set(M[j*2+Ot],M[j*2+Rt]),C.get(Se+Ie*2+Wt+Ot)&&Q.set(M[j*2+Rt],M[S-1-j*2-Ot]),C.get(Se+Ie*4+Wt+Ot)&&Q.set(M[S-1-j*2-Ot],M[S-1-j*2-Rt]),C.get(Se+Ie*6+Wt+Ot)&&Q.set(M[S-1-j*2-Rt],M[j*2+Ot])}Se+=Ie*8}if(Oe.drawModeMessage(Q,a,k,y),a)Oe.drawBullsEye(Q,we.truncDivision(k,2),5);else{Oe.drawBullsEye(Q,we.truncDivision(k,2),7);for(let j=0,Se=0;j<we.truncDivision(S,2)-1;j+=15,Se+=16)for(let Ie=we.truncDivision(k,2)&1;Ie<k;Ie+=2)Q.set(we.truncDivision(k,2)-Se,Ie),Q.set(we.truncDivision(k,2)+Se,Ie),Q.set(Ie,we.truncDivision(k,2)-Se),Q.set(Ie,we.truncDivision(k,2)+Se)}let $=new $n;return $.setCompact(a),$.setSize(k),$.setLayers(o),$.setCodeWords(I),$.setMatrix(Q),$}static drawBullsEye(e,t,r){for(let n=0;n<r;n+=2)for(let i=t-n;i<=t+n;i++)e.set(i,t-n),e.set(i,t+n),e.set(t-n,i),e.set(t+n,i);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)}static generateModeMessage(e,t,r){let n=new Te;return e?(n.appendBits(t-1,2),n.appendBits(r-1,6),n=Oe.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(r-1,11),n=Oe.generateCheckWords(n,40,4)),n}static drawModeMessage(e,t,r,n){let i=we.truncDivision(r,2);if(t)for(let s=0;s<7;s++){let a=i-3+s;n.get(s)&&e.set(a,i-5),n.get(s+7)&&e.set(i+5,a),n.get(20-s)&&e.set(a,i+5),n.get(27-s)&&e.set(i-5,a)}else for(let s=0;s<10;s++){let a=i-5+s+we.truncDivision(s,5);n.get(s)&&e.set(a,i-7),n.get(s+10)&&e.set(i+7,a),n.get(29-s)&&e.set(a,i+7),n.get(39-s)&&e.set(i-7,a)}}static generateCheckWords(e,t,r){let n=e.getSize()/r,i=new mn(Oe.getGF(r)),s=we.truncDivision(t,r),a=Oe.bitsToWords(e,r,s);i.encode(a,s-n);let o=t%r,l=new Te;l.appendBits(0,o);for(const h of Array.from(a))l.appendBits(h,r);return l}static bitsToWords(e,t,r){let n=new Int32Array(r),i,s;for(i=0,s=e.getSize()/t;i<s;i++){let a=0;for(let o=0;o<t;o++)a|=e.get(i*t+o)?1<<t-o-1:0;n[i]=a}return n}static getGF(e){switch(e){case 4:return K.AZTEC_PARAM;case 6:return K.AZTEC_DATA_6;case 8:return K.AZTEC_DATA_8;case 10:return K.AZTEC_DATA_10;case 12:return K.AZTEC_DATA_12;default:throw new O("Unsupported word size "+e)}}static stuffBits(e,t){let r=new Te,n=e.getSize(),i=(1<<t)-2;for(let s=0;s<n;s+=t){let a=0;for(let o=0;o<t;o++)(s+o>=n||e.get(s+o))&&(a|=1<<t-1-o);(a&i)===i?(r.appendBits(a&i,t),s--):a&i?r.appendBits(a,t):(r.appendBits(a|1,t),s--)}return r}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Oe.DEFAULT_EC_PERCENT=33,Oe.DEFAULT_AZTEC_LAYERS=0,Oe.MAX_NB_BITS=32,Oe.MAX_NB_BITS_COMPACT=4,Oe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class $r{encode(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)}encodeWithHints(e,t,r,n,i){let s=bn.ISO_8859_1,a=Oe.DEFAULT_EC_PERCENT,o=Oe.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(ht.CHARACTER_SET)&&(s=Qn.forName(i.get(ht.CHARACTER_SET).toString())),i.has(ht.ERROR_CORRECTION)&&(a=we.parseInt(i.get(ht.ERROR_CORRECTION).toString())),i.has(ht.AZTEC_LAYERS)&&(o=we.parseInt(i.get(ht.AZTEC_LAYERS).toString()))),$r.encodeLayers(e,t,r,n,s,a,o)}static encodeLayers(e,t,r,n,i,s,a){if(t!==ue.AZTEC)throw new O("Can only encode AZTEC, but got "+t);let o=Oe.encode(_.getBytes(e,i),s,a);return $r.renderResult(o,r,n)}static renderResult(e,t,r){let n=e.getMatrix();if(n==null)throw new fe;let i=n.getWidth(),s=n.getHeight(),a=Math.max(t,i),o=Math.max(r,s),l=Math.min(a/i,o/s),h=(a-i*l)/2,w=(o-s*l)/2,C=new Y(a,o);for(let I=0,y=w;I<s;I++,y+=l)for(let S=0,M=h;S<i;S++,M+=l)n.get(S,I)&&C.setRegion(M,y,l,l);return C}}c.AbstractExpandedDecoder=un,c.ArgumentException=D,c.ArithmeticException=z,c.AztecCode=$n,c.AztecCodeReader=Wr,c.AztecCodeWriter=$r,c.AztecDecoder=ie,c.AztecDetector=Fn,c.AztecDetectorResult=Or,c.AztecEncoder=Oe,c.AztecHighLevelEncoder=Ur,c.AztecPoint=_t,c.BarcodeFormat=ue,c.Binarizer=oe,c.BinaryBitmap=ne,c.BitArray=Te,c.BitMatrix=Y,c.BitSource=xn,c.BrowserAztecCodeReader=vi,c.BrowserBarcodeReader=Pi,c.BrowserCodeReader=At,c.BrowserDatamatrixCodeReader=Fi,c.BrowserMultiFormatReader=ji,c.BrowserPDF417Reader=qi,c.BrowserQRCodeReader=Qi,c.BrowserQRCodeSvgWriter=xr,c.CharacterSetECI=R,c.ChecksumException=J,c.Code128Reader=ee,c.Code39Reader=ft,c.DataMatrixDecodedBitStreamParser=ir,c.DataMatrixReader=sr,c.DecodeHintType=q,c.DecoderResult=W,c.DefaultGridSampler=kn,c.DetectorResult=cr,c.EAN13Reader=fr,c.EncodeHintType=ht,c.Exception=A,c.FormatException=v,c.GenericGF=K,c.GenericGFPoly=G,c.GlobalHistogramBinarizer=he,c.GridSampler=tr,c.GridSamplerInstance=rr,c.HTMLCanvasElementLuminanceSource=Ze,c.HybridBinarizer=te,c.ITFReader=Ge,c.IllegalArgumentException=O,c.IllegalStateException=fe,c.InvertedLuminanceSource=Fe,c.LuminanceSource=Re,c.MathUtils=Ce,c.MultiFormatOneDReader=pr,c.MultiFormatReader=qn,c.MultiFormatWriter=Ji,c.NotFoundException=T,c.OneDReader=it,c.PDF417DecodedBitStreamParser=P,c.PDF417DecoderErrorCorrection=Xn,c.PDF417Reader=pt,c.PDF417ResultMetadata=Zn,c.PerspectiveTransform=Gt,c.PlanarYUVLuminanceSource=jt,c.QRCodeByteMatrix=qr,c.QRCodeDataMask=kt,c.QRCodeDecodedBitStreamParser=Qe,c.QRCodeDecoderErrorCorrectionLevel=Ye,c.QRCodeDecoderFormatInformation=bt,c.QRCodeEncoder=Ke,c.QRCodeEncoderQRCode=gr,c.QRCodeMaskUtil=tt,c.QRCodeMatrixUtil=Ae,c.QRCodeMode=xe,c.QRCodeReader=ar,c.QRCodeVersion=de,c.QRCodeWriter=Ir,c.RGBLuminanceSource=In,c.RSS14Reader=et,c.RSSExpandedReader=Z,c.ReaderException=jr,c.ReedSolomonDecoder=Me,c.ReedSolomonEncoder=mn,c.ReedSolomonException=ge,c.Result=$e,c.ResultMetadataType=U,c.ResultPoint=ce,c.StringUtils=_,c.UnsupportedOperationException=V,c.VideoInputDevice=Dt,c.WhiteRectangleDetector=Mt,c.WriterException=He,c.ZXingArrays=me,c.ZXingCharset=Qn,c.ZXingInteger=we,c.ZXingStandardCharsets=bn,c.ZXingStringBuilder=H,c.ZXingStringEncoding=B,c.ZXingSystem=le,c.createAbstractExpandedDecoder=Hn,Object.defineProperty(c,"__esModule",{value:!0})})})(vn,vn.exports);var je=vn.exports;const Ns=Ni(je),Rs=ps({__proto__:null,default:Ns},[je]);var ci=function(){function g(f,c,d){if(this.formatMap=new Map([[ae.QR_CODE,je.BarcodeFormat.QR_CODE],[ae.AZTEC,je.BarcodeFormat.AZTEC],[ae.CODABAR,je.BarcodeFormat.CODABAR],[ae.CODE_39,je.BarcodeFormat.CODE_39],[ae.CODE_93,je.BarcodeFormat.CODE_93],[ae.CODE_128,je.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,je.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,je.BarcodeFormat.MAXICODE],[ae.ITF,je.BarcodeFormat.ITF],[ae.EAN_13,je.BarcodeFormat.EAN_13],[ae.EAN_8,je.BarcodeFormat.EAN_8],[ae.PDF_417,je.BarcodeFormat.PDF_417],[ae.RSS_14,je.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,je.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,je.BarcodeFormat.UPC_A],[ae.UPC_E,je.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,je.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Rs)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=c,this.logger=d;var E=this.createZXingFormats(f),u=new Map;u.set(je.DecodeHintType.POSSIBLE_FORMATS,E),u.set(je.DecodeHintType.TRY_HARDER,!1),this.hints=u}return g.prototype.decodeAsync=function(f){var c=this;return new Promise(function(d,E){try{d(c.decode(f))}catch(u){E(u)}})},g.prototype.decode=function(f){var c=new je.MultiFormatReader(this.verbose,this.hints),d=new je.HTMLCanvasElementLuminanceSource(f),E=new je.BinaryBitmap(new je.HybridBinarizer(d)),u=c.decode(E);return{text:u.text,format:Ti.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},g.prototype.createReverseFormatMap=function(){var f=new Map;return this.formatMap.forEach(function(c,d,E){f.set(c,d)}),f},g.prototype.toHtml5QrcodeSupportedFormats=function(f){if(!this.reverseFormatMap.has(f))throw"reverseFormatMap doesn't have ".concat(f);return this.reverseFormatMap.get(f)},g.prototype.createZXingFormats=function(f){for(var c=[],d=0,E=f;d<E.length;d++){var u=E[d];this.formatMap.has(u)?c.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return c},g.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},g}(),Os=globalThis&&globalThis.__awaiter||function(g,f,c,d){function E(u){return u instanceof c?u:new c(function(p){p(u)})}return new(c||(c=Promise))(function(u,p){function N(D){try{A(d.next(D))}catch(O){p(O)}}function b(D){try{A(d.throw(D))}catch(O){p(O)}}function A(D){D.done?u(D.value):E(D.value).then(N,b)}A((d=d.apply(g,f||[])).next())})},vs=globalThis&&globalThis.__generator||function(g,f){var c={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},d,E,u,p;return p={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function N(A){return function(D){return b([A,D])}}function b(A){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,A[0]&&(c=0)),c;)try{if(d=1,E&&(u=A[0]&2?E.return:A[0]?E.throw||((u=E.return)&&u.call(E),0):E.next)&&!(u=u.call(E,A[1])).done)return u;switch(E=0,u&&(A=[A[0]&2,u.value]),A[0]){case 0:case 1:u=A;break;case 4:return c.label++,{value:A[1],done:!1};case 5:c.label++,E=A[1],A=[0];continue;case 7:A=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(A[0]===6||A[0]===2)){c=0;continue}if(A[0]===3&&(!u||A[1]>u[0]&&A[1]<u[3])){c.label=A[1];break}if(A[0]===6&&c.label<u[1]){c.label=u[1],u=A;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(A);break}u[2]&&c.ops.pop(),c.trys.pop();continue}A=f.call(g,c)}catch(D){A=[6,D],E=0}finally{d=u=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},fi=function(){function g(f,c,d){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!g.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=d;var E=this.createBarcodeDetectorFormats(f);if(this.detector=new BarcodeDetector(E),!this.detector)throw"BarcodeDetector detector not supported"}return g.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var f=new BarcodeDetector({formats:["qr_code"]});return typeof f<"u"},g.prototype.decodeAsync=function(f){return Os(this,void 0,void 0,function(){var c,d;return vs(this,function(E){switch(E.label){case 0:return[4,this.detector.detect(f)];case 1:if(c=E.sent(),!c||c.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(c),[2,{text:d.rawValue,format:Ti.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},g.prototype.selectLargestBarcode=function(f){for(var c=null,d=0,E=0,u=f;E<u.length;E++){var p=u[E],N=p.boundingBox.width*p.boundingBox.height;N>d&&(d=N,c=p)}if(!c)throw"No largest barcode found";return c},g.prototype.createBarcodeDetectorFormats=function(f){for(var c=[],d=0,E=f;d<E.length;d++){var u=E[d];this.formatMap.has(u)?c.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:c}},g.prototype.toHtml5QrcodeSupportedFormats=function(f){if(!this.reverseFormatMap.has(f))throw"reverseFormatMap doesn't have ".concat(f);return this.reverseFormatMap.get(f)},g.prototype.createReverseFormatMap=function(){var f=new Map;return this.formatMap.forEach(function(c,d,E){f.set(c,d)}),f},g.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},g}(),ui=globalThis&&globalThis.__awaiter||function(g,f,c,d){function E(u){return u instanceof c?u:new c(function(p){p(u)})}return new(c||(c=Promise))(function(u,p){function N(D){try{A(d.next(D))}catch(O){p(O)}}function b(D){try{A(d.throw(D))}catch(O){p(O)}}function A(D){D.done?u(D.value):E(D.value).then(N,b)}A((d=d.apply(g,f||[])).next())})},hi=globalThis&&globalThis.__generator||function(g,f){var c={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},d,E,u,p;return p={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function N(A){return function(D){return b([A,D])}}function b(A){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,A[0]&&(c=0)),c;)try{if(d=1,E&&(u=A[0]&2?E.return:A[0]?E.throw||((u=E.return)&&u.call(E),0):E.next)&&!(u=u.call(E,A[1])).done)return u;switch(E=0,u&&(A=[A[0]&2,u.value]),A[0]){case 0:case 1:u=A;break;case 4:return c.label++,{value:A[1],done:!1};case 5:c.label++,E=A[1],A=[0];continue;case 7:A=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(A[0]===6||A[0]===2)){c=0;continue}if(A[0]===3&&(!u||A[1]>u[0]&&A[1]<u[3])){c.label=A[1];break}if(A[0]===6&&c.label<u[1]){c.label=u[1],u=A;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(A);break}u[2]&&c.ops.pop(),c.trys.pop();continue}A=f.call(g,c)}catch(D){A=[6,D],E=0}finally{d=u=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Ds=function(){function g(f,c,d,E){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,c&&fi.isSupported()?(this.primaryDecoder=new fi(f,d,E),this.secondaryDecoder=new ci(f,d,E)):this.primaryDecoder=new ci(f,d,E)}return g.prototype.decodeAsync=function(f){return ui(this,void 0,void 0,function(){var c;return hi(this,function(d){switch(d.label){case 0:c=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(f)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(c),[7];case 4:return[2]}})})},g.prototype.decodeRobustlyAsync=function(f){return ui(this,void 0,void 0,function(){var c,d;return hi(this,function(E){switch(E.label){case 0:c=performance.now(),E.label=1;case 1:return E.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(f)];case 2:return[2,E.sent()];case 3:if(d=E.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(f)];throw d;case 4:return this.possiblyLogPerformance(c),[7];case 5:return[2]}})})},g.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},g.prototype.possiblyLogPerformance=function(f){if(this.verbose){var c=performance.now()-f;this.executionResults.push(c),this.executions++,this.possiblyFlushPerformanceReport()}},g.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var f=0,c=0,d=this.executionResults;c<d.length;c++){var E=d[c];f+=E}var u=f/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},g}(),Pn=globalThis&&globalThis.__extends||function(){var g=function(f,c){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,E){d.__proto__=E}||function(d,E){for(var u in E)Object.prototype.hasOwnProperty.call(E,u)&&(d[u]=E[u])},g(f,c)};return function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");g(f,c);function d(){this.constructor=f}f.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),rn=globalThis&&globalThis.__awaiter||function(g,f,c,d){function E(u){return u instanceof c?u:new c(function(p){p(u)})}return new(c||(c=Promise))(function(u,p){function N(D){try{A(d.next(D))}catch(O){p(O)}}function b(D){try{A(d.throw(D))}catch(O){p(O)}}function A(D){D.done?u(D.value):E(D.value).then(N,b)}A((d=d.apply(g,f||[])).next())})},nn=globalThis&&globalThis.__generator||function(g,f){var c={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},d,E,u,p;return p={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function N(A){return function(D){return b([A,D])}}function b(A){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,A[0]&&(c=0)),c;)try{if(d=1,E&&(u=A[0]&2?E.return:A[0]?E.throw||((u=E.return)&&u.call(E),0):E.next)&&!(u=u.call(E,A[1])).done)return u;switch(E=0,u&&(A=[A[0]&2,u.value]),A[0]){case 0:case 1:u=A;break;case 4:return c.label++,{value:A[1],done:!1};case 5:c.label++,E=A[1],A=[0];continue;case 7:A=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(A[0]===6||A[0]===2)){c=0;continue}if(A[0]===3&&(!u||A[1]>u[0]&&A[1]<u[3])){c.label=A[1];break}if(A[0]===6&&c.label<u[1]){c.label=u[1],u=A;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(A);break}u[2]&&c.ops.pop(),c.trys.pop();continue}A=f.call(g,c)}catch(D){A=[6,D],E=0}finally{d=u=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Ri=function(){function g(f,c){this.name=f,this.track=c}return g.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},g.prototype.apply=function(f){var c={};c[this.name]=f;var d={advanced:[c]};return this.track.applyConstraints(d)},g.prototype.value=function(){var f=this.track.getSettings();if(this.name in f){var c=f[this.name];return c}return null},g}(),Ms=function(g){Pn(f,g);function f(c,d){return g.call(this,c,d)||this}return f.prototype.min=function(){return this.getCapabilities().min},f.prototype.max=function(){return this.getCapabilities().max},f.prototype.step=function(){return this.getCapabilities().step},f.prototype.apply=function(c){var d={};d[this.name]=c;var E={advanced:[d]};return this.track.applyConstraints(E)},f.prototype.getCapabilities=function(){this.failIfNotSupported();var c=this.track.getCapabilities(),d=c[this.name];return{min:d.min,max:d.max,step:d.step}},f.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},f}(Ri),Bs=function(g){Pn(f,g);function f(c){return g.call(this,"zoom",c)||this}return f}(Ms),Ls=function(g){Pn(f,g);function f(c){return g.call(this,"torch",c)||this}return f}(Ri),Ps=function(){function g(f){this.track=f}return g.prototype.zoomFeature=function(){return new Bs(this.track)},g.prototype.torchFeature=function(){return new Ls(this.track)},g}(),ks=function(){function g(f,c,d){this.isClosed=!1,this.parentElement=f,this.mediaStream=c,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),f.append(this.surface)}return g.prototype.createVideoElement=function(f){var c=document.createElement("video");return c.style.width="".concat(f,"px"),c.style.display="block",c.muted=!0,c.setAttribute("muted","true"),c.playsInline=!0,c},g.prototype.setupSurface=function(){var f=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var c=function(){var d=f.surface.clientWidth,E=f.surface.clientHeight;f.callbacks.onRenderSurfaceReady(d,E),f.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.srcObject=this.mediaStream,this.surface.play()},g.create=function(f,c,d,E){return rn(this,void 0,void 0,function(){var u,p;return nn(this,function(N){switch(N.label){case 0:return u=new g(f,c,E),d.aspectRatio?(p={aspectRatio:d.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:N.sent(),N.label=2;case 2:return u.setupSurface(),[2,u]}})})},g.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},g.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},g.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},g.prototype.resume=function(f){this.failIfClosed();var c=this,d=function(){setTimeout(f,200),c.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},g.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},g.prototype.getSurface=function(){return this.failIfClosed(),this.surface},g.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},g.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},g.prototype.applyVideoConstraints=function(f){return rn(this,void 0,void 0,function(){return nn(this,function(c){if("aspectRatio"in f)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(f)]})})},g.prototype.close=function(){if(this.isClosed)return Promise.resolve();var f=this;return new Promise(function(c,d){var E=f.mediaStream.getVideoTracks(),u=E.length,p=0;f.mediaStream.getVideoTracks().forEach(function(N){f.mediaStream.removeTrack(N),N.stop(),++p,p>=u&&(f.isClosed=!0,f.parentElement.removeChild(f.surface),c())})})},g.prototype.getCapabilities=function(){return new Ps(this.getFirstTrackOrFail())},g}(),Fs=function(){function g(f){this.mediaStream=f}return g.prototype.render=function(f,c,d){return rn(this,void 0,void 0,function(){return nn(this,function(E){return[2,ks.create(f,this.mediaStream,c,d)]})})},g.create=function(f){return rn(this,void 0,void 0,function(){var c,d;return nn(this,function(E){switch(E.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:f},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return d=E.sent(),[2,new g(d)]}})})},g}(),di=globalThis&&globalThis.__awaiter||function(g,f,c,d){function E(u){return u instanceof c?u:new c(function(p){p(u)})}return new(c||(c=Promise))(function(u,p){function N(D){try{A(d.next(D))}catch(O){p(O)}}function b(D){try{A(d.throw(D))}catch(O){p(O)}}function A(D){D.done?u(D.value):E(D.value).then(N,b)}A((d=d.apply(g,f||[])).next())})},gi=globalThis&&globalThis.__generator||function(g,f){var c={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},d,E,u,p;return p={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function N(A){return function(D){return b([A,D])}}function b(A){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,A[0]&&(c=0)),c;)try{if(d=1,E&&(u=A[0]&2?E.return:A[0]?E.throw||((u=E.return)&&u.call(E),0):E.next)&&!(u=u.call(E,A[1])).done)return u;switch(E=0,u&&(A=[A[0]&2,u.value]),A[0]){case 0:case 1:u=A;break;case 4:return c.label++,{value:A[1],done:!1};case 5:c.label++,E=A[1],A=[0];continue;case 7:A=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(A[0]===6||A[0]===2)){c=0;continue}if(A[0]===3&&(!u||A[1]>u[0]&&A[1]<u[3])){c.label=A[1];break}if(A[0]===6&&c.label<u[1]){c.label=u[1],u=A;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(A);break}u[2]&&c.ops.pop(),c.trys.pop();continue}A=f.call(g,c)}catch(D){A=[6,D],E=0}finally{d=u=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Us=function(){function g(){}return g.failIfNotSupported=function(){return di(this,void 0,void 0,function(){return gi(this,function(f){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new g]})})},g.prototype.create=function(f){return di(this,void 0,void 0,function(){return gi(this,function(c){return[2,Fs.create(f)]})})},g}(),Vs=globalThis&&globalThis.__awaiter||function(g,f,c,d){function E(u){return u instanceof c?u:new c(function(p){p(u)})}return new(c||(c=Promise))(function(u,p){function N(D){try{A(d.next(D))}catch(O){p(O)}}function b(D){try{A(d.throw(D))}catch(O){p(O)}}function A(D){D.done?u(D.value):E(D.value).then(N,b)}A((d=d.apply(g,f||[])).next())})},Gs=globalThis&&globalThis.__generator||function(g,f){var c={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},d,E,u,p;return p={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function N(A){return function(D){return b([A,D])}}function b(A){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,A[0]&&(c=0)),c;)try{if(d=1,E&&(u=A[0]&2?E.return:A[0]?E.throw||((u=E.return)&&u.call(E),0):E.next)&&!(u=u.call(E,A[1])).done)return u;switch(E=0,u&&(A=[A[0]&2,u.value]),A[0]){case 0:case 1:u=A;break;case 4:return c.label++,{value:A[1],done:!1};case 5:c.label++,E=A[1],A=[0];continue;case 7:A=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(A[0]===6||A[0]===2)){c=0;continue}if(A[0]===3&&(!u||A[1]>u[0]&&A[1]<u[3])){c.label=A[1];break}if(A[0]===6&&c.label<u[1]){c.label=u[1],u=A;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(A);break}u[2]&&c.ops.pop(),c.trys.pop();continue}A=f.call(g,c)}catch(D){A=[6,D],E=0}finally{d=u=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Hs=function(){function g(){}return g.retrieve=function(){if(navigator.mediaDevices)return g.getCamerasFromMediaDevices();var f=MediaStreamTrack;return MediaStreamTrack&&f.getSources?g.getCamerasFromMediaStreamTrack():g.rejectWithError()},g.rejectWithError=function(){var f=Tr.unableToQuerySupportedDevices();return g.isHttpsOrLocalhost()||(f=Tr.insecureContextCameraQueryError()),Promise.reject(f)},g.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var f=location.host.split(":")[0];return f==="127.0.0.1"||f==="localhost"},g.getCamerasFromMediaDevices=function(){return Vs(this,void 0,void 0,function(){var f,c,d,E,u,p,N;return Gs(this,function(b){switch(b.label){case 0:return f=function(A){for(var D=A.getVideoTracks(),O=0,ne=D;O<ne.length;O++){var J=ne[O];J.enabled=!1,J.stop(),A.removeTrack(J)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return c=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=b.sent(),E=[],u=0,p=d;u<p.length;u++)N=p[u],N.kind==="videoinput"&&E.push({id:N.deviceId,label:N.label});return f(c),[2,E]}})})},g.getCamerasFromMediaStreamTrack=function(){return new Promise(function(f,c){var d=function(u){for(var p=[],N=0,b=u;N<b.length;N++){var A=b[N];A.kind==="video"&&p.push({id:A.id,label:A.label})}f(p)},E=MediaStreamTrack;E.getSources(d)})},g}(),rt;(function(g){g[g.UNKNOWN=0]="UNKNOWN",g[g.NOT_STARTED=1]="NOT_STARTED",g[g.SCANNING=2]="SCANNING",g[g.PAUSED=3]="PAUSED"})(rt||(rt={}));var Ws=function(){function g(){this.state=rt.NOT_STARTED,this.onGoingTransactionNewState=rt.UNKNOWN}return g.prototype.directTransition=function(f){this.failIfTransitionOngoing(),this.validateTransition(f),this.state=f},g.prototype.startTransition=function(f){return this.failIfTransitionOngoing(),this.validateTransition(f),this.onGoingTransactionNewState=f,this},g.prototype.execute=function(){if(this.onGoingTransactionNewState===rt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var f=this.onGoingTransactionNewState;this.onGoingTransactionNewState=rt.UNKNOWN,this.directTransition(f)},g.prototype.cancel=function(){if(this.onGoingTransactionNewState===rt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=rt.UNKNOWN},g.prototype.getState=function(){return this.state},g.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==rt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},g.prototype.validateTransition=function(f){switch(this.state){case rt.UNKNOWN:throw"Transition from unknown is not allowed";case rt.NOT_STARTED:this.failIfNewStateIs(f,[rt.PAUSED]);break;case rt.SCANNING:break;case rt.PAUSED:break}},g.prototype.failIfNewStateIs=function(f,c){for(var d=0,E=c;d<E.length;d++){var u=E[d];if(f===u)throw"Cannot transition from ".concat(this.state," to ").concat(f)}},g}(),Xs=function(){function g(f){this.stateManager=f}return g.prototype.startTransition=function(f){return this.stateManager.startTransition(f)},g.prototype.directTransition=function(f){this.stateManager.directTransition(f)},g.prototype.getState=function(){return this.stateManager.getState()},g.prototype.canScanFile=function(){return this.stateManager.getState()===rt.NOT_STARTED},g.prototype.isScanning=function(){return this.stateManager.getState()!==rt.NOT_STARTED},g.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===rt.SCANNING},g.prototype.isPaused=function(){return this.stateManager.getState()===rt.PAUSED},g}(),Ys=function(){function g(){}return g.create=function(){return new Xs(new Ws)},g}(),Zs=globalThis&&globalThis.__extends||function(){var g=function(f,c){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,E){d.__proto__=E}||function(d,E){for(var u in E)Object.prototype.hasOwnProperty.call(E,u)&&(d[u]=E[u])},g(f,c)};return function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");g(f,c);function d(){this.constructor=f}f.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),Lt=function(g){Zs(f,g);function f(){return g!==null&&g.apply(this,arguments)||this}return f.DEFAULT_WIDTH=300,f.DEFAULT_WIDTH_OFFSET=2,f.FILE_SCAN_MIN_HEIGHT=300,f.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,f.MIN_QR_BOX_SIZE=50,f.SHADED_LEFT=1,f.SHADED_RIGHT=2,f.SHADED_TOP=3,f.SHADED_BOTTOM=4,f.SHADED_REGION_ELEMENT_ID="qr-shaded-region",f.VERBOSE=!1,f.BORDER_SHADER_DEFAULT_COLOR="#ffffff",f.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",f}(ys),zs=function(){function g(f,c){this.logger=c,this.fps=Lt.SCAN_DEFAULT_FPS,f?(f.fps&&(this.fps=f.fps),this.disableFlip=f.disableFlip===!0,this.qrbox=f.qrbox,this.aspectRatio=f.aspectRatio,this.videoConstraints=f.videoConstraints):this.disableFlip=Lt.DEFAULT_DISABLE_FLIP}return g.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Si.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},g.prototype.isShadedBoxEnabled=function(){return!$t(this.qrbox)},g.create=function(f,c){return new g(f,c)},g}(),Ks=function(){function g(f,c){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(f))throw"HTML Element with id=".concat(f," not found");this.elementId=f,this.verbose=!1;var d;typeof c=="boolean"?this.verbose=c===!0:c&&(d=c,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new Ss(this.verbose),this.qrcode=new Ds(this.getSupportedFormats(c),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ys.create()}return g.prototype.start=function(f,c,d,E){var u=this;if(!f)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;E?p=E:p=this.verbose?this.logger.log:function(){};var N=zs.create(c,this.logger);this.clearElement();var b=!1;N.videoConstraints&&(N.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=b,D=document.getElementById(this.elementId);D.clientWidth?D.clientWidth:Lt.DEFAULT_WIDTH,D.style.position="relative",this.shouldScan=!0,this.element=D;var O=this,ne=this.stateManagerProxy.startTransition(rt.SCANNING);return new Promise(function(J,oe){var le=A?N.videoConstraints:O.createVideoConstraints(f);if(!le){ne.cancel(),oe("videoConstraints should be defined");return}var Xe={};(!A||N.aspectRatio)&&(Xe.aspectRatio=N.aspectRatio);var ct={onRenderSurfaceReady:function(me,we){O.setupUi(me,we,N),O.isScanning=!0,O.foreverScan(N,d,p)}};Us.failIfNotSupported().then(function(me){me.create(le).then(function(we){return we.render(u.element,Xe,ct).then(function(Te){O.renderedCamera=Te,ne.execute(),J(null)}).catch(function(Te){ne.cancel(),oe(Te)})}).catch(function(we){ne.cancel(),oe(Tr.errorGettingUserMedia(we))})}).catch(function(me){ne.cancel(),oe(Tr.cameraStreamingNotSupported())})})},g.prototype.pause=function(f){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(rt.PAUSED),this.showPausedState(),($t(f)||f!==!0)&&(f=!1),f&&this.renderedCamera&&this.renderedCamera.pause()},g.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var f=this,c=function(){f.stateManagerProxy.directTransition(rt.SCANNING),f.hidePausedState()};if(!this.renderedCamera.isPaused()){c();return}this.renderedCamera.resume(function(){c()})},g.prototype.getState=function(){return this.stateManagerProxy.getState()},g.prototype.stop=function(){var f=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var c=this.stateManagerProxy.startTransition(rt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(f.element){var u=document.getElementById(Lt.SHADED_REGION_ELEMENT_ID);u&&f.element.removeChild(u)}},E=this;return this.renderedCamera.close().then(function(){return E.renderedCamera=null,E.element&&(E.element.removeChild(E.canvasElement),E.canvasElement=null),d(),E.qrRegion&&(E.qrRegion=null),E.context&&(E.context=null),c.execute(),E.hidePausedState(),E.isScanning=!1,Promise.resolve()})},g.prototype.scanFile=function(f,c){return this.scanFileV2(f,c).then(function(d){return d.decodedText})},g.prototype.scanFileV2=function(f,c){var d=this;if(!f||!(f instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if($t(c)&&(c=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(E,u){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(f);var p=new Image;p.onload=function(){var N=p.width,b=p.height,A=document.getElementById(d.elementId),D=A.clientWidth?A.clientWidth:Lt.DEFAULT_WIDTH,O=Math.max(A.clientHeight?A.clientHeight:b,Lt.FILE_SCAN_MIN_HEIGHT),ne=d.computeCanvasDrawConfig(N,b,D,O);if(c){var J=d.createCanvasElement(D,O,"qr-canvas-visible");J.style.display="inline-block",A.appendChild(J);var oe=J.getContext("2d");if(!oe)throw"Unable to get 2d context from canvas";oe.canvas.width=D,oe.canvas.height=O,oe.drawImage(p,0,0,N,b,ne.x,ne.y,ne.width,ne.height)}var le=Lt.FILE_SCAN_HIDDEN_CANVAS_PADDING,Xe=Math.max(p.width,ne.width),ct=Math.max(p.height,ne.height),me=Xe+2*le,we=ct+2*le,Te=d.createCanvasElement(me,we);A.appendChild(Te);var re=Te.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=me,re.canvas.height=we,re.drawImage(p,0,0,N,b,le,le,Xe,ct);try{d.qrcode.decodeRobustlyAsync(Te).then(function(q){E(li.createFromQrcodeResult(q))}).catch(u)}catch(q){u("QR code parse error, error = ".concat(q))}},p.onerror=u,p.onabort=u,p.onstalled=u,p.onsuspend=u,p.src=URL.createObjectURL(f)})},g.prototype.clear=function(){this.clearElement()},g.getCameras=function(){return Hs.retrieve()},g.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},g.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},g.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},g.prototype.applyVideoConstraints=function(f){if(f){if(!Si.isMediaStreamConstraintsValid(f,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(f)},g.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},g.prototype.getSupportedFormats=function(f){var c=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!f||typeof f=="boolean"||!f.formatsToSupport)return c;if(!Array.isArray(f.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(f.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],E=0,u=f.formatsToSupport;E<u.length;E++){var p=u[E];_s(p)?d.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},g.prototype.getUseBarCodeDetectorIfSupported=function(f){if($t(f))return!0;if(!$t(f.useBarCodeDetectorIfSupported))return f.useBarCodeDetectorIfSupported!==!1;if($t(f.experimentalFeatures))return!0;var c=f.experimentalFeatures;return $t(c.useBarCodeDetectorIfSupported)?!0:c.useBarCodeDetectorIfSupported!==!1},g.prototype.validateQrboxSize=function(f,c,d){var E=this,u=d.qrbox;this.validateQrboxConfig(u);var p=this.toQrdimensions(f,c,u),N=function(A){if(A<Lt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Lt.MIN_QR_BOX_SIZE,"px.")},b=function(A){return A>f&&(E.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=f),A};N(p.width),N(p.height),p.width=b(p.width)},g.prototype.validateQrboxConfig=function(f){if(typeof f!="number"&&typeof f!="function"&&(f.width===void 0||f.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},g.prototype.toQrdimensions=function(f,c,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(f,c)}catch(E){throw new Error("qrbox config was passed as a function but it failed with unknown error"+E)}return d},g.prototype.setupUi=function(f,c,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(f,c,d);var E=$t(d.qrbox)?{width:f,height:c}:d.qrbox;this.validateQrboxConfig(E);var u=this.toQrdimensions(f,c,E);u.height>c&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=d.isShadedBoxEnabled()&&u.height<=c,N={x:0,y:0,width:f,height:c},b=p?this.getShadedRegionBounds(f,c,u):N,A=this.createCanvasElement(b.width,b.height),D={willReadFrequently:!0},O=A.getContext("2d",D);O.canvas.width=b.width,O.canvas.height=b.height,this.element.append(A),p&&this.possiblyInsertShadingElement(this.element,f,c,u),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=O,this.canvasElement=A},g.prototype.createScannerPausedUiElement=function(f){var c=document.createElement("div");c.innerText=Tr.scannerPaused(),c.style.display="none",c.style.position="absolute",c.style.top="0px",c.style.zIndex="1",c.style.background="rgba(9, 9, 9, 0.46)",c.style.color="#FFECEC",c.style.textAlign="center",c.style.width="100%",f.appendChild(c),this.scannerPausedUiElement=c},g.prototype.scanContext=function(f,c){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(E){return f(E.text,li.createFromQrcodeResult(E)),d.possiblyUpdateShaders(!0),!0}).catch(function(E){d.possiblyUpdateShaders(!1);var u=Tr.codeParseError(E);return c(u,Ts.createFrom(u)),!1})},g.prototype.foreverScan=function(f,c,d){var E=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),p=u.videoWidth/u.clientWidth,N=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*p,A=this.qrRegion.height*N,D=this.qrRegion.x*p,O=this.qrRegion.y*N;this.context.drawImage(u,D,O,b,A,0,0,this.qrRegion.width,this.qrRegion.height);var ne=function(){E.foreverScanTimeout=setTimeout(function(){E.foreverScan(f,c,d)},E.getTimeoutFps(f.fps))};this.scanContext(c,d).then(function(J){!J&&f.disableFlip!==!0?(E.context.translate(E.context.canvas.width,0),E.context.scale(-1,1),E.scanContext(c,d).finally(function(){ne()})):ne()}).catch(function(J){E.logger.logError("Error happend while scanning context",J),ne()})}},g.prototype.createVideoConstraints=function(f){if(typeof f=="string")return{deviceId:{exact:f}};if(typeof f=="object"){var c="facingMode",d="deviceId",E={user:!0,environment:!0},u="exact",p=function(oe){if(oe in E)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(oe,"'")},N=Object.keys(f);if(N.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(N.length," keys");var b=Object.keys(f)[0];if(b!==c&&b!==d)throw"Only '".concat(c,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(b===c){var A=f.facingMode;if(typeof A=="string"){if(p(A))return{facingMode:A}}else if(typeof A=="object")if(u in A){if(p(A["".concat(u)]))return{facingMode:{exact:A["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var D=typeof A;throw"Invalid type of 'facingMode' = ".concat(D)}}else{var O=f.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(u in O)return{deviceId:{exact:O["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var ne=typeof O;throw"Invalid type of 'deviceId' = ".concat(ne)}}}var J=typeof f;throw"Invalid type of 'cameraIdOrConfig' = ".concat(J)},g.prototype.computeCanvasDrawConfig=function(f,c,d,E){if(f<=d&&c<=E){var u=(d-f)/2,p=(E-c)/2;return{x:u,y:p,width:f,height:c}}else{var N=f,b=c;return f>d&&(c=d/f*c,f=d),c>E&&(f=E/c*f,c=E),this.logger.log("Image downsampled from "+"".concat(N,"X").concat(b)+" to ".concat(f,"X").concat(c,".")),this.computeCanvasDrawConfig(f,c,d,E)}},g.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var f=document.getElementById(this.elementId);f&&(f.innerHTML="")},g.prototype.possiblyUpdateShaders=function(f){this.qrMatch!==f&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(c){c.style.backgroundColor=f?Lt.BORDER_SHADER_MATCH_COLOR:Lt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=f)},g.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},g.prototype.createCanvasElement=function(f,c,d){var E=f,u=c,p=document.createElement("canvas");return p.style.width="".concat(E,"px"),p.style.height="".concat(u,"px"),p.style.display="none",p.id=$t(d)?"qr-canvas":d,p},g.prototype.getShadedRegionBounds=function(f,c,d){if(d.width>f||d.height>c)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(f-d.width)/2,y:(c-d.height)/2,width:d.width,height:d.height}},g.prototype.possiblyInsertShadingElement=function(f,c,d,E){if(!(c-E.width<1||d-E.height<1)){var u=document.createElement("div");u.style.position="absolute";var p=(c-E.width)/2,N=(d-E.height)/2;if(u.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(Lt.SHADED_REGION_ELEMENT_ID),c-E.width<11||d-E.height<11)this.hasBorderShaders=!1;else{var b=5,A=40;this.insertShaderBorders(u,A,b,-b,null,0,!0),this.insertShaderBorders(u,A,b,-b,null,0,!1),this.insertShaderBorders(u,A,b,null,-b,0,!0),this.insertShaderBorders(u,A,b,null,-b,0,!1),this.insertShaderBorders(u,b,A+b,-b,null,-b,!0),this.insertShaderBorders(u,b,A+b,null,-b,-b,!0),this.insertShaderBorders(u,b,A+b,-b,null,-b,!1),this.insertShaderBorders(u,b,A+b,null,-b,-b,!1),this.hasBorderShaders=!0}f.append(u)}},g.prototype.insertShaderBorders=function(f,c,d,E,u,p,N){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Lt.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(c,"px"),b.style.height="".concat(d,"px"),E!==null&&(b.style.top="".concat(E,"px")),u!==null&&(b.style.bottom="".concat(u,"px")),N?b.style.left="".concat(p,"px"):b.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),f.appendChild(b)},g.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},g.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},g.prototype.getTimeoutFps=function(f){return 1e3/f},g}();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var xi;(function(g){g[g.STATUS_DEFAULT=0]="STATUS_DEFAULT",g[g.STATUS_SUCCESS=1]="STATUS_SUCCESS",g[g.STATUS_WARNING=2]="STATUS_WARNING",g[g.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(xi||(xi={}));function js(g){let f,c,d,E,u;return{c(){f=xt("span"),c=Jt("qr_code_2"),d=Xt(),E=xt("span"),u=Jt("Upload Secret QR code"),this.h()},l(p){f=wt(p,"SPAN",{class:!0});var N=vt(f);c=er(N,"qr_code_2"),N.forEach(pe),d=Yt(p),E=wt(p,"SPAN",{class:!0});var b=vt(E);u=er(b,"Upload Secret QR code"),b.forEach(pe),this.h()},h(){ve(f,"class","material-icons"),ve(E,"class","label")},m(p,N){Ue(p,f,N),Vt(f,c),Ue(p,d,N),Ue(p,E,N),Vt(E,u)},p:en,d(p){p&&pe(f),p&&pe(d),p&&pe(E)}}}function qs(g){let f,c,d,E,u,p,N,b;return d=new on({props:{class:"upload",$$slots:{default:[js]},$$scope:{ctx:g}}}),d.$on("click",g[4]),{c(){f=xt("div"),c=Xt(),st(d.$$.fragment),E=Xt(),u=xt("input"),this.h()},l(A){f=wt(A,"DIV",{id:!0,width:!0,height:!0,class:!0}),vt(f).forEach(pe),c=Yt(A),at(d.$$.fragment,A),E=Yt(A),u=wt(A,"INPUT",{style:!0,type:!0,accept:!0,id:!0,name:!0}),this.h()},h(){ve(f,"id","reader"),ve(f,"width","200px"),ve(f,"height","200px"),ve(f,"class","svelte-17pu3xa"),ls(u,"display","none"),ve(u,"type","file"),ve(u,"accept","image/*"),ve(u,"id","input-file"),ve(u,"name","input-file")},m(A,D){Ue(A,f,D),g[3](f),Ue(A,c,D),ot(d,A,D),Ue(A,E,D),Ue(A,u,D),g[5](u),p=!0,N||(b=Ci(u,"change",g[2]),N=!0)},p(A,[D]){const O={};D&2048&&(O.$$scope={dirty:D,ctx:A}),d.$set(O)},i(A){p||(De(d.$$.fragment,A),p=!0)},o(A){ke(d.$$.fragment,A),p=!1},d(A){A&&pe(f),g[3](null),A&&pe(c),lt(d,A),A&&pe(E),A&&pe(u),g[5](null),N=!1,b()}}}function Qs(g,f,c){let d;Nn(g,ni,J=>c(8,d=J));let E,u,p,N,b=pi();const A=J=>{if(N=new Ks("reader"),J.target.files.length==0)return;const oe=J.target.files[0];mi(ni,d=oe,d),E=oe.name.split(".")[0].trim(),N.scanFile(oe,!0).then(Xe=>{b("scanned",{filename:E,data:Xe})}).catch(Xe=>{alert("Failed to scan Code")})};function D(J){wr[J?"unshift":"push"](()=>{u=J,c(0,u)})}const O=()=>p.click();function ne(J){wr[J?"unshift":"push"](()=>{p=J,c(1,p)})}return[u,p,A,D,O,ne]}class $s extends Dn{constructor(f){super(),Mn(this,f,Qs,qs,Bn,{})}}var Oi={exports:{}};(function(g,f){var c=function(){var d=function(re,q){var v=236,X=17,R=re,V=u[q],B=null,_=0,H=null,Y=[],T={},he=function(U,W){_=R*4+17,B=function(F){for(var G=new Array(F),z=0;z<F;z+=1){G[z]=new Array(F);for(var K=0;K<F;K+=1)G[z][K]=null}return G}(_),te(0,0),te(_-7,0),te(0,_-7),Ze(),Fe(),ze(U,W),R>=7&&Dt(U),H==null&&(H=Nr(R,V,Y)),At(H,W)},te=function(U,W){for(var F=-1;F<=7;F+=1)if(!(U+F<=-1||_<=U+F))for(var G=-1;G<=7;G+=1)W+G<=-1||_<=W+G||(0<=F&&F<=6&&(G==0||G==6)||0<=G&&G<=6&&(F==0||F==6)||2<=F&&F<=4&&2<=G&&G<=4?B[U+F][W+G]=!0:B[U+F][W+G]=!1)},Re=function(){for(var U=0,W=0,F=0;F<8;F+=1){he(!0,F);var G=N.getLostPoint(T);(F==0||U>G)&&(U=G,W=F)}return W},Fe=function(){for(var U=8;U<_-8;U+=1)B[U][6]==null&&(B[U][6]=U%2==0);for(var W=8;W<_-8;W+=1)B[6][W]==null&&(B[6][W]=W%2==0)},Ze=function(){for(var U=N.getPatternPosition(R),W=0;W<U.length;W+=1)for(var F=0;F<U.length;F+=1){var G=U[W],z=U[F];if(B[G][z]==null)for(var K=-2;K<=2;K+=1)for(var ge=-2;ge<=2;ge+=1)K==-2||K==2||ge==-2||ge==2||K==0&&ge==0?B[G+K][z+ge]=!0:B[G+K][z+ge]=!1}},Dt=function(U){for(var W=N.getBCHTypeNumber(R),F=0;F<18;F+=1){var G=!U&&(W>>F&1)==1;B[Math.floor(F/3)][F%3+_-8-3]=G}for(var F=0;F<18;F+=1){var G=!U&&(W>>F&1)==1;B[F%3+_-8-3][Math.floor(F/3)]=G}},ze=function(U,W){for(var F=V<<3|W,G=N.getBCHTypeInfo(F),z=0;z<15;z+=1){var K=!U&&(G>>z&1)==1;z<6?B[z][8]=K:z<8?B[z+1][8]=K:B[_-15+z][8]=K}for(var z=0;z<15;z+=1){var K=!U&&(G>>z&1)==1;z<8?B[8][_-z-1]=K:z<9?B[8][15-z-1+1]=K:B[8][15-z-1]=K}B[_-8][8]=!U},At=function(U,W){for(var F=-1,G=_-1,z=7,K=0,ge=N.getMaskFunction(W),fe=_-1;fe>0;fe-=2)for(fe==6&&(fe-=1);;){for(var Me=0;Me<2;Me+=1)if(B[G][fe-Me]==null){var ye=!1;K<U.length&&(ye=(U[K]>>>z&1)==1);var ie=ge(G,fe-Me);ie&&(ye=!ye),B[G][fe-Me]=ye,z-=1,z==-1&&(K+=1,z=7)}if(G+=F,G<0||_<=G){G-=F,F=-F;break}}},$e=function(U,W){for(var F=0,G=0,z=0,K=new Array(W.length),ge=new Array(W.length),fe=0;fe<W.length;fe+=1){var Me=W[fe].dataCount,ye=W[fe].totalCount-Me;G=Math.max(G,Me),z=Math.max(z,ye),K[fe]=new Array(Me);for(var ie=0;ie<K[fe].length;ie+=1)K[fe][ie]=255&U.getBuffer()[ie+F];F+=Me;var Ce=N.getErrorCorrectPolynomial(ye),Et=A(K[fe],Ce.getLength()-1),ce=Et.mod(Ce);ge[fe]=new Array(Ce.getLength()-1);for(var ie=0;ie<ge[fe].length;ie+=1){var cr=ie+ce.getLength()-ge[fe].length;ge[fe][ie]=cr>=0?ce.getAt(cr):0}}for(var Or=0,ie=0;ie<W.length;ie+=1)Or+=W[ie].totalCount;for(var Mt=new Array(Or),tr=0,ie=0;ie<G;ie+=1)for(var fe=0;fe<W.length;fe+=1)ie<K[fe].length&&(Mt[tr]=K[fe][ie],tr+=1);for(var ie=0;ie<z;ie+=1)for(var fe=0;fe<W.length;fe+=1)ie<ge[fe].length&&(Mt[tr]=ge[fe][ie],tr+=1);return Mt},Nr=function(U,W,F){for(var G=D.getRSBlocks(U,W),z=O(),K=0;K<F.length;K+=1){var ge=F[K];z.put(ge.getMode(),4),z.put(ge.getLength(),N.getLengthInBits(ge.getMode(),U)),ge.write(z)}for(var fe=0,K=0;K<G.length;K+=1)fe+=G[K].dataCount;if(z.getLengthInBits()>fe*8)throw"code length overflow. ("+z.getLengthInBits()+">"+fe*8+")";for(z.getLengthInBits()+4<=fe*8&&z.put(0,4);z.getLengthInBits()%8!=0;)z.putBit(!1);for(;!(z.getLengthInBits()>=fe*8||(z.put(v,8),z.getLengthInBits()>=fe*8));)z.put(X,8);return $e(z,G)};T.addData=function(U,W){W=W||"Byte";var F=null;switch(W){case"Numeric":F=ne(U);break;case"Alphanumeric":F=J(U);break;case"Byte":F=oe(U);break;case"Kanji":F=le(U);break;default:throw"mode:"+W}Y.push(F),H=null},T.isDark=function(U,W){if(U<0||_<=U||W<0||_<=W)throw U+","+W;return B[U][W]},T.getModuleCount=function(){return _},T.make=function(){if(R<1){for(var U=1;U<40;U++){for(var W=D.getRSBlocks(U,V),F=O(),G=0;G<Y.length;G++){var z=Y[G];F.put(z.getMode(),4),F.put(z.getLength(),N.getLengthInBits(z.getMode(),U)),z.write(F)}for(var K=0,G=0;G<W.length;G++)K+=W[G].dataCount;if(F.getLengthInBits()<=K*8)break}R=U}he(!1,Re())},T.createTableTag=function(U,W){U=U||2,W=typeof W>"u"?U*4:W;var F="";F+='<table style="',F+=" border-width: 0px; border-style: none;",F+=" border-collapse: collapse;",F+=" padding: 0px; margin: "+W+"px;",F+='">',F+="<tbody>";for(var G=0;G<T.getModuleCount();G+=1){F+="<tr>";for(var z=0;z<T.getModuleCount();z+=1)F+='<td style="',F+=" border-width: 0px; border-style: none;",F+=" border-collapse: collapse;",F+=" padding: 0px; margin: 0px;",F+=" width: "+U+"px;",F+=" height: "+U+"px;",F+=" background-color: ",F+=T.isDark(G,z)?"#000000":"#ffffff",F+=";",F+='"/>';F+="</tr>"}return F+="</tbody>",F+="</table>",F},T.createSvgTag=function(U,W,F,G){var z={};typeof arguments[0]=="object"&&(z=arguments[0],U=z.cellSize,W=z.margin,F=z.alt,G=z.title),U=U||2,W=typeof W>"u"?U*4:W,F=typeof F=="string"?{text:F}:F||{},F.text=F.text||null,F.id=F.text?F.id||"qrcode-description":null,G=typeof G=="string"?{text:G}:G||{},G.text=G.text||null,G.id=G.text?G.id||"qrcode-title":null;var K=T.getModuleCount()*U+W*2,ge,fe,Me,ye,ie="",Ce;for(Ce="l"+U+",0 0,"+U+" -"+U+",0 0,-"+U+"z ",ie+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ie+=z.scalable?"":' width="'+K+'px" height="'+K+'px"',ie+=' viewBox="0 0 '+K+" "+K+'" ',ie+=' preserveAspectRatio="xMinYMin meet"',ie+=G.text||F.text?' role="img" aria-labelledby="'+ue([G.id,F.id].join(" ").trim())+'"':"",ie+=">",ie+=G.text?'<title id="'+ue(G.id)+'">'+ue(G.text)+"</title>":"",ie+=F.text?'<description id="'+ue(F.id)+'">'+ue(F.text)+"</description>":"",ie+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ie+='<path d="',Me=0;Me<T.getModuleCount();Me+=1)for(ye=Me*U+W,ge=0;ge<T.getModuleCount();ge+=1)T.isDark(Me,ge)&&(fe=ge*U+W,ie+="M"+fe+","+ye+Ce);return ie+='" stroke="transparent" fill="black"/>',ie+="</svg>",ie},T.createDataURL=function(U,W){U=U||2,W=typeof W>"u"?U*4:W;var F=T.getModuleCount()*U+W*2,G=W,z=F-W;return Te(F,F,function(K,ge){if(G<=K&&K<z&&G<=ge&&ge<z){var fe=Math.floor((K-G)/U),Me=Math.floor((ge-G)/U);return T.isDark(Me,fe)?0:1}else return 1})},T.createImgTag=function(U,W,F){U=U||2,W=typeof W>"u"?U*4:W;var G=T.getModuleCount()*U+W*2,z="";return z+="<img",z+=' src="',z+=T.createDataURL(U,W),z+='"',z+=' width="',z+=G,z+='"',z+=' height="',z+=G,z+='"',F&&(z+=' alt="',z+=ue(F),z+='"'),z+="/>",z};var ue=function(U){for(var W="",F=0;F<U.length;F+=1){var G=U.charAt(F);switch(G){case"<":W+="&lt;";break;case">":W+="&gt;";break;case"&":W+="&amp;";break;case'"':W+="&quot;";break;default:W+=G;break}}return W},Rr=function(U){var W=1;U=typeof U>"u"?W*2:U;var F=T.getModuleCount()*W+U*2,G=U,z=F-U,K,ge,fe,Me,ye,ie={"██":"█","█ ":"▀"," █":"▄","  ":" "},Ce={"██":"▀","█ ":"▀"," █":" ","  ":" "},Et="";for(K=0;K<F;K+=2){for(fe=Math.floor((K-G)/W),Me=Math.floor((K+1-G)/W),ge=0;ge<F;ge+=1)ye="█",G<=ge&&ge<z&&G<=K&&K<z&&T.isDark(fe,Math.floor((ge-G)/W))&&(ye=" "),G<=ge&&ge<z&&G<=K+1&&K+1<z&&T.isDark(Me,Math.floor((ge-G)/W))?ye+=" ":ye+="█",Et+=U<1&&K+1>=z?Ce[ye]:ie[ye];Et+=`
`}return F%2&&U>0?Et.substring(0,Et.length-F-1)+Array(F+1).join("▀"):Et.substring(0,Et.length-1)};return T.createASCII=function(U,W){if(U=U||1,U<2)return Rr(W);U-=1,W=typeof W>"u"?U*2:W;var F=T.getModuleCount()*U+W*2,G=W,z=F-W,K,ge,fe,Me,ye=Array(U+1).join("██"),ie=Array(U+1).join("  "),Ce="",Et="";for(K=0;K<F;K+=1){for(fe=Math.floor((K-G)/U),Et="",ge=0;ge<F;ge+=1)Me=1,G<=ge&&ge<z&&G<=K&&K<z&&T.isDark(fe,Math.floor((ge-G)/U))&&(Me=0),Et+=Me?ye:ie;for(fe=0;fe<U;fe+=1)Ce+=Et+`
`}return Ce.substring(0,Ce.length-1)},T.renderTo2dContext=function(U,W){W=W||2;for(var F=T.getModuleCount(),G=0;G<F;G++)for(var z=0;z<F;z++)U.fillStyle=T.isDark(G,z)?"black":"white",U.fillRect(G*W,z*W,W,W)},T};d.stringToBytesFuncs={default:function(re){for(var q=[],v=0;v<re.length;v+=1){var X=re.charCodeAt(v);q.push(X&255)}return q}},d.stringToBytes=d.stringToBytesFuncs.default,d.createStringToBytes=function(re,q){var v=function(){for(var R=me(re),V=function(){var Fe=R.read();if(Fe==-1)throw"eof";return Fe},B=0,_={};;){var H=R.read();if(H==-1)break;var Y=V(),T=V(),he=V(),te=String.fromCharCode(H<<8|Y),Re=T<<8|he;_[te]=Re,B+=1}if(B!=q)throw B+" != "+q;return _}(),X="?".charCodeAt(0);return function(R){for(var V=[],B=0;B<R.length;B+=1){var _=R.charCodeAt(B);if(_<128)V.push(_);else{var H=v[R.charAt(B)];typeof H=="number"?(H&255)==H?V.push(H):(V.push(H>>>8),V.push(H&255)):V.push(X)}}return V}};var E={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={L:1,M:0,Q:3,H:2},p={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},N=function(){var re=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],q=1335,v=7973,X=21522,R={},V=function(B){for(var _=0;B!=0;)_+=1,B>>>=1;return _};return R.getBCHTypeInfo=function(B){for(var _=B<<10;V(_)-V(q)>=0;)_^=q<<V(_)-V(q);return(B<<10|_)^X},R.getBCHTypeNumber=function(B){for(var _=B<<12;V(_)-V(v)>=0;)_^=v<<V(_)-V(v);return B<<12|_},R.getPatternPosition=function(B){return re[B-1]},R.getMaskFunction=function(B){switch(B){case p.PATTERN000:return function(_,H){return(_+H)%2==0};case p.PATTERN001:return function(_,H){return _%2==0};case p.PATTERN010:return function(_,H){return H%3==0};case p.PATTERN011:return function(_,H){return(_+H)%3==0};case p.PATTERN100:return function(_,H){return(Math.floor(_/2)+Math.floor(H/3))%2==0};case p.PATTERN101:return function(_,H){return _*H%2+_*H%3==0};case p.PATTERN110:return function(_,H){return(_*H%2+_*H%3)%2==0};case p.PATTERN111:return function(_,H){return(_*H%3+(_+H)%2)%2==0};default:throw"bad maskPattern:"+B}},R.getErrorCorrectPolynomial=function(B){for(var _=A([1],0),H=0;H<B;H+=1)_=_.multiply(A([1,b.gexp(H)],0));return _},R.getLengthInBits=function(B,_){if(1<=_&&_<10)switch(B){case E.MODE_NUMBER:return 10;case E.MODE_ALPHA_NUM:return 9;case E.MODE_8BIT_BYTE:return 8;case E.MODE_KANJI:return 8;default:throw"mode:"+B}else if(_<27)switch(B){case E.MODE_NUMBER:return 12;case E.MODE_ALPHA_NUM:return 11;case E.MODE_8BIT_BYTE:return 16;case E.MODE_KANJI:return 10;default:throw"mode:"+B}else if(_<41)switch(B){case E.MODE_NUMBER:return 14;case E.MODE_ALPHA_NUM:return 13;case E.MODE_8BIT_BYTE:return 16;case E.MODE_KANJI:return 12;default:throw"mode:"+B}else throw"type:"+_},R.getLostPoint=function(B){for(var _=B.getModuleCount(),H=0,Y=0;Y<_;Y+=1)for(var T=0;T<_;T+=1){for(var he=0,te=B.isDark(Y,T),Re=-1;Re<=1;Re+=1)if(!(Y+Re<0||_<=Y+Re))for(var Fe=-1;Fe<=1;Fe+=1)T+Fe<0||_<=T+Fe||Re==0&&Fe==0||te==B.isDark(Y+Re,T+Fe)&&(he+=1);he>5&&(H+=3+he-5)}for(var Y=0;Y<_-1;Y+=1)for(var T=0;T<_-1;T+=1){var Ze=0;B.isDark(Y,T)&&(Ze+=1),B.isDark(Y+1,T)&&(Ze+=1),B.isDark(Y,T+1)&&(Ze+=1),B.isDark(Y+1,T+1)&&(Ze+=1),(Ze==0||Ze==4)&&(H+=3)}for(var Y=0;Y<_;Y+=1)for(var T=0;T<_-6;T+=1)B.isDark(Y,T)&&!B.isDark(Y,T+1)&&B.isDark(Y,T+2)&&B.isDark(Y,T+3)&&B.isDark(Y,T+4)&&!B.isDark(Y,T+5)&&B.isDark(Y,T+6)&&(H+=40);for(var T=0;T<_;T+=1)for(var Y=0;Y<_-6;Y+=1)B.isDark(Y,T)&&!B.isDark(Y+1,T)&&B.isDark(Y+2,T)&&B.isDark(Y+3,T)&&B.isDark(Y+4,T)&&!B.isDark(Y+5,T)&&B.isDark(Y+6,T)&&(H+=40);for(var Dt=0,T=0;T<_;T+=1)for(var Y=0;Y<_;Y+=1)B.isDark(Y,T)&&(Dt+=1);var ze=Math.abs(100*Dt/_/_-50)/5;return H+=ze*10,H},R}(),b=function(){for(var re=new Array(256),q=new Array(256),v=0;v<8;v+=1)re[v]=1<<v;for(var v=8;v<256;v+=1)re[v]=re[v-4]^re[v-5]^re[v-6]^re[v-8];for(var v=0;v<255;v+=1)q[re[v]]=v;var X={};return X.glog=function(R){if(R<1)throw"glog("+R+")";return q[R]},X.gexp=function(R){for(;R<0;)R+=255;for(;R>=256;)R-=255;return re[R]},X}();function A(re,q){if(typeof re.length>"u")throw re.length+"/"+q;var v=function(){for(var R=0;R<re.length&&re[R]==0;)R+=1;for(var V=new Array(re.length-R+q),B=0;B<re.length-R;B+=1)V[B]=re[B+R];return V}(),X={};return X.getAt=function(R){return v[R]},X.getLength=function(){return v.length},X.multiply=function(R){for(var V=new Array(X.getLength()+R.getLength()-1),B=0;B<X.getLength();B+=1)for(var _=0;_<R.getLength();_+=1)V[B+_]^=b.gexp(b.glog(X.getAt(B))+b.glog(R.getAt(_)));return A(V,0)},X.mod=function(R){if(X.getLength()-R.getLength()<0)return X;for(var V=b.glog(X.getAt(0))-b.glog(R.getAt(0)),B=new Array(X.getLength()),_=0;_<X.getLength();_+=1)B[_]=X.getAt(_);for(var _=0;_<R.getLength();_+=1)B[_]^=b.gexp(b.glog(R.getAt(_))+V);return A(B,0).mod(R)},X}var D=function(){var re=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],q=function(R,V){var B={};return B.totalCount=R,B.dataCount=V,B},v={},X=function(R,V){switch(V){case u.L:return re[(R-1)*4+0];case u.M:return re[(R-1)*4+1];case u.Q:return re[(R-1)*4+2];case u.H:return re[(R-1)*4+3];default:return}};return v.getRSBlocks=function(R,V){var B=X(R,V);if(typeof B>"u")throw"bad rs block @ typeNumber:"+R+"/errorCorrectionLevel:"+V;for(var _=B.length/3,H=[],Y=0;Y<_;Y+=1)for(var T=B[Y*3+0],he=B[Y*3+1],te=B[Y*3+2],Re=0;Re<T;Re+=1)H.push(q(he,te));return H},v}(),O=function(){var re=[],q=0,v={};return v.getBuffer=function(){return re},v.getAt=function(X){var R=Math.floor(X/8);return(re[R]>>>7-X%8&1)==1},v.put=function(X,R){for(var V=0;V<R;V+=1)v.putBit((X>>>R-V-1&1)==1)},v.getLengthInBits=function(){return q},v.putBit=function(X){var R=Math.floor(q/8);re.length<=R&&re.push(0),X&&(re[R]|=128>>>q%8),q+=1},v},ne=function(re){var q=E.MODE_NUMBER,v=re,X={};X.getMode=function(){return q},X.getLength=function(B){return v.length},X.write=function(B){for(var _=v,H=0;H+2<_.length;)B.put(R(_.substring(H,H+3)),10),H+=3;H<_.length&&(_.length-H==1?B.put(R(_.substring(H,H+1)),4):_.length-H==2&&B.put(R(_.substring(H,H+2)),7))};var R=function(B){for(var _=0,H=0;H<B.length;H+=1)_=_*10+V(B.charAt(H));return _},V=function(B){if("0"<=B&&B<="9")return B.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+B};return X},J=function(re){var q=E.MODE_ALPHA_NUM,v=re,X={};X.getMode=function(){return q},X.getLength=function(V){return v.length},X.write=function(V){for(var B=v,_=0;_+1<B.length;)V.put(R(B.charAt(_))*45+R(B.charAt(_+1)),11),_+=2;_<B.length&&V.put(R(B.charAt(_)),6)};var R=function(V){if("0"<=V&&V<="9")return V.charCodeAt(0)-"0".charCodeAt(0);if("A"<=V&&V<="Z")return V.charCodeAt(0)-"A".charCodeAt(0)+10;switch(V){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+V}};return X},oe=function(re){var q=E.MODE_8BIT_BYTE,v=d.stringToBytes(re),X={};return X.getMode=function(){return q},X.getLength=function(R){return v.length},X.write=function(R){for(var V=0;V<v.length;V+=1)R.put(v[V],8)},X},le=function(re){var q=E.MODE_KANJI,v=d.stringToBytesFuncs.SJIS;if(!v)throw"sjis not supported.";(function(V,B){var _=v(V);if(_.length!=2||(_[0]<<8|_[1])!=B)throw"sjis not supported."})("友",38726);var X=v(re),R={};return R.getMode=function(){return q},R.getLength=function(V){return~~(X.length/2)},R.write=function(V){for(var B=X,_=0;_+1<B.length;){var H=(255&B[_])<<8|255&B[_+1];if(33088<=H&&H<=40956)H-=33088;else if(57408<=H&&H<=60351)H-=49472;else throw"illegal char at "+(_+1)+"/"+H;H=(H>>>8&255)*192+(H&255),V.put(H,13),_+=2}if(_<B.length)throw"illegal char at "+(_+1)},R},Xe=function(){var re=[],q={};return q.writeByte=function(v){re.push(v&255)},q.writeShort=function(v){q.writeByte(v),q.writeByte(v>>>8)},q.writeBytes=function(v,X,R){X=X||0,R=R||v.length;for(var V=0;V<R;V+=1)q.writeByte(v[V+X])},q.writeString=function(v){for(var X=0;X<v.length;X+=1)q.writeByte(v.charCodeAt(X))},q.toByteArray=function(){return re},q.toString=function(){var v="";v+="[";for(var X=0;X<re.length;X+=1)X>0&&(v+=","),v+=re[X];return v+="]",v},q},ct=function(){var re=0,q=0,v=0,X="",R={},V=function(_){X+=String.fromCharCode(B(_&63))},B=function(_){if(!(_<0)){if(_<26)return 65+_;if(_<52)return 97+(_-26);if(_<62)return 48+(_-52);if(_==62)return 43;if(_==63)return 47}throw"n:"+_};return R.writeByte=function(_){for(re=re<<8|_&255,q+=8,v+=1;q>=6;)V(re>>>q-6),q-=6},R.flush=function(){if(q>0&&(V(re<<6-q),re=0,q=0),v%3!=0)for(var _=3-v%3,H=0;H<_;H+=1)X+="="},R.toString=function(){return X},R},me=function(re){var q=re,v=0,X=0,R=0,V={};V.read=function(){for(;R<8;){if(v>=q.length){if(R==0)return-1;throw"unexpected end of file./"+R}var _=q.charAt(v);if(v+=1,_=="=")return R=0,-1;if(_.match(/^\s$/))continue;X=X<<6|B(_.charCodeAt(0)),R+=6}var H=X>>>R-8&255;return R-=8,H};var B=function(_){if(65<=_&&_<=90)return _-65;if(97<=_&&_<=122)return _-97+26;if(48<=_&&_<=57)return _-48+52;if(_==43)return 62;if(_==47)return 63;throw"c:"+_};return V},we=function(re,q){var v=re,X=q,R=new Array(re*q),V={};V.setPixel=function(Y,T,he){R[T*v+Y]=he},V.write=function(Y){Y.writeString("GIF87a"),Y.writeShort(v),Y.writeShort(X),Y.writeByte(128),Y.writeByte(0),Y.writeByte(0),Y.writeByte(0),Y.writeByte(0),Y.writeByte(0),Y.writeByte(255),Y.writeByte(255),Y.writeByte(255),Y.writeString(","),Y.writeShort(0),Y.writeShort(0),Y.writeShort(v),Y.writeShort(X),Y.writeByte(0);var T=2,he=_(T);Y.writeByte(T);for(var te=0;he.length-te>255;)Y.writeByte(255),Y.writeBytes(he,te,255),te+=255;Y.writeByte(he.length-te),Y.writeBytes(he,te,he.length-te),Y.writeByte(0),Y.writeString(";")};var B=function(Y){var T=Y,he=0,te=0,Re={};return Re.write=function(Fe,Ze){if(Fe>>>Ze)throw"length over";for(;he+Ze>=8;)T.writeByte(255&(Fe<<he|te)),Ze-=8-he,Fe>>>=8-he,te=0,he=0;te=Fe<<he|te,he=he+Ze},Re.flush=function(){he>0&&T.writeByte(te)},Re},_=function(Y){for(var T=1<<Y,he=(1<<Y)+1,te=Y+1,Re=H(),Fe=0;Fe<T;Fe+=1)Re.add(String.fromCharCode(Fe));Re.add(String.fromCharCode(T)),Re.add(String.fromCharCode(he));var Ze=Xe(),Dt=B(Ze);Dt.write(T,te);var ze=0,At=String.fromCharCode(R[ze]);for(ze+=1;ze<R.length;){var $e=String.fromCharCode(R[ze]);ze+=1,Re.contains(At+$e)?At=At+$e:(Dt.write(Re.indexOf(At),te),Re.size()<4095&&(Re.size()==1<<te&&(te+=1),Re.add(At+$e)),At=$e)}return Dt.write(Re.indexOf(At),te),Dt.write(he,te),Dt.flush(),Ze.toByteArray()},H=function(){var Y={},T=0,he={};return he.add=function(te){if(he.contains(te))throw"dup key:"+te;Y[te]=T,T+=1},he.size=function(){return T},he.indexOf=function(te){return Y[te]},he.contains=function(te){return typeof Y[te]<"u"},he};return V},Te=function(re,q,v){for(var X=we(re,q),R=0;R<q;R+=1)for(var V=0;V<re;V+=1)X.setPixel(V,R,v(V,R));var B=Xe();X.write(B);for(var _=ct(),H=B.toByteArray(),Y=0;Y<H.length;Y+=1)_.writeByte(H[Y]);return _.flush(),"data:image/gif;base64,"+_};return d}();(function(){c.stringToBytesFuncs["UTF-8"]=function(d){function E(u){for(var p=[],N=0;N<u.length;N++){var b=u.charCodeAt(N);b<128?p.push(b):b<2048?p.push(192|b>>6,128|b&63):b<55296||b>=57344?p.push(224|b>>12,128|b>>6&63,128|b&63):(N++,b=65536+((b&1023)<<10|u.charCodeAt(N)&1023),p.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|b&63))}return p}return E(d)}})(),function(d){g.exports=d()}(function(){return c})})(Oi);var Js=Oi.exports;const e1=Ni(Js);function wi(g){let f,c,d,E,u,p,N,b,A,D;return{c(){f=xt("a"),c=xt("span"),d=Jt("Download QR Code"),E=Xt(),u=xt("p"),p=xt("strong"),N=Jt("SECRET: "),b=Jt("Save the QR code. DO NOT SHARE or RENAME the file."),this.h()},l(O){f=wt(O,"A",{href:!0,download:!0});var ne=vt(f);c=wt(ne,"SPAN",{class:!0});var J=vt(c);d=er(J,"Download QR Code"),J.forEach(pe),ne.forEach(pe),E=Yt(O),u=wt(O,"P",{});var oe=vt(u);p=wt(oe,"STRONG",{});var le=vt(p);N=er(le,"SECRET: "),le.forEach(pe),b=er(oe,"Save the QR code. DO NOT SHARE or RENAME the file."),oe.forEach(pe),this.h()},h(){ve(c,"class","label"),ve(f,"href",g[3]),ve(f,"download",g[0])},m(O,ne){Ue(O,f,ne),Vt(f,c),Vt(c,d),g[7](f),Ue(O,E,ne),Ue(O,u,ne),Vt(u,p),Vt(p,N),Vt(u,b),A||(D=Ci(f,"click",g[8]),A=!0)},p(O,ne){ne&8&&ve(f,"href",O[3]),ne&1&&ve(f,"download",O[0])},d(O){O&&pe(f),g[7](null),O&&pe(E),O&&pe(u),A=!1,D()}}}function t1(g){let f,c,d,E,u,p=g[1]&&wi(g);return{c(){f=xt("span"),c=xt("img"),E=Xt(),p&&p.c(),u=Sr(),this.h()},l(N){f=wt(N,"SPAN",{id:!0,class:!0});var b=vt(f);c=wt(b,"IMG",{src:!0,alt:!0,class:!0}),b.forEach(pe),E=Yt(N),p&&p.l(N),u=Sr(),this.h()},h(){ri(c.src,d=g[3])||ve(c,"src",d),ve(c,"alt",""),ve(c,"class","svelte-o78zgt"),ve(f,"id","generatedQRCode"),ve(f,"class","svelte-o78zgt")},m(N,b){Ue(N,f,b),Vt(f,c),Ue(N,E,b),p&&p.m(N,b),Ue(N,u,b)},p(N,[b]){b&8&&!ri(c.src,d=N[3])&&ve(c,"src",d),N[1]?p?p.p(N,b):(p=wi(N),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},i:en,o:en,d(N){N&&pe(f),N&&pe(E),p&&p.d(N),N&&pe(u)}}}function r1(g,f,c){let{data:d}=f,{filename:E}=f,{autoDownload:u=!0}=f,p=pi(),N=!1,b,A;const D=()=>{let J=e1(10,"H");J.addData(d),J.make(),c(3,A=J.createDataURL()),c(1,N=!0),u&&setTimeout(()=>b.click(),1e3)};function O(J){wr[J?"unshift":"push"](()=>{b=J,c(2,b)})}const ne=()=>p("saved",{text:"saved"});return g.$$set=J=>{"data"in J&&c(5,d=J.data),"filename"in J&&c(0,E=J.filename),"autoDownload"in J&&c(6,u=J.autoDownload)},g.$$.update=()=>{g.$$.dirty&32&&d&&D()},[E,N,b,A,p,d,u,O,ne]}class n1 extends Dn{constructor(f){super(),Mn(this,f,r1,t1,Bn,{data:5,filename:0,autoDownload:6})}}const{document:Jr}=fs;function i1(g){let f,c;return f=new bi({props:{$$slots:{default:[C1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[0]&135|E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function s1(g){let f,c;return f=new bi({props:{style:"display:flex;align-items:center;justify-content:center;",$$slots:{default:[b1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[0]&112|E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function a1(g){let f=g[30]+"",c;return{c(){c=Jt(f)},l(d){c=er(d,f)},m(d,E){Ue(d,c,E)},p(d,E){E[0]&1073741824&&f!==(f=d[30]+"")&&hs(c,f)},d(d){d&&pe(c)}}}function o1(g){let f,c;return f=new xs({props:{$$slots:{default:[a1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[0]&1073741824|E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function l1(g){let f,c;return f=new gs({props:{chip:g[30],$$slots:{default:[o1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[0]&1073741824&&(u.chip=d[30]),E[0]&1073741824|E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function c1(g){let f,c,d,E,u;function p(A){g[15](A)}let N={variant:"filled",label:"Name",placeholder:"Firstname Surname"};g[2]!==void 0&&(N.value=g[2]),c=new Ln({props:N}),wr.push(()=>sn(c,"value",p));let b=g[2]&&Ai(g);return{c(){f=xt("div"),st(c.$$.fragment),E=Xt(),b&&b.c(),this.h()},l(A){f=wt(A,"DIV",{class:!0});var D=vt(f);at(c.$$.fragment,D),E=Yt(D),b&&b.l(D),D.forEach(pe),this.h()},h(){ve(f,"class","details svelte-1vu14hf")},m(A,D){Ue(A,f,D),ot(c,f,null),Vt(f,E),b&&b.m(f,null),u=!0},p(A,D){const O={};!d&&D[0]&4&&(d=!0,O.value=A[2],an(()=>d=!1)),c.$set(O),A[2]?b?(b.p(A,D),D[0]&4&&De(b,1)):(b=Ai(A),b.c(),De(b,1),b.m(f,null)):b&&(Hr(),ke(b,1,1,()=>{b=null}),Gr())},i(A){u||(De(c.$$.fragment,A),De(b),u=!0)},o(A){ke(c.$$.fragment,A),ke(b),u=!1},d(A){A&&pe(f),lt(c),b&&b.d()}}}function f1(g){let f,c,d,E,u;function p(A){g[14](A)}let N={variant:"filled",label:"Phone",placeholder:"0123456789"};g[1]!==void 0&&(N.value=g[1]),c=new Ln({props:N}),wr.push(()=>sn(c,"value",p));let b=g[1]&&Ei(g);return{c(){f=xt("div"),st(c.$$.fragment),E=Xt(),b&&b.c(),this.h()},l(A){f=wt(A,"DIV",{class:!0});var D=vt(f);at(c.$$.fragment,D),E=Yt(D),b&&b.l(D),D.forEach(pe),this.h()},h(){ve(f,"class","details svelte-1vu14hf")},m(A,D){Ue(A,f,D),ot(c,f,null),Vt(f,E),b&&b.m(f,null),u=!0},p(A,D){const O={};!d&&D[0]&2&&(d=!0,O.value=A[1],an(()=>d=!1)),c.$set(O),A[1]?b?(b.p(A,D),D[0]&2&&De(b,1)):(b=Ei(A),b.c(),De(b,1),b.m(f,null)):b&&(Hr(),ke(b,1,1,()=>{b=null}),Gr())},i(A){u||(De(c.$$.fragment,A),De(b),u=!0)},o(A){ke(c.$$.fragment,A),ke(b),u=!1},d(A){A&&pe(f),lt(c),b&&b.d()}}}function Ai(g){let f,c,d;function E(p){g[16](p)}let u={variant:"filled",label:"Phone"};return g[1]!==void 0&&(u.value=g[1]),f=new Ln({props:u}),wr.push(()=>sn(f,"value",E)),{c(){st(f.$$.fragment)},l(p){at(f.$$.fragment,p)},m(p,N){ot(f,p,N),d=!0},p(p,N){const b={};!c&&N[0]&2&&(c=!0,b.value=p[1],an(()=>c=!1)),f.$set(b)},i(p){d||(De(f.$$.fragment,p),d=!0)},o(p){ke(f.$$.fragment,p),d=!1},d(p){lt(f,p)}}}function Ei(g){let f,c;return f=new $s({}),f.$on("scanned",g[10]),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p:en,i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function u1(g){let f,c,d,E,u,p,N,b;function A(oe){g[13](oe)}let D={chips:g[9],choice:!0,$$slots:{default:[l1,({chip:oe})=>({30:oe}),({chip:oe})=>[oe?1073741824:0]]},$$scope:{ctx:g}};g[0]!==void 0&&(D.selected=g[0]),c=new ds({props:D}),wr.push(()=>sn(c,"selected",A));const O=[f1,c1],ne=[];function J(oe,le){return oe[0]==="Log in"?0:1}return u=J(g),p=ne[u]=O[u](g),{c(){f=xt("div"),st(c.$$.fragment),E=Xt(),p.c(),N=Sr(),this.h()},l(oe){f=wt(oe,"DIV",{class:!0});var le=vt(f);at(c.$$.fragment,le),le.forEach(pe),E=Yt(oe),p.l(oe),N=Sr(),this.h()},h(){ve(f,"class","choices")},m(oe,le){Ue(oe,f,le),ot(c,f,null),Ue(oe,E,le),ne[u].m(oe,le),Ue(oe,N,le),b=!0},p(oe,le){const Xe={};le[0]&1073741824|le[1]&1&&(Xe.$$scope={dirty:le,ctx:oe}),!d&&le[0]&1&&(d=!0,Xe.selected=oe[0],an(()=>d=!1)),c.$set(Xe);let ct=u;u=J(oe),u===ct?ne[u].p(oe,le):(Hr(),ke(ne[ct],1,1,()=>{ne[ct]=null}),Gr(),p=ne[u],p?p.p(oe,le):(p=ne[u]=O[u](oe),p.c()),De(p,1),p.m(N.parentNode,N))},i(oe){b||(De(c.$$.fragment,oe),De(p),b=!0)},o(oe){ke(c.$$.fragment,oe),ke(p),b=!1},d(oe){oe&&pe(f),lt(c),oe&&pe(E),ne[u].d(oe),oe&&pe(N)}}}function h1(g){let f,c;return f=new on({props:{$$slots:{default:[x1]},$$scope:{ctx:g}}}),f.$on("click",g[12]),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function d1(g){let f,c;return f=new on({props:{$$slots:{default:[A1]},$$scope:{ctx:g}}}),f.$on("click",g[11]),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function g1(g){let f;return{c(){f=Jt("Sign up")},l(c){f=er(c,"Sign up")},m(c,d){Ue(c,f,d)},d(c){c&&pe(f)}}}function x1(g){let f,c;return f=new Ii({props:{$$slots:{default:[g1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function w1(g){let f;return{c(){f=Jt("Login")},l(c){f=er(c,"Login")},m(c,d){Ue(c,f,d)},d(c){c&&pe(f)}}}function A1(g){let f,c;return f=new Ii({props:{$$slots:{default:[w1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment)},l(d){at(f.$$.fragment,d)},m(d,E){ot(f,d,E),c=!0},p(d,E){const u={};E[1]&1&&(u.$$scope={dirty:E,ctx:d}),f.$set(u)},i(d){c||(De(f.$$.fragment,d),c=!0)},o(d){ke(f.$$.fragment,d),c=!1},d(d){lt(f,d)}}}function E1(g){let f,c,d,E;const u=[d1,h1],p=[];function N(b,A){return b[0]==="Log in"&&b[7]?0:b[0]==="Sign up"&&b[1]?1:-1}return~(f=N(g))&&(c=p[f]=u[f](g)),{c(){c&&c.c(),d=Sr()},l(b){c&&c.l(b),d=Sr()},m(b,A){~f&&p[f].m(b,A),Ue(b,d,A),E=!0},p(b,A){let D=f;f=N(b),f===D?~f&&p[f].p(b,A):(c&&(Hr(),ke(p[D],1,1,()=>{p[D]=null}),Gr()),~f?(c=p[f],c?c.p(b,A):(c=p[f]=u[f](b),c.c()),De(c,1),c.m(d.parentNode,d)):c=null)},i(b){E||(De(c),E=!0)},o(b){ke(c),E=!1},d(b){~f&&p[f].d(b),b&&pe(d)}}}function C1(g){let f,c,d,E;return f=new _i({props:{$$slots:{default:[u1]},$$scope:{ctx:g}}}),d=new yi({props:{$$slots:{default:[E1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment),c=Xt(),st(d.$$.fragment)},l(u){at(f.$$.fragment,u),c=Yt(u),at(d.$$.fragment,u)},m(u,p){ot(f,u,p),Ue(u,c,p),ot(d,u,p),E=!0},p(u,p){const N={};p[0]&7|p[1]&1&&(N.$$scope={dirty:p,ctx:u}),f.$set(N);const b={};p[0]&131|p[1]&1&&(b.$$scope={dirty:p,ctx:u}),d.$set(b)},i(u){E||(De(f.$$.fragment,u),De(d.$$.fragment,u),E=!0)},o(u){ke(f.$$.fragment,u),ke(d.$$.fragment,u),E=!1},d(u){lt(f,u),u&&pe(c),lt(d,u)}}}function p1(g){let f,c,d;return c=new n1({props:{data:g[4]+" "+g[5],filename:g[6],autoDownload:!1}}),{c(){f=xt("div"),st(c.$$.fragment),this.h()},l(E){f=wt(E,"DIV",{class:!0});var u=vt(f);at(c.$$.fragment,u),u.forEach(pe),this.h()},h(){ve(f,"class","authQR svelte-1vu14hf")},m(E,u){Ue(E,f,u),ot(c,f,null),d=!0},p(E,u){const p={};u[0]&48&&(p.data=E[4]+" "+E[5]),u[0]&64&&(p.filename=E[6]),c.$set(p)},i(E){d||(De(c.$$.fragment,E),d=!0)},o(E){ke(c.$$.fragment,E),d=!1},d(E){E&&pe(f),lt(c)}}}function m1(g){let f;return{c(){f=Jt("Log out")},l(c){f=er(c,"Log out")},m(c,d){Ue(c,f,d)},d(c){c&&pe(f)}}}function I1(g){let f,c,d,E,u;return c=new on({props:{class:"logout",$$slots:{default:[m1]},$$scope:{ctx:g}}}),{c(){f=xt("form"),st(c.$$.fragment),this.h()},l(p){f=wt(p,"FORM",{method:!0,action:!0});var N=vt(f);at(c.$$.fragment,N),N.forEach(pe),this.h()},h(){ve(f,"method","POST"),ve(f,"action","?/logout")},m(p,N){Ue(p,f,N),ot(c,f,null),d=!0,E||(u=us(bs.call(null,f)),E=!0)},p(p,N){const b={};N[1]&1&&(b.$$scope={dirty:N,ctx:p}),c.$set(b)},i(p){d||(De(c.$$.fragment,p),d=!0)},o(p){ke(c.$$.fragment,p),d=!1},d(p){p&&pe(f),lt(c),E=!1,u()}}}function b1(g){let f,c,d,E;return f=new _i({props:{$$slots:{default:[p1]},$$scope:{ctx:g}}}),d=new yi({props:{$$slots:{default:[I1]},$$scope:{ctx:g}}}),{c(){st(f.$$.fragment),c=Xt(),st(d.$$.fragment)},l(u){at(f.$$.fragment,u),c=Yt(u),at(d.$$.fragment,u)},m(u,p){ot(f,u,p),Ue(u,c,p),ot(d,u,p),E=!0},p(u,p){const N={};p[0]&112|p[1]&1&&(N.$$scope={dirty:p,ctx:u}),f.$set(N);const b={};p[1]&1&&(b.$$scope={dirty:p,ctx:u}),d.$set(b)},i(u){E||(De(f.$$.fragment,u),De(d.$$.fragment,u),E=!0)},o(u){ke(f.$$.fragment,u),ke(d.$$.fragment,u),E=!1},d(u){lt(f,u),u&&pe(c),lt(d,u)}}}function _1(g){let f,c,d,E,u,p,N;const b=[s1,i1],A=[];function D(O,ne){return O[8].data.user||O[3]?0:1}return u=D(g),p=A[u]=b[u](g),{c(){f=xt("link"),c=xt("meta"),d=Xt(),E=xt("article"),p.c(),this.h()},l(O){const ne=cs("svelte-pg3aen",Jr.head);f=wt(ne,"LINK",{rel:!0,href:!0}),c=wt(ne,"META",{name:!0,content:!0}),ne.forEach(pe),d=Yt(O),E=wt(O,"ARTICLE",{class:!0});var J=vt(E);p.l(J),J.forEach(pe),this.h()},h(){Jr.title="Authentication",ve(f,"rel","canonical"),ve(f,"href","https://satirigal.com/auth"),ve(c,"name","description"),ve(c,"content","Mathematics for all"),ve(E,"class","svelte-1vu14hf")},m(O,ne){Vt(Jr.head,f),Vt(Jr.head,c),Ue(O,d,ne),Ue(O,E,ne),A[u].m(E,null),N=!0},p(O,ne){let J=u;u=D(O),u===J?A[u].p(O,ne):(Hr(),ke(A[J],1,1,()=>{A[J]=null}),Gr(),p=A[u],p?p.p(O,ne):(p=A[u]=b[u](O),p.c()),De(p,1),p.m(E,null))},i(O){N||(De(p),N=!0)},o(O){ke(p),N=!1},d(O){pe(f),pe(c),O&&pe(d),O&&pe(E),A[u].d()}}}function y1(g,f,c){let d,E;Nn(g,Cs,V=>c(8,d=V)),Nn(g,ii,V=>c(21,E=V)),mi(ii,E="Authentication",E);let u=["Log in","Sign up"],p="Log in",N,b=null,A=null,D=!1,O,ne,J,oe,le,Xe=!1;const ct=V=>{c(6,oe=V.detail.filename);let B=V.detail.data.split(" ");c(4,ne=B[0]),c(5,J=B[1]),c(7,Xe=!0)},me=async()=>{const V=await fetch("/api/login",{method:"POST",body:JSON.stringify({phone:b,publicID:oe,privateID:ne,otpID:J}),headers:{"content-type":"application/json"}});if(!V.ok){N=await V.text();return}await we(),Rn()},we=async()=>{const V=await fetch("/api/profilepic");if(!V.ok){alert("Failed to load image");return}let B=await V.blob();if(B.size===0){Sn.set("/avatar.svg");return}le=URL.createObjectURL(B);let _=new FileReader;_.readAsDataURL(B),_.onload=H=>{le=H.target.result,Sn.set(le)}},Te=()=>{c(2,A=A.trim());let V=A.split(" ");c(2,A=V.map(B=>B[0].toUpperCase()+B.slice(1)).join(" "))},re=async()=>{Te();const V=await fetch("/api/signup",{method:"POST",body:JSON.stringify({name:A,phone:b}),headers:{"content-type":"application/json"}});V.ok||(N=await V.text(),N==="User already exists!"&&alert("Account already exists. Contact us on WhatsApp 8235463666 to verify."),Es("/")),O=await V.json(),c(4,ne=O.privateID),c(6,oe=O.publicID),c(5,J=O.otpID),c(3,D=!0),Sn.set("/avatar.svg"),Rn(),alert("Please download the QR code. It is needed for authentication later on.")};function q(V){p=V,c(0,p)}function v(V){b=V,c(1,b)}function X(V){A=V,c(2,A)}function R(V){b=V,c(1,b)}return[p,b,A,D,ne,J,oe,Xe,d,u,ct,me,re,q,v,X,R]}class U1 extends Dn{constructor(f){super(),Mn(this,f,y1,_1,Bn,{},null,[-1,-1])}}export{U1 as component};
