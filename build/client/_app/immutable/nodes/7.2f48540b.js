import{S as Ce,i as ye,s as Ie,y as P,z as T,A,g as M,d as V,B as N,W as ve,w as ce,a1 as me,a as I,c as w,b as v,a4 as pe,h as f,k as h,l as g,p as F,Y as le,n as c,q as J,m as C,r as K,a2 as se,V as p,G as Q,u as ae,M as De,Z as we,$ as Ee}from"../chunks/index.fe0a1c86.js";import{C as ke,a as Pe,M as Te}from"../chunks/ActionIcons.2788abc4.js";import{M as Ae}from"../chunks/Media.63c111ac.js";import{A as Me}from"../chunks/Actions.a7c78e01.js";import{B as Ve,C as Ne}from"../chunks/Button.54000be3.js";import{I as Be}from"../chunks/ImageUploader.f77b8eae.js";import{p as qe}from"../chunks/stores.69f96dac.js";import{p as Le}from"../chunks/stores.ba3acca9.js";import{g as Ge}from"../chunks/navigation.a03ee98f.js";import{S as He,C as je}from"../chunks/Set.0ca803c6.js";import{T as Oe}from"../chunks/Text.dd5b60c0.js";function Ue(n){let e,s,t,r,o;return{c(){e=h("div"),s=h("span"),t=J("add_a_photo"),this.h()},l(l){e=g(l,"DIV",{style:!0});var a=C(e);s=g(a,"SPAN",{class:!0});var d=C(s);t=K(d,"add_a_photo"),d.forEach(f),a.forEach(f),this.h()},h(){c(s,"class","addphoto material-icons svelte-6ysa8b"),F(e,"color","gray"),F(e,"position","absolute"),F(e,"bottom","16px"),F(e,"left","16px")},m(l,a){v(l,e,a),p(e,s),p(s,t),r||(o=Q(s,"click",n[6]),r=!0)},p:we,d(l){l&&f(e),r=!1,o()}}}function ze(n){let e,s,t,r,o;return r=new Te({props:{$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){e=h("img"),t=I(),P(r.$$.fragment),this.h()},l(l){e=g(l,"IMG",{style:!0,src:!0,alt:!0}),t=w(l),T(r.$$.fragment,l),this.h()},h(){F(e,"max-height","300px"),le(e.src,s=n[3])||c(e,"src",s),c(e,"alt","img")},m(l,a){v(l,e,a),v(l,t,a),A(r,l,a),o=!0},p(l,a){(!o||a&8&&!le(e.src,s=l[3]))&&c(e,"src",s);const d={};a&262144&&(d.$$scope={dirty:a,ctx:l}),r.$set(d)},i(l){o||(M(r.$$.fragment,l),o=!0)},o(l){V(r.$$.fragment,l),o=!1},d(l){l&&f(e),l&&f(t),N(r,l)}}}function Fe(n){let e=n[17]+"",s;return{c(){s=J(e)},l(t){s=K(t,e)},m(t,r){v(t,s,r)},p(t,r){r&131072&&e!==(e=t[17]+"")&&ae(s,e)},d(t){t&&f(s)}}}function Je(n){let e,s;return e=new Oe({props:{$$slots:{default:[Fe]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){A(e,t,r),s=!0},p(t,r){const o={};r&393216&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function Ke(n){let e,s;return e=new je({props:{chip:n[17],touch:!0,$$slots:{default:[Je]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){A(e,t,r),s=!0},p(t,r){const o={};r&131072&&(o.chip=t[17]),r&393216&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function Re(n){let e,s,t,r,o,l,a,d,$,D,S,j,q,i,m,y,B,L=n[0].name+"",G,b,O,R,W=n[0].publicID+"",X,ne,Y,Z=new Date(n[0].creationTimeStamp).toLocaleString()+"",x,re,E,oe,ie,ue,k,H,fe,de;function Se(u){n[11](u)}let $e={chips:n[5],filter:!0,$$slots:{default:[Ke,({chip:u})=>({17:u}),({chip:u})=>u?131072:0]},$$scope:{ctx:n}};return n[1]!==void 0&&($e.selected=n[1]),s=new He({props:$e}),ce.push(()=>me(s,"selected",Se)),{c(){e=h("div"),P(s.$$.fragment),r=I(),o=h("h2"),l=I(),a=h("h3"),d=I(),$=h("div"),D=h("div"),S=h("img"),i=I(),m=h("div"),y=h("div"),B=h("span"),G=J(L),b=I(),O=h("span"),R=h("span"),X=J(W),ne=I(),Y=h("span"),x=J(Z),re=I(),E=h("div"),oe=I(),ie=h("br"),ue=I(),k=h("div"),this.h()},l(u){e=g(u,"DIV",{class:!0});var _=C(e);T(s.$$.fragment,_),_.forEach(f),r=w(u),o=g(u,"H2",{class:!0,style:!0,contenteditable:!0,placeholder:!0}),C(o).forEach(f),l=w(u),a=g(u,"H3",{class:!0,style:!0,contenteditable:!0,placeholder:!0}),C(a).forEach(f),d=w(u),$=g(u,"DIV",{class:!0});var U=C($);D=g(U,"DIV",{class:!0});var _e=C(D);S=g(_e,"IMG",{src:!0,alt:!0,class:!0}),_e.forEach(f),i=w(U),m=g(U,"DIV",{class:!0});var z=C(m);y=g(z,"DIV",{class:!0});var ee=C(y);B=g(ee,"SPAN",{class:!0});var he=C(B);G=K(he,L),he.forEach(f),b=w(ee),O=g(ee,"SPAN",{class:!0});var te=C(O);R=g(te,"SPAN",{});var ge=C(R);X=K(ge,W),ge.forEach(f),ne=w(te),Y=g(te,"SPAN",{});var be=C(Y);x=K(be,Z),be.forEach(f),te.forEach(f),ee.forEach(f),re=w(z),E=g(z,"DIV",{class:!0,contenteditable:!0,placeholder:!0}),C(E).forEach(f),oe=w(z),ie=g(z,"BR",{}),ue=w(z),k=g(z,"DIV",{class:!0,contenteditable:!0,placeholder:!0}),C(k).forEach(f),z.forEach(f),U.forEach(f),this.h()},h(){c(e,"class","tagsInput"),c(o,"class","title mdc-typography--headline6 svelte-6ysa8b"),F(o,"margin","0"),c(o,"contenteditable","true"),c(o,"placeholder","Title here..."),n[0].title===void 0&&se(()=>n[12].call(o)),c(a,"class","subtitle mdc-typography--subtitle2 svelte-6ysa8b"),F(a,"margin","0.5em 0"),c(a,"contenteditable","true"),c(a,"placeholder","Subtitle here..."),n[0].subtitle===void 0&&se(()=>n[13].call(a)),le(S.src,j=n[4])||c(S,"src",j),c(S,"alt",q=n[0].name),c(S,"class","svelte-6ysa8b"),c(D,"class","image svelte-6ysa8b"),c(B,"class","primary svelte-6ysa8b"),c(O,"class","secondary svelte-6ysa8b"),c(y,"class","header svelte-6ysa8b"),c(E,"class","postSummary svelte-6ysa8b"),c(E,"contenteditable","true"),c(E,"placeholder","Type summary here..."),n[0].summary===void 0&&se(()=>n[14].call(E)),c(k,"class","postcontent svelte-6ysa8b"),c(k,"contenteditable","true"),c(k,"placeholder","Type content here..."),n[0].content===void 0&&se(()=>n[15].call(k)),c(m,"class","body"),c($,"class","postcontainer svelte-6ysa8b")},m(u,_){v(u,e,_),A(s,e,null),v(u,r,_),v(u,o,_),n[0].title!==void 0&&(o.textContent=n[0].title),v(u,l,_),v(u,a,_),n[0].subtitle!==void 0&&(a.textContent=n[0].subtitle),v(u,d,_),v(u,$,_),p($,D),p(D,S),p($,i),p($,m),p(m,y),p(y,B),p(B,G),p(y,b),p(y,O),p(O,R),p(R,X),p(O,ne),p(O,Y),p(Y,x),p(m,re),p(m,E),n[0].summary!==void 0&&(E.textContent=n[0].summary),p(m,oe),p(m,ie),p(m,ue),p(m,k),n[0].content!==void 0&&(k.textContent=n[0].content),H=!0,fe||(de=[Q(o,"input",n[12]),Q(a,"input",n[13]),Q(E,"input",n[14]),Q(k,"input",n[15])],fe=!0)},p(u,_){const U={};_&393216&&(U.$$scope={dirty:_,ctx:u}),!t&&_&2&&(t=!0,U.selected=u[1],pe(()=>t=!1)),s.$set(U),_&1&&u[0].title!==o.textContent&&(o.textContent=u[0].title),_&1&&u[0].subtitle!==a.textContent&&(a.textContent=u[0].subtitle),(!H||_&16&&!le(S.src,j=u[4]))&&c(S,"src",j),(!H||_&1&&q!==(q=u[0].name))&&c(S,"alt",q),(!H||_&1)&&L!==(L=u[0].name+"")&&ae(G,L),(!H||_&1)&&W!==(W=u[0].publicID+"")&&ae(X,W),(!H||_&1)&&Z!==(Z=new Date(u[0].creationTimeStamp).toLocaleString()+"")&&ae(x,Z),_&1&&u[0].summary!==E.textContent&&(E.textContent=u[0].summary),_&1&&u[0].content!==k.textContent&&(k.textContent=u[0].content)},i(u){H||(M(s.$$.fragment,u),H=!0)},o(u){V(s.$$.fragment,u),H=!1},d(u){u&&f(e),N(s),u&&f(r),u&&f(o),u&&f(l),u&&f(a),u&&f(d),u&&f($),fe=!1,De(de)}}}function We(n){let e;return{c(){e=J("Create Post")},l(s){e=K(s,"Create Post")},m(s,t){v(s,e,t)},d(s){s&&f(e)}}}function Ye(n){let e,s,t,r,o;return e=new Ne({props:{$$slots:{default:[We]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment),s=I(),t=h("i"),r=J("arrow_forward"),this.h()},l(l){T(e.$$.fragment,l),s=w(l),t=g(l,"I",{class:!0,"aria-hidden":!0});var a=C(t);r=K(a,"arrow_forward"),a.forEach(f),this.h()},h(){c(t,"class","material-icons"),c(t,"aria-hidden","true")},m(l,a){A(e,l,a),v(l,s,a),v(l,t,a),p(t,r),o=!0},p(l,a){const d={};a&262144&&(d.$$scope={dirty:a,ctx:l}),e.$set(d)},i(l){o||(M(e.$$.fragment,l),o=!0)},o(l){V(e.$$.fragment,l),o=!1},d(l){N(e,l),l&&f(s),l&&f(t)}}}function Ze(n){let e,s;return e=new Ve({props:{$$slots:{default:[Ye]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){P(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){A(e,t,r),s=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function Qe(n){let e,s,t,r,o,l,a,d,$,D;function S(i){n[9](i)}function j(i){n[10](i)}let q={url:"/api/"+n[0].publicID+"/media"};return n[3]!==void 0&&(q.media=n[3]),n[2]!==void 0&&(q.isClicked=n[2]),e=new Be({props:q}),ce.push(()=>me(e,"media",S)),ce.push(()=>me(e,"isClicked",j)),e.$on("onUpload",n[7]),o=new Ae({props:{style:"display:flex; align-items:center; justify-content:center; min-height: 100px; max-height: 300px;background:white;",$$slots:{default:[ze]},$$scope:{ctx:n}}}),a=new Pe({props:{class:"mdc-typography--body2",$$slots:{default:[Re]},$$scope:{ctx:n}}}),$=new Me({props:{fullBleed:!0,$$slots:{default:[Ze]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment),r=I(),P(o.$$.fragment),l=I(),P(a.$$.fragment),d=I(),P($.$$.fragment)},l(i){T(e.$$.fragment,i),r=w(i),T(o.$$.fragment,i),l=w(i),T(a.$$.fragment,i),d=w(i),T($.$$.fragment,i)},m(i,m){A(e,i,m),v(i,r,m),A(o,i,m),v(i,l,m),A(a,i,m),v(i,d,m),A($,i,m),D=!0},p(i,m){const y={};m&1&&(y.url="/api/"+i[0].publicID+"/media"),!s&&m&8&&(s=!0,y.media=i[3],pe(()=>s=!1)),!t&&m&4&&(t=!0,y.isClicked=i[2],pe(()=>t=!1)),e.$set(y);const B={};m&262152&&(B.$$scope={dirty:m,ctx:i}),o.$set(B);const L={};m&262163&&(L.$$scope={dirty:m,ctx:i}),a.$set(L);const G={};m&262144&&(G.$$scope={dirty:m,ctx:i}),$.$set(G)},i(i){D||(M(e.$$.fragment,i),M(o.$$.fragment,i),M(a.$$.fragment,i),M($.$$.fragment,i),D=!0)},o(i){V(e.$$.fragment,i),V(o.$$.fragment,i),V(a.$$.fragment,i),V($.$$.fragment,i),D=!1},d(i){N(e,i),i&&f(r),N(o,i),i&&f(l),N(a,i),i&&f(d),N($,i)}}}function Xe(n){let e,s;return e=new ke({props:{$$slots:{default:[Qe]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){A(e,t,r),s=!0},p(t,[r]){const o={};r&262175&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function xe(n,e,s){let t,r;ve(n,Le,b=>s(16,t=b)),ve(n,qe,b=>s(4,r=b));let o=["Mathematics","Physics","Politics","Technology","Sports","Health","Science","Economics","Arts"],l=[],{post:a={name:t.data.user.name,publicID:t.data.user.publicID,media:"",profileImage:t.data.user.profile,title:"",subtitle:"",content:"",summary:"",comments:[],shares:[],likes:[],tags:[],images:[],creationTimeStamp:Date.now()}}=e,d=!1,$;const D=()=>{s(2,d=!0)},S=b=>{s(0,a.media=b.detail.mediaPath,a),s(0,a),s(3,$=b.detail.imgBase64)},j=async()=>{if(a.title.length===0){alert("Title is required");return}if(s(0,a.tags=l,a),s(0,a),!(await fetch(`/api/${t.data.user.publicID}/compose`,{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}})).ok){alert("Failed to create post");return}Ge(`/${t.data.user.publicID}`)};function q(b){$=b,s(3,$)}function i(b){d=b,s(2,d)}function m(b){l=b,s(1,l)}function y(){a.title=this.textContent,s(0,a)}function B(){a.subtitle=this.textContent,s(0,a)}function L(){a.summary=this.textContent,s(0,a)}function G(){a.content=this.textContent,s(0,a)}return n.$$set=b=>{"post"in b&&s(0,a=b.post)},[a,l,d,$,r,o,D,S,j,q,i,m,y,B,L,G]}class et extends Ce{constructor(e){super(),ye(this,e,xe,Xe,Ie,{post:0})}}function tt(n){let e,s,t,r,o;return r=new et({}),{c(){e=h("link"),s=h("meta"),t=I(),P(r.$$.fragment),this.h()},l(l){const a=Ee("svelte-5r1qxw",document.head);e=g(a,"LINK",{rel:!0,href:!0}),s=g(a,"META",{name:!0,content:!0}),a.forEach(f),t=w(l),T(r.$$.fragment,l),this.h()},h(){document.title="New post",c(e,"rel","canonical"),c(e,"href","https://satirigal.com/compose"),c(s,"name","description"),c(s,"content","Satirical posts")},m(l,a){p(document.head,e),p(document.head,s),v(l,t,a),A(r,l,a),o=!0},p:we,i(l){o||(M(r.$$.fragment,l),o=!0)},o(l){V(r.$$.fragment,l),o=!1},d(l){f(e),f(s),l&&f(t),N(r,l)}}}class pt extends Ce{constructor(e){super(),ye(this,e,null,tt,Ie,{})}}export{pt as component};
