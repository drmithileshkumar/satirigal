{"version":3,"file":"_server-f4291209.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/subscription/_server.js"],"sourcesContent":["import { g as getDBCollection } from \"../../../../chunks/mongo.js\";\nimport Razorpay from \"razorpay\";\nimport crypto from \"crypto\";\nimport { i as initializeNewPayment } from \"../../../../chunks/payment.js\";\nimport \"mongodb\";\nimport { e as error } from \"../../../../chunks/index.js\";\nasync function validateSubscription(user, userCollection2) {\n  if (!user) {\n    return {\n      status: 404,\n      body: { message: \"User not found\" }\n    };\n  }\n  const publicID = user.publicID;\n  if (!user.products) {\n    let startdate = /* @__PURE__ */ new Date();\n    let newdate = /* @__PURE__ */ new Date();\n    let expirydate = new Date(newdate.setDate(newdate.getDate() + 7));\n    let products = {\n      mathril: {\n        subscribed: true,\n        valid: true,\n        start: {\n          date: startdate.getDate(),\n          month: startdate.getMonth(),\n          year: startdate.getFullYear()\n        },\n        end: {\n          date: expirydate.getDate(),\n          month: expirydate.getMonth(),\n          year: expirydate.getFullYear()\n        },\n        type: \"Trial\"\n      }\n    };\n    const confirmTrial = await userCollection2.updateOne({ publicID }, { $set: { products } }, { upsert: true });\n    if (!confirmTrial.acknowledged) {\n      return {\n        status: 500,\n        body: { message: \"Failed to create subscription.\" }\n      };\n    }\n  } else if (!user.products.mathril) {\n    let startdate = /* @__PURE__ */ new Date();\n    let newdate = /* @__PURE__ */ new Date();\n    let expirydate = new Date(newdate.setDate(newdate.getDate() + 7));\n    let products = {\n      mathril: {\n        subscribed: true,\n        valid: true,\n        start: {\n          date: startdate.getDate(),\n          month: startdate.getMonth(),\n          year: startdate.getFullYear()\n        },\n        end: {\n          date: expirydate.getDate(),\n          month: expirydate.getMonth(),\n          year: expirydate.getFullYear()\n        },\n        type: \"Trial\"\n      }\n    };\n    const confirmTrial = await userCollection2.updateOne({ publicID }, { $set: { \"products.mathril\": products.mathril } }, { upsert: true });\n    if (!confirmTrial.acknowledged) {\n      return {\n        status: 500,\n        body: { message: \"Failed to create subscription.\" }\n      };\n    }\n  } else if (!user.products.mathril.valid) {\n    return {\n      status: 410,\n      body: { message: \"Renew subscription.\" }\n    };\n  }\n  let enddate = user.products.mathril.end;\n  if (/* @__PURE__ */ new Date() > new Date(enddate.year, enddate.month, enddate.date)) {\n    const confirmValidity = await userCollection2.updateOne({ publicID }, { $set: { \"products.mathril.valid\": false } }, { upsert: true });\n    if (!confirmValidity.acknowledged) {\n      return {\n        status: 500,\n        body: { message: \"Failed to update validity.\" }\n      };\n    }\n    return {\n      status: 411,\n      body: { message: \"Renew subscription.\" }\n    };\n  }\n  return {\n    status: 200,\n    body: { message: \"Valid\", type: user.products.mathril.type, expire: user.products.mathril.end }\n  };\n}\nlet key_id, key_secret;\n{\n  key_id = \"rzp_live_lMsk4ZYh8eG2YH\";\n  key_secret = \"PTOtGDcvuohBGvONJxR0h9o7\";\n}\nlet rzp = new Razorpay({\n  key_id,\n  // your `KEY_ID`\n  key_secret\n  // your `KEY_SECRET`\n});\nconst createOrder = async (amount) => {\n  try {\n    let options = {\n      amount: amount * 100 * 1.18,\n      // amount in the smallest currency unit\n      currency: \"INR\",\n      receipt: \"order_rcptid_11\"\n    };\n    let order = await rzp.orders.create(options);\n    return order;\n  } catch (error2) {\n    return null;\n  }\n};\nasync function GET({ url, params, request, locals }) {\n  if (!locals.user) {\n    return error(401, \"Unauthorized\");\n  }\n  const publicID = locals.user.publicID;\n  const userCollection2 = await getDBCollection(\"users\");\n  const user = await userCollection2.findOne({ publicID });\n  let res = await validateSubscription(user, userCollection2);\n  return new Response(JSON.stringify(res.body), { status: res.status, headers: {\n    \"cache-control\": \"private, max-age=0\"\n  } });\n}\nasync function POST({ url, params, request, locals }) {\n  if (!locals.user) {\n    return error(401, \"Unauthorized\");\n  }\n  const publicID = locals.user.publicID;\n  let { amount, type, coupon } = await request.json();\n  const couponsCollection = await getDBCollection(\"coupons\");\n  let hasValidCoupon = false;\n  let couponData = await couponsCollection.findOne({ coupon });\n  if (couponData && couponData.valid)\n    hasValidCoupon = true;\n  let discount = 0;\n  if (type === \"Monthly\") {\n    amount = 500;\n    if (hasValidCoupon) {\n      discount = 25;\n      amount = 500 - discount;\n    }\n  }\n  if (type === \"Yearly\") {\n    amount = 5e3;\n    if (hasValidCoupon) {\n      discount = 250;\n      amount = 5e3 - discount;\n    }\n  }\n  let order = await createOrder(amount);\n  if (!order) {\n    return error(500, \"Failed to initialize order\");\n  }\n  const paymentCollection = await getDBCollection(\"payments\");\n  let payment_id = \"\";\n  let order_id = order.id;\n  let newPayment = initializeNewPayment(payment_id, order_id, publicID, amount, discount, type, coupon);\n  const confirm = await paymentCollection.insertOne(newPayment);\n  if (!confirm.acknowledged) {\n    return error(500, \"Failed to save order\");\n  }\n  return new Response(JSON.stringify(order));\n}\nasync function PUT({ url, params, request, locals }) {\n  if (!locals.user) {\n    return error(401, \"Unauthorized\");\n  }\n  const { rzp_payment_id, rzp_order_id, rzp_signature, orderId, amount, type } = await request.json();\n  let body = orderId + \"|\" + rzp_payment_id;\n  var expectedSignature = crypto.createHmac(\"sha256\", key_secret).update(body.toString()).digest(\"hex\");\n  var message = \"Failed\";\n  if (expectedSignature === rzp_signature) {\n    message = \"Success\";\n  }\n  let publicID = locals.user ? locals.user.publicID : \"guest\";\n  let payment_id = rzp_payment_id, order_id = rzp_order_id, status = message;\n  const paymentCollection = await getDBCollection(\"payments\");\n  const confirm = await paymentCollection.updateOne({ publicID, order_id }, { $set: { payment_id, status } });\n  if (!confirm.acknowledged) {\n    message = \"Failed to save payment\";\n  }\n  let startdate = /* @__PURE__ */ new Date();\n  let newdate = /* @__PURE__ */ new Date();\n  let advance = type === \"Monthly\" ? 30 : 365;\n  let expirydate = new Date(newdate.setDate(newdate.getDate() + advance));\n  let products = {\n    mathril: {\n      subscribed: true,\n      valid: true,\n      start: {\n        date: startdate.getDate(),\n        month: startdate.getMonth(),\n        year: startdate.getFullYear()\n      },\n      end: {\n        date: expirydate.getDate(),\n        month: expirydate.getMonth(),\n        year: expirydate.getFullYear()\n      },\n      type\n    }\n  };\n  const confirmTrial = await userCollection.updateOne({ publicID }, { $set: { \"products.mathril\": products.mathril } }, { upsert: true });\n  if (!confirmTrial.acknowledged) {\n    message = \"Failed to create subscription.\";\n  }\n  return new Response(message);\n}\nexport {\n  GET,\n  POST,\n  PUT\n};\n"],"names":[],"mappings":"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"}