import{r as we}from"../chunks/index.ade5cbd2.js";import{S as ve,i as be,s as Ce,y as P,z as q,A as T,g as A,d as M,B as V,W as ge,o as De,w as ue,a1 as ce,a as D,c as E,b,a4 as fe,h as c,k as g,l as v,p as O,Y as le,n as f,q as J,m as C,r as K,a2 as se,V as h,G as Q,u as ae,M as Ee,Z as Se,$ as ke}from"../chunks/index.fe0a1c86.js";import{C as ye,a as Pe,M as qe}from"../chunks/ActionIcons.2788abc4.js";import{M as Te}from"../chunks/Media.63c111ac.js";import{A as Ae}from"../chunks/Actions.a7c78e01.js";import{B as Me,C as Ve}from"../chunks/Button.54000be3.js";import{I as Ne}from"../chunks/ImageUploader.f77b8eae.js";import{p as Ue}from"../chunks/stores.69f96dac.js";import{p as Le}from"../chunks/stores.ba3acca9.js";import{g as je}from"../chunks/navigation.a03ee98f.js";import{S as Be,C as Re}from"../chunks/Set.0ca803c6.js";import{T as ze}from"../chunks/Text.dd5b60c0.js";async function Fe({fetch:l,params:e,url:s}){if(!(s.host==="satirigal.com"||s.host==="localhost:5173"||s.host==="localhost:4173"||s.host==="localhost:3000"))throw we(301,"https://satirigal.com");let t=s.searchParams.get("postID");return{post:await(await l(`/api/post/${t}`)).json()}}const _t=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));function Ge(l){let e,s,t,n,r;return{c(){e=g("div"),s=g("span"),t=J("add_a_photo"),this.h()},l(o){e=v(o,"DIV",{style:!0});var a=C(e);s=v(a,"SPAN",{class:!0});var p=C(s);t=K(p,"add_a_photo"),p.forEach(c),a.forEach(c),this.h()},h(){f(s,"class","addphoto material-icons svelte-qci5pd"),O(e,"color","gray"),O(e,"position","absolute"),O(e,"bottom","16px"),O(e,"left","16px")},m(o,a){b(o,e,a),h(e,s),h(s,t),n||(r=Q(s,"click",l[6]),n=!0)},p:Se,d(o){o&&c(e),n=!1,r()}}}function He(l){let e,s,t,n,r;return n=new qe({props:{$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){e=g("img"),t=D(),P(n.$$.fragment),this.h()},l(o){e=v(o,"IMG",{style:!0,src:!0,alt:!0}),t=E(o),q(n.$$.fragment,o),this.h()},h(){O(e,"max-height","300px"),le(e.src,s=l[3])||f(e,"src",s),f(e,"alt","img")},m(o,a){b(o,e,a),b(o,t,a),T(n,o,a),r=!0},p(o,a){(!r||a&8&&!le(e.src,s=o[3]))&&f(e,"src",s);const p={};a&262144&&(p.$$scope={dirty:a,ctx:o}),n.$set(p)},i(o){r||(A(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&c(e),o&&c(t),V(n,o)}}}function Oe(l){let e=l[17]+"",s;return{c(){s=J(e)},l(t){s=K(t,e)},m(t,n){b(t,s,n)},p(t,n){n&131072&&e!==(e=t[17]+"")&&ae(s,e)},d(t){t&&c(s)}}}function Je(l){let e,s;return e=new ze({props:{$$slots:{default:[Oe]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const r={};n&393216&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function Ke(l){let e,s;return e=new Re({props:{chip:l[17],touch:!0,$$slots:{default:[Je]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const r={};n&131072&&(r.chip=t[17]),n&393216&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function We(l){let e,s,t,n,r,o,a,p,m,S,w,F,L,i,d,I,N,j=l[0].name+"",R,$,U,B,H=l[0].publicID+"",X,ne,Y,Z=new Date(l[0].creationTimeStamp).toLocaleString()+"",x,re,k,oe,y,z,ie,pe;function Ie(u){l[11](u)}let me={chips:l[5],filter:!0,$$slots:{default:[Ke,({chip:u})=>({17:u}),({chip:u})=>u?131072:0]},$$scope:{ctx:l}};return l[1]!==void 0&&(me.selected=l[1]),s=new Be({props:me}),ue.push(()=>ce(s,"selected",Ie)),{c(){e=g("div"),P(s.$$.fragment),n=D(),r=g("h2"),o=D(),a=g("h3"),p=D(),m=g("div"),S=g("div"),w=g("img"),i=D(),d=g("div"),I=g("div"),N=g("span"),R=J(j),$=D(),U=g("span"),B=g("span"),X=J(H),ne=D(),Y=g("span"),x=J(Z),re=D(),k=g("div"),oe=D(),y=g("div"),this.h()},l(u){e=v(u,"DIV",{class:!0});var _=C(e);q(s.$$.fragment,_),_.forEach(c),n=E(u),r=v(u,"H2",{class:!0,style:!0,contenteditable:!0,placeholder:!0}),C(r).forEach(c),o=E(u),a=v(u,"H3",{class:!0,style:!0,contenteditable:!0,placeholder:!0}),C(a).forEach(c),p=E(u),m=v(u,"DIV",{class:!0});var G=C(m);S=v(G,"DIV",{class:!0});var de=C(S);w=v(de,"IMG",{src:!0,alt:!0,class:!0}),de.forEach(c),i=E(G),d=v(G,"DIV",{class:!0});var W=C(d);I=v(W,"DIV",{class:!0});var ee=C(I);N=v(ee,"SPAN",{class:!0});var $e=C(N);R=K($e,j),$e.forEach(c),$=E(ee),U=v(ee,"SPAN",{class:!0});var te=C(U);B=v(te,"SPAN",{});var _e=C(B);X=K(_e,H),_e.forEach(c),ne=E(te),Y=v(te,"SPAN",{});var he=C(Y);x=K(he,Z),he.forEach(c),te.forEach(c),ee.forEach(c),re=E(W),k=v(W,"DIV",{class:!0,contenteditable:!0,placeholder:!0}),C(k).forEach(c),oe=E(W),y=v(W,"DIV",{class:!0,contenteditable:!0,placeholder:!0}),C(y).forEach(c),W.forEach(c),G.forEach(c),this.h()},h(){f(e,"class","tagsInput"),f(r,"class","title mdc-typography--headline6 svelte-qci5pd"),O(r,"margin","0"),f(r,"contenteditable","true"),f(r,"placeholder","Title here..."),l[0].title===void 0&&se(()=>l[12].call(r)),f(a,"class","subtitle mdc-typography--subtitle2 svelte-qci5pd"),O(a,"margin","0.5em 0"),f(a,"contenteditable","true"),f(a,"placeholder","Subtitle here..."),l[0].subtitle===void 0&&se(()=>l[13].call(a)),le(w.src,F=l[4])||f(w,"src",F),f(w,"alt",L=l[0].name),f(w,"class","svelte-qci5pd"),f(S,"class","image svelte-qci5pd"),f(N,"class","primary svelte-qci5pd"),f(U,"class","secondary svelte-qci5pd"),f(I,"class","header svelte-qci5pd"),f(k,"class","postSummary svelte-qci5pd"),f(k,"contenteditable","true"),f(k,"placeholder","Type summary here..."),l[0].summary===void 0&&se(()=>l[14].call(k)),f(y,"class","postcontent svelte-qci5pd"),f(y,"contenteditable","true"),f(y,"placeholder","Type here..."),l[0].content===void 0&&se(()=>l[15].call(y)),f(d,"class","body"),f(m,"class","postcontainer svelte-qci5pd")},m(u,_){b(u,e,_),T(s,e,null),b(u,n,_),b(u,r,_),l[0].title!==void 0&&(r.textContent=l[0].title),b(u,o,_),b(u,a,_),l[0].subtitle!==void 0&&(a.textContent=l[0].subtitle),b(u,p,_),b(u,m,_),h(m,S),h(S,w),h(m,i),h(m,d),h(d,I),h(I,N),h(N,R),h(I,$),h(I,U),h(U,B),h(B,X),h(U,ne),h(U,Y),h(Y,x),h(d,re),h(d,k),l[0].summary!==void 0&&(k.textContent=l[0].summary),h(d,oe),h(d,y),l[0].content!==void 0&&(y.textContent=l[0].content),z=!0,ie||(pe=[Q(r,"input",l[12]),Q(a,"input",l[13]),Q(k,"input",l[14]),Q(y,"input",l[15])],ie=!0)},p(u,_){const G={};_&393216&&(G.$$scope={dirty:_,ctx:u}),!t&&_&2&&(t=!0,G.selected=u[1],fe(()=>t=!1)),s.$set(G),_&1&&u[0].title!==r.textContent&&(r.textContent=u[0].title),_&1&&u[0].subtitle!==a.textContent&&(a.textContent=u[0].subtitle),(!z||_&16&&!le(w.src,F=u[4]))&&f(w,"src",F),(!z||_&1&&L!==(L=u[0].name))&&f(w,"alt",L),(!z||_&1)&&j!==(j=u[0].name+"")&&ae(R,j),(!z||_&1)&&H!==(H=u[0].publicID+"")&&ae(X,H),(!z||_&1)&&Z!==(Z=new Date(u[0].creationTimeStamp).toLocaleString()+"")&&ae(x,Z),_&1&&u[0].summary!==k.textContent&&(k.textContent=u[0].summary),_&1&&u[0].content!==y.textContent&&(y.textContent=u[0].content)},i(u){z||(A(s.$$.fragment,u),z=!0)},o(u){M(s.$$.fragment,u),z=!1},d(u){u&&c(e),V(s),u&&c(n),u&&c(r),u&&c(o),u&&c(a),u&&c(p),u&&c(m),ie=!1,Ee(pe)}}}function Ye(l){let e;return{c(){e=J("Update Post")},l(s){e=K(s,"Update Post")},m(s,t){b(s,e,t)},d(s){s&&c(e)}}}function Ze(l){let e,s,t,n,r;return e=new Ve({props:{$$slots:{default:[Ye]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment),s=D(),t=g("i"),n=J("arrow_forward"),this.h()},l(o){q(e.$$.fragment,o),s=E(o),t=v(o,"I",{class:!0,"aria-hidden":!0});var a=C(t);n=K(a,"arrow_forward"),a.forEach(c),this.h()},h(){f(t,"class","material-icons"),f(t,"aria-hidden","true")},m(o,a){T(e,o,a),b(o,s,a),b(o,t,a),h(t,n),r=!0},p(o,a){const p={};a&262144&&(p.$$scope={dirty:a,ctx:o}),e.$set(p)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){M(e.$$.fragment,o),r=!1},d(o){V(e,o),o&&c(s),o&&c(t)}}}function Qe(l){let e,s;return e=new Me({props:{$$slots:{default:[Ze]},$$scope:{ctx:l}}}),e.$on("click",l[8]),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const r={};n&262144&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function Xe(l){let e,s,t,n,r,o,a,p,m,S;function w(i){l[9](i)}function F(i){l[10](i)}let L={url:"/api/"+l[0].publicID+"/media"};return l[3]!==void 0&&(L.media=l[3]),l[2]!==void 0&&(L.isClicked=l[2]),e=new Ne({props:L}),ue.push(()=>ce(e,"media",w)),ue.push(()=>ce(e,"isClicked",F)),e.$on("onUpload",l[7]),r=new Te({props:{style:"display:flex; align-items:center; justify-content:center; max-height: 300px;background:white;",$$slots:{default:[He]},$$scope:{ctx:l}}}),a=new Pe({props:{class:"mdc-typography--body2",$$slots:{default:[We]},$$scope:{ctx:l}}}),m=new Ae({props:{fullBleed:!0,$$slots:{default:[Qe]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment),n=D(),P(r.$$.fragment),o=D(),P(a.$$.fragment),p=D(),P(m.$$.fragment)},l(i){q(e.$$.fragment,i),n=E(i),q(r.$$.fragment,i),o=E(i),q(a.$$.fragment,i),p=E(i),q(m.$$.fragment,i)},m(i,d){T(e,i,d),b(i,n,d),T(r,i,d),b(i,o,d),T(a,i,d),b(i,p,d),T(m,i,d),S=!0},p(i,d){const I={};d&1&&(I.url="/api/"+i[0].publicID+"/media"),!s&&d&8&&(s=!0,I.media=i[3],fe(()=>s=!1)),!t&&d&4&&(t=!0,I.isClicked=i[2],fe(()=>t=!1)),e.$set(I);const N={};d&262152&&(N.$$scope={dirty:d,ctx:i}),r.$set(N);const j={};d&262163&&(j.$$scope={dirty:d,ctx:i}),a.$set(j);const R={};d&262144&&(R.$$scope={dirty:d,ctx:i}),m.$set(R)},i(i){S||(A(e.$$.fragment,i),A(r.$$.fragment,i),A(a.$$.fragment,i),A(m.$$.fragment,i),S=!0)},o(i){M(e.$$.fragment,i),M(r.$$.fragment,i),M(a.$$.fragment,i),M(m.$$.fragment,i),S=!1},d(i){V(e,i),i&&c(n),V(r,i),i&&c(o),V(a,i),i&&c(p),V(m,i)}}}function xe(l){let e,s;return e=new ye({props:{$$slots:{default:[Xe]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,[n]){const r={};n&262175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function et(l,e,s){let t,n;ge(l,Le,$=>s(16,t=$)),ge(l,Ue,$=>s(4,n=$));let r=["Mathematics","Physics","Politics","Technology","Sports","Health","Science","Economics","Arts"],o=[],{post:a={url:"",name:t.data.user.name,publicID:t.data.user.publicID,media:"",profileImage:t.data.user.profile,title:"",subtitle:"",summary:"",content:"",comments:[],shares:[],likes:[],tags:[],images:[],creationTimeStamp:Date.now()}}=e,p=!1,m;De(async()=>{if(a.media){let $=await fetch(`/api/${a.publicID}/media?media=${a.media}`);$.ok||alert("Failed to load data...");let U=new FileReader,B;a.media.split(".")[1]==="svg"?(B=await $.text(),s(3,m="data:image/svg+xml,"+encodeURIComponent(B))):(B=await $.blob(),U.readAsDataURL(B),U.onload=H=>{s(3,m=H.target.result)})}});const S=()=>{s(2,p=!0)},w=$=>{s(0,a.media=$.detail.mediaPath,a),s(0,a)},F=async()=>{if(a.title.length===0){alert("Title is required");return}if(s(0,a.tags=o,a),s(0,a),!(await fetch(`/api/${t.data.user.publicID}/compose`,{method:"PUT",body:JSON.stringify(a),headers:{"content-type":"application/json"}})).ok){alert("Failed to create post");return}je(`/${t.data.user.publicID}`)};function L($){m=$,s(3,m)}function i($){p=$,s(2,p)}function d($){o=$,s(1,o)}function I(){a.title=this.textContent,s(0,a)}function N(){a.subtitle=this.textContent,s(0,a)}function j(){a.summary=this.textContent,s(0,a)}function R(){a.content=this.textContent,s(0,a)}return l.$$set=$=>{"post"in $&&s(0,a=$.post)},[a,o,p,m,n,r,S,w,F,L,i,d,I,N,j,R]}class tt extends ve{constructor(e){super(),be(this,e,et,xe,Ce,{post:0})}}function st(l){let e,s,t,n,r,o;return r=new tt({props:{post:l[0].post}}),{c(){e=g("link"),s=g("meta"),t=D(),n=g("article"),P(r.$$.fragment),this.h()},l(a){const p=ke("svelte-z37mwg",document.head);e=v(p,"LINK",{rel:!0,href:!0}),s=v(p,"META",{name:!0,content:!0}),p.forEach(c),t=E(a),n=v(a,"ARTICLE",{});var m=C(n);q(r.$$.fragment,m),m.forEach(c),this.h()},h(){document.title="Edit post",f(e,"rel","canonical"),f(e,"href","https://satirigal.com/edit"),f(s,"name","description"),f(s,"content","Trending Post.")},m(a,p){h(document.head,e),h(document.head,s),b(a,t,p),b(a,n,p),T(r,n,null),o=!0},p(a,[p]){const m={};p&1&&(m.post=a[0].post),r.$set(m)},i(a){o||(A(r.$$.fragment,a),o=!0)},o(a){M(r.$$.fragment,a),o=!1},d(a){c(e),c(s),a&&c(t),a&&c(n),V(r)}}}function at(l,e,s){let{data:t}=e;return l.$$set=n=>{"data"in n&&s(0,t=n.data)},[t]}class ht extends ve{constructor(e){super(),be(this,e,at,st,Ce,{data:0})}}export{ht as component,_t as universal};
